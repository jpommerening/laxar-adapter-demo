{"version":3,"sources":["webpack:///webpack/bootstrap d62698fa118370857962?4faa","webpack:///./vendor/laxar/polyfills.js?f3f1","webpack:///./~/promise-polyfill/promise.js?6ded","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js?69c1","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/~/setimmediate/setImmediate.js?952f","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js?6f0e","webpack:///./~/whatwg-fetch/fetch.js?1c20","webpack:///./vendor/laxar/lib/polyfills/array_from.js?1686","webpack:///./vendor/laxar/lib/polyfills/array_includes.js?3441","webpack:///./vendor/laxar/lib/polyfills/object_assign.js?47f2","webpack:///./vendor/laxar/laxar.js?f4d9","webpack:///./vendor/laxar/lib/utilities/assert.js?548f","webpack:///./vendor/laxar/lib/utilities/object.js?ecb9","webpack:///./vendor/laxar/lib/utilities/string.js?856e","webpack:///./vendor/laxar/lib/runtime/services.js?5730","webpack:///./~/page/index.js?6133","webpack:///./~/page/~/path-to-regexp/index.js?9467","webpack:///./~/page/~/path-to-regexp/~/isarray/index.js?582c","webpack:///./vendor/laxar/lib/runtime/configuration.js?efe9","webpack:///./vendor/laxar/lib/runtime/browser.js?c332","webpack:///./vendor/laxar/lib/runtime/log.js?ae9e","webpack:///./vendor/laxar/lib/runtime/event_bus.js?6c80","webpack:///./vendor/laxar/lib/runtime/artifact_provider.js?18ae","webpack:///./vendor/laxar/lib/loaders/control_loader.js?1e77","webpack:///./vendor/laxar/lib/loaders/css_loader.js?6cab","webpack:///./vendor/laxar/lib/loaders/layout_loader.js?04a9","webpack:///./vendor/laxar/lib/loaders/page_loader.js?ab75","webpack:///./vendor/laxar/lib/utilities/json_validator.js?5b23","webpack:///./~/jjv/index.js?56fe","webpack:///./~/jjv/lib/jjv.js?7d93","webpack:///./~/jjve/jjve.js?5dc7","webpack:///./vendor/laxar/lib/loaders/features_provider.js?566e","webpack:///./vendor/laxar/static/schemas/page.json?4cbd","webpack:///./vendor/laxar/lib/tooling/pages.js?87d4","webpack:///./vendor/laxar/lib/loaders/theme_loader.js?0027","webpack:///./vendor/laxar/lib/loaders/widget_loader.js?5947","webpack:///./vendor/laxar/lib/runtime/storage.js?d8ea","webpack:///./vendor/laxar/lib/runtime/timer.js?145a","webpack:///./vendor/laxar/lib/runtime/flow_controller.js?a18e","webpack:///./vendor/laxar/static/schemas/flow.json?438d","webpack:///./vendor/laxar/lib/runtime/flow_service.js?1186","webpack:///./vendor/laxar/lib/runtime/heartbeat.js?ea70","webpack:///./vendor/laxar/lib/runtime/page_service.js?ee7b","webpack:///./vendor/laxar/lib/runtime/area_helper.js?177f","webpack:///./vendor/laxar/lib/runtime/layout_widget_adapter.js?800f","webpack:///./vendor/laxar/lib/runtime/pagejs_router.js?91dc","webpack:///./vendor/laxar/lib/runtime/locale_event_manager.js?85a3","webpack:///./vendor/laxar/lib/runtime/visibility_event_manager.js?1097","webpack:///./vendor/laxar/lib/runtime/widget_services.js?d8e6","webpack:///./vendor/laxar/lib/runtime/widget_services_i18n.js?a289","webpack:///./vendor/laxar/lib/runtime/widget_services_visibility.js?758a","webpack:///./vendor/laxar/lib/tooling/tooling.js?3d0c","webpack:///./vendor/laxar/lib/runtime/plain_adapter.js?588d"],"names":["Array","from","toStr","Object","prototype","toString","isCallable","fn","call","toInteger","value","number","Number","isNaN","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","len","min","max","arrayLike","C","items","TypeError","mapFn","arguments","length","undefined","T","A","k","kValue","includes","searchElement","optionalFromIndex","list","n","parseInt","start","assign","target","output","index","source","nextKey","hasOwnProperty","bootstrap","object","string","plainAdapter","global","Function","eval","_","window","anchorElement","widgetAdapters","configuration","artifacts","isNotNull","hasType","services","globalEventBus","log","storage","themeLoader","widgetLoader","load","adapterServices","artifactProvider","flowService","heartbeat","pageService","tooling","toolingProviders","adapterModules","adapters","bootstrapWidgetAdapters","registerWidgetAdapters","announceInstance","flowName","get","trace","whenDocumentReady","createControllerFor","flowController","loadFlow","then","fatal","err","stack","callback","document","readyState","addEventListener","adapterModulesByTechnology","artifactsByTechnology","forEach","module","technology","widgets","controls","type","artifact","descriptor","integration","name","push","adaptersByTechnology","keys","adapterModule","instances","idGenerator","simpleId","instanceIdStorageKey","store","getApplicationSessionStorage","instanceId","getItem","setItem","addTag","Date","now","random","optionalName","laxarInstances","assert","Assertion","subject","optionalDetails","subject_","details_","fail","checkType","actualString","functionName","constructor","expectedString","hasProperty","property","message","details","detailString","JSON","stringify","Error","TYPE_TO_CONSTRUCTOR","String","Boolean","actualType","FUNCTION_NAME_MATCHER","func","match","exec","trim","codeIsUnreachable","state","expression","options","path","setPath","deepClone","tabulate","obj","defaults","iteratorFunction","isArray","key","thePath","optionalDefault","pathArr","split","node","shift","last","pop","pathFragment","lookAheadFragment","fillArrayWithNull","result","i","reduce","table","arr","toIndex","hasOwnProp","format","createFormatter","BACKSLASH","OPENING_BRACKET","CLOSING_BRACKET","INTEGER_MATCHER","DEFAULT_FORMATTERS","freeze","input","toFixed","subSpecifierString","d","precision","s","DEFAULT_FORMATTER","optionalIndexedReplacements","optionalNamedReplacements","typeFormatters","optionalValueMappers","defaultTypeFormatter","indexed","named","chars","closingIndex","indexOf","substring","replacePlaceholder","placeholder","context","specifier","placeholderParts","test","charAt","slice","part","specifierMatch","knownSpecifiers","filter","map","join","create","configurationSource","assets","configurationDefaults","baseHref","eventBusTimeoutMs","router","query","enabled","flow","entryPoint","parameters","i18n","fallback","strict","locales","logging","levels","threshold","theme","storagePrefix","browser","collectors","timer","timeoutFn","f","t","setTimeout","onNext","cssLoader","layoutLoader","pageLoader","pages","controlLoader","widgetServices","forWidget","localeManager","visibilityManager","ensure","resolveDoc","resolveDocBase","resolve","selectResolver","location","fetch","init","console","href","URL","resolveUsingUrl","resolveUsingLink","e","url","baseUrl","absoluteBaseUrl","baseURI","implementation","createHTMLDocument","createElement","head","appendChild","baseDocument","a","createConsoleChannel","TRACE","DEBUG","INFO","WARN","ERROR","FATAL","BLACKBOX","optionalBrowser","startChannels","Logger","channels","queueSize_","channels_","counter_","messageQueue_","threshold_","tags_","levelToName_","level","levelName","toLowerCase","args","setLogThreshold","replacements","blackboxDepth","messageObject","id","text","time","tags","gatherTags","sourceInfo","gatherSourceInformation","channel","debug","info","warn","error","addLogChannel","entry","removeLogChannel","channelIndex","splice","tag","setTag","removeTag","values","toUpperCase","EMPTY_CALL_INFORMATION","file","line","char","rows","interpret","chromeStackInterpreter","firefoxStackInterpreter","row","CHROME_AND_IE_STACK_MATCHER","FIREFOX_STACK_MATCHER","browserConsole","logMethod","callArgs","concat","mergeTextAndReplacements","parts","pos","buffer","character","end","replacementIndex","WILDCARD","SUBSCRIBER_FIELD","TOPIC_SEPARATOR","SUB_TOPIC_SEPARATOR","REQUEST_MATCHER","EventBus","nextTick","timeoutFunction","errorHandler","createLogErrorHandler","nextTick_","timeoutFunction_","ms","timeoutMs_","errorHandler_","cycleCounter_","eventQueue_","subscriberTree_","waitingPromiseResolves_","currentCycle_","inspectors_","log_","addInspector","inspector","bind","subscribe","eventName","subscriber","optionalOptions","clone","subscriberItem","subscriberName","subscriptionWeight","calculateSubscriptionWeight","eventNameParts","eventNamePart","bucketName","notifyInspectors","action","event","cycleId","unsubscribeRecursively","publish","optionalEvent","parse","deliverToSender","sender","Promise","eventItem","meta","initiator","resolvePublish","enqueueEvent","eventObject","publishAndGatherReplies","matches","pendingDidTimeout","eventNameSuffix","deferred","promise","reject","willWaitingForDid","givenDidResponses","cycleFinished","unsubscribeWillCollector","unsubscribeDidCollector","senderIndex","finish","timeoutRef","wasCanceled","clearTimeout","self","queuedEvents","processWaitingPublishPromises","processQueue","subscribers","findSubscribers","serializedEvent","senderName","subscribedTo","newPromiseResolves","waitingResolves","rest","searchPart","findSubscribersRecursively","sort","b","aWeight","bWeight","remainder","currentPart","lastIndexOf","weight","infoObject","optionalErrorInformation","sensitiveData","title","formatString","NOT_FOUND","content","themeIndex","aliases","themes","themeRef","themeName","forFlow","makeProvider","forTheme","forPage","forLayout","forControl","bucket","cloneKeys","api","ref","artifactPromise","lookup","lookupForTheme","themedAssets","defaultAssets","provide","provideUrl","asset","assetUrl","assetForTheme","assetUrlForTheme","notDeclaredMessage","errorInfoLink","modules","controlRef","all","styleSource","mergedCssFileLoaded","getElementsByTagName","some","link","hasAttribute","loadedFiles","element","rel","layoutRef","templateSource","html","cssUrl","className","featuresProvider","SEGMENTS_MATCHER","ID_SEPARATOR","ID_SEPARATOR_MATCHER","SUBTOPIC_SEPARATOR","COMPOSITION_EXPRESSION_MATCHER","COMPOSITION_TOPIC_PREFIX","PageLoader","pageCollector","artifactProvider_","pageToolingCollector_","idCounter_","pageRef","loadPageRecursively","extensionChain","page","throwError","definition","foundPage","validatePage","areas","processExtends","generateMissingIds","checkForDuplicateIds","processCompositions","removeDisabledWidgets","collectPageDefinition","has","mergePageWithBasePage","basePage","extendingAreas","mergedPageAreas","layout","areaName","mergeWidgetLists","topPage","topPageRef","processNestedCompositions","compositionChain","reverse","widgetSpec","ensureWidgetSpecHasId","compositionRef","composition","chainString","prefixCompositionIds","processCompositionExpressions","chain","collectCompositionDefinition","mergeCompositionAreasWithPageAreas","compositionSpec","compositionAreaWidgets","insertAfterEntry","removeEntry","prefixedAreas","widget","throwPageError","expressionData","features","iterateOverExpressions","replaceExpression","featuresForWidget","mergedFeatures","currentValue","featurePath","possibleNegation","topicFromId","substr","replacer","replacedKey","replacedValue","widgetList","idCount","duplicates","widgetId","generateDefaultWidgetSpecName","artifactName","replace","dashToCamelcase","nextId","pageName","errors","validate","errorString","errorItem","targetList","sourceList","widgetConfiguration","insertBeforeId","what","prefix","segmentStart","pagesCollector","JSON_SCHEMA_V4_URI","jsonSchema","env","prohibitAdditionalProperties","defaultOptions","$schema","origValidate","schema","additionalProperties","properties","patternProperties","pattern","TOPIC_IDENTIFIER","SUB_TOPIC_FORMAT","RegExp","TOPIC_FORMAT","FLAG_TOPIC_FORMAT","LANGUAGE_TAG_FORMAT","widgetSpecification","featureConfiguration","featuresSpec","validator","createFeaturesValidator","feature","useDefault","addFormat","subTopic","topic","flagTopic","languageTag","topicMap","every","localization","createProvider","createCollector","FLAT","COMPACT","collector","enable","disable","current","addListener","removeListener","listeners","currentPageInfo","pageReference","pageDefinitions","compositionDefinitions","widgetDescriptors","collectWidgetDescriptor","definitions","compositionInstanceId","definitionsByInstance","collectCurrentPage","listener","cleanup","currentRef","collection","themeProvider","TYPE_WIDGET","TYPE_ACTIVITY","adapterErrors","activityAccessingDom","widgetName","unknownInjection","injection","unknownWidget","noOp","servicesForWidget","onBeforeControllerCreation","widgetArtifactProvider","controlDescriptors","checkTechnologyCompatibility","throwWidgetError","adapterFactory","serviceDecorators","releaseServices","environment","destroy","adapter","templatePromise","loadAssets","widgetDescriptor","controlTechnology","controlDescriptor","SESSION","LOCAL","createStorage","backend","namespace","removeItem","item","nsKey","getOrFakeBackend","webStorageName","testKey","method","val","applicationPrefix","localStorageBackend","sessionStorageBackend","localBackend","sessionBackend","getLocalStorage","getSessionStorage","getApplicationLocalStorage","started","idCounter","Timer","options_","label","startTime_","stopTime_","splitTimes_","getData","startTime","stopTime","splitTimes","splitTime","optionalLabel","stop","stopAndLog","endTime","toISOString","intervals","data","SESSION_KEY_TIMER","DEFAULT_PLACE","TARGET_SELF","eventBus","COLLABORATOR_ID","availablePlaces","activeParameters","activePlace","navigationInProgress","requestedTarget","navigateToTarget","constructAbsoluteUrl","validateFlowJson","registerRoutes","assembleRoutes","createFallbackHandler","placeForTarget","targetOrPlaceId","place","placeId","targets","targetOrPlace","optionalParameters","patterns","withoutRedundantParameters","redirectFrom","navigateTo","handleRouteChange","routerParameters","defaultParameters","equals","fromPlace","navigationTimer","persistenceKey","controller","tearDownPage","setupPage","catch","redirectOn","places","unknownPlace","routeMap","redirectTo","flowJson","remainingParameters","aKeys","bKeys","customNextTick","customTimeout","timeout","heartbeatListeners","nextQueue","beforeQueue","afterQueue","beatRequested","registerHeartbeatListener","onBeforeNext","onAfterNext","pageController","pageServiceApi","pageElement","HTMLElement","createPageController","areaHelper","WIDGET_ATTACH_DELAY_MS","LIFECYCLE_EVENT","lifecycleId","EVENT_OPTIONS","DEFAULT_AREAS","hidden","activeWidgetAdapterWrappers","cleanUpLayout","innerHTML","setAreaHelper","layoutPromise","renderLayout","layoutInfo","layoutWidget","layoutWidgetAdapterFor","widgetPromises","widgetsForPage","results","widgetAdapterWrappers","initialize","delay","attachWidgets","unsubscribe","wrapper","areaWidgets","area","addClass","deregisterFuncs","register","exists","setAttribute","style","display","removeClass","cssClass","classList","add","remove","c","findWidgetAreas","exports","setVisibility","areasInArea","areasInWidget","freeToAttach","areaToElement","areaToWaitingAdapters","knownVisibilityState","widgetIdToArea","areasInAreaMap","areasInWidgetMap","widgetEntries","containerName","isVisible","visible","attachWaitingAdapters","adapterRef","waitingAdapters","domAttachTo","htmlTemplates","rootElement","querySelectorAll","elem","getAttribute","createController","domDetach","layoutNode","deregister","areaElement","htmlTemplate","parentNode","removeChild","ROUTE_PARAM_MATCHER","TRAILING_SEGMENTS_MATCHER","pagejs","hashbang","queryEnabled","base","fallbackBase","origin","originFromLocation","absoluteBase","fallbackHandler","handler","collectParameters","replaceHistory","constructPath","redirect","show","parameterDefaults","routingPath","bestPattern","$0","$param","$modifier","replacement","encodeSegment","parameterName","encodedKey","encodeURIComponent","querystring","params","decodeURIComponent","isMultiSegment","decodeSegment","urlSegments","segments","pathname","documentBase","protocol","hostname","port","senderOptions","subscriberOptions","configLocales","initialized","unsubscribeFromEventBus","locale","unsubscribeFromAreaVisibilityRequest","unsubscribeFromWidgetVisibilityRequest","ROOT","affectedAreas","will","did","hide","initiateAreaChange","implementAreaChange","requestAreaChange","request","responses","response","ofArea","areaVisible","children","INVALID_ID_MATCHER","i18nOptions","specification","decorators","axAreaHelper","axAssets","axConfiguration","axContext","axControls","axEventBus","axFeatures","axFlowService","axGlobalEventBus","axGlobalLog","axGlobalStorage","axHeartbeat","axI18n","axId","axLog","axStorage","axTooling","axVisibility","releaseHandlers","registerServiceFactory","createAreaHelperForWidget","release","createAssetsServiceForWidget","registerService","createContextForWidget","createEventBusForWidget","createIdGeneratorForWidget","createLoggerForWidget","createStorageForWidget","instance","decorate","factory","optionalRelease","defineProperty","fullName","localAreaName","qualify","localName","fullAreaName","unqualify","widgetArtifacts","assetService","urlForTheme","logger","newLogger","enrich","local","session","charCodeOfA","charCodeAt","fixLetter","l","fromCharCode","localId","collaboratorId","inspectorRemoveFunctions","unsubscribeFunctions","makeAutoRemovable","purgeAutoRemoveRegistries","registry","removeFunction","registries","noDeliveryToSender","primitives","boolean","normalize","memoize","handlers","callbacks","handleLocaleChange","forFeature","localize","localizeStrict","localizeRelaxed","track","update","whenLocaleChanged","i18nValue","optionalFallbackValue","tagParts","currentLocaleTag","lookupKey","availableTags","newTag","cache","onChange","onHide","onShow","updateAreaVisibility","updateWidgetVisibility","trackingProperty","showListeners","hideListeners","unsubscribeToChanges","visibilityByArea","overrideByArea","unsubscribeToAreaRequests","updateChangeSubscription","visibilityByLocalArea","overrideContainer","requestEvent","responder","isAreaVisible","promises","oldVisible","oldOverride","containerVisible","array","needsSubscription","didEvent","createCollectors","createProviders","onDomAvailable","domAttached","provider","axWithDom","injections","parent"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCA;;AACA;;AACA;;AACA;;AACA,yB;;;;;;ACLA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA,kDAAiD,SAAS;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA,sBAAqB,iBAAiB;AACtC;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,2CAA0C,SAAS;AACnD;AACA;AACA,MAAK;AACL;;AAEA;AACA,gFAA+E,kBAAkB,EAAE;AACnG;AACA;AACA;;AAEA;AACA;AACA,kEAAiE;AACjE;AACA;;AAEA;AACA;AACA,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA,EAAC;;;;;;;;ACxOD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAU;AACV;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;;;;ACzLD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;ACnLtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,mCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,yCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD,UAAS;AACT;AACA,UAAS;AACT,+EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B,uBAAuB;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA,wCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gCAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;AACL;AACA;AACA,EAAC;;;;;;;;;ACzcD;AACA;AACA;AACA;AACA,KAAI,CAACA,MAAMC,IAAX,EAAkB;AAAA;AACf,WAAMC,QAAQC,OAAOC,SAAP,CAAiBC,QAA/B;AACA,WAAMC,aAAa,SAAbA,UAAa,CAAUC,EAAV,EAAe;AAC/B,iBAAO,OAAOA,EAAP,KAAc,UAAd,IAA4BL,MAAMM,IAAN,CAAYD,EAAZ,MAAqB,qBAAxD;AACF,QAFD;AAGA,WAAME,YAAY,SAAZA,SAAY,CAAUC,KAAV,EAAkB;AACjC,cAAMC,SAASC,OAAQF,KAAR,CAAf;AACA,cAAIG,MAAOF,MAAP,CAAJ,EAAsB;AAAE,oBAAO,CAAP;AAAW;AACnC,cAAIA,WAAW,CAAX,IAAgB,CAACG,SAAUH,MAAV,CAArB,EAA0C;AAAE,oBAAOA,MAAP;AAAgB;AAC5D,iBAAO,CAAEA,SAAS,CAAT,GAAa,CAAb,GAAiB,CAAC,CAApB,IAA0BI,KAAKC,KAAL,CAAYD,KAAKE,GAAL,CAAUN,MAAV,CAAZ,CAAjC;AACF,QALD;AAMA,WAAMO,iBAAiBH,KAAKI,GAAL,CAAU,CAAV,EAAa,EAAb,IAAoB,CAA3C;AACA,WAAMC,WAAW,SAAXA,QAAW,CAAUV,KAAV,EAAkB;AAChC,cAAMW,MAAMZ,UAAWC,KAAX,CAAZ;AACA,iBAAOK,KAAKO,GAAL,CAAUP,KAAKQ,GAAL,CAAUF,GAAV,EAAe,CAAf,CAAV,EAA8BH,cAA9B,CAAP;AACF,QAHD;;AAKA;AACAlB,aAAMC,IAAN,GAAa,SAASA,IAAT,CAAeuB,SAAf,CAAwB,qBAAxB,EAAgD;AAC1D;AACA,cAAMC,IAAI,IAAV;;AAEA;AACA,cAAMC,QAAQvB,OAAQqB,SAAR,CAAd;;AAEA;AACA,cAAIA,aAAa,IAAjB,EAAwB;AACrB,mBAAM,IAAIG,SAAJ,CAAe,kEAAf,CAAN;AACF;;AAED;AACA;AACA,cAAMC,QAAQC,UAAUC,MAAV,GAAmB,CAAnB,GAAuBD,UAAW,CAAX,CAAvB,GAAwC,KAAKE,SAA3D;AACA,cAAIC,UAAJ;AACA,cAAI,OAAOJ,KAAP,KAAiB,WAArB,EAAmC;AAChC;AACA;AACA,iBAAI,CAACtB,WAAYsB,KAAZ,CAAL,EAA2B;AACxB,sBAAM,IAAID,SAAJ,CAAe,mEAAf,CAAN;AACF;;AAED;AACA,iBAAIE,UAAUC,MAAV,GAAmB,CAAvB,EAA2B;AACxBE,oBAAIH,UAAW,CAAX,CAAJ;AACF;AACH;;AAED;AACA;AACA,cAAMR,MAAMD,SAAUM,MAAMI,MAAhB,CAAZ;;AAEA;AACA;AACA;AACA;AACA,cAAMG,IAAI3B,WAAYmB,CAAZ,IAAkBtB,OAAQ,IAAIsB,CAAJ,CAAOJ,GAAP,CAAR,CAAlB,GAA2C,IAAIrB,KAAJ,CAAWqB,GAAX,CAArD;;AAEA;AACA,cAAIa,IAAI,CAAR;AACA;AACA,cAAIC,eAAJ;AACA,iBAAOD,IAAIb,GAAX,EAAiB;AACdc,sBAAST,MAAOQ,CAAP,CAAT;AACA,iBAAIN,KAAJ,EAAY;AACTK,kBAAGC,CAAH,IAAS,OAAOF,CAAP,KAAa,WAAb,GAA2BJ,MAAOO,MAAP,EAAeD,CAAf,CAA3B,GAAgDN,MAAMpB,IAAN,CAAYwB,CAAZ,EAAeG,MAAf,EAAuBD,CAAvB,CAAzD;AACF,cAFD,MAGK;AACFD,kBAAGC,CAAH,IAASC,MAAT;AACF;AACDD,kBAAK,CAAL;AACF;AACD;AACAD,YAAEH,MAAF,GAAWT,GAAX;AACA;AACA,iBAAOY,CAAP;AACF,QAzDD;AAlBe;AA4EjB,E;;;;;;;;AChFD;AACA;AACA;AACA,KAAI,CAACjC,MAAMI,SAAN,CAAgBgC,QAArB,EAAgC;AAC7B;AACApC,UAAMI,SAAN,CAAgBgC,QAAhB,GAA2B,UAAUC,aAAV,EAAyBC,iBAAzB,EAA6C;AACrE;;AACA,WAAI,QAAQ,IAAZ,EAAmB;AAChB,gBAAM,IAAIX,SAAJ,CAAe,sDAAf,CAAN;AACF;AACD,WAAMY,OAAOpC,OAAQ,IAAR,CAAb;AACA,WAAMqC,IAAIC,SAAUF,KAAKT,MAAf,EAAuB,EAAvB,KAA+B,CAAzC;AACA,WAAIU,MAAM,CAAV,EAAc;AAAE,iBAAO,KAAP;AAAe;;AAE/B,WAAME,QAAQD,SAAUH,iBAAV,EAA6B,EAA7B,KAAqC,CAAnD;AACA,WAAIJ,IAAIQ,SAAS,CAAT,GAAaA,KAAb,GAAqB3B,KAAKQ,GAAL,CAAU,CAAV,EAAaiB,IAAIE,KAAjB,CAA7B;;AAEA;AACA;AACA,WAAIL,kBAAkBA,aAAtB,EAAsC;AACnC,iBAAOH,IAAIM,CAAX,EAAe;AACZ,iBAAID,KAAML,CAAN,MAAcK,KAAML,CAAN,CAAlB,EAA8B;AAAE,uBAAO,IAAP;AAAc;AAC9CA;AACF;AACD,iBAAO,KAAP;AACF;;AAED,cAAOA,IAAIM,CAAX,EAAe;AACZ,cAAIH,kBAAkBE,KAAML,CAAN,CAAtB,EAAkC;AAAE,oBAAO,IAAP;AAAc;AAClDA;AACF;AACD,cAAO,KAAP;AACF,KA3BD;AA4BF,E;;;;;;;;ACjCD;AACA;AACA;AACA,KAAI,CAAC/B,OAAOwC,MAAZ,EAAqB;AAClBxC,WAAOwC,MAAP,GAAgB,UAAUC,MAAV,EAAmB;AAChC;AACA;;AACA,WAAIA,WAAWb,SAAX,IAAwBa,WAAW,IAAvC,EAA8C;AAC3C,gBAAM,IAAIjB,SAAJ,CAAe,4CAAf,CAAN;AACF;;AAED,WAAMkB,SAAS1C,OAAQyC,MAAR,CAAf;AACA,YAAK,IAAIE,QAAQ,CAAjB,EAAoBA,QAAQjB,UAAUC,MAAtC,EAA8CgB,OAA9C,EAAwD;AACrD,cAAMC,SAASlB,UAAWiB,KAAX,CAAf;AACA,cAAIC,WAAWhB,SAAX,IAAwBgB,WAAW,IAAvC,EAA8C;AAC3C,kBAAK,IAAMC,OAAX,IAAsBD,MAAtB,EAA+B;AAC5B;AACA,oBAAIA,OAAOE,cAAP,CAAuBD,OAAvB,CAAJ,EAAuC;AACpCH,0BAAQG,OAAR,IAAoBD,OAAQC,OAAR,CAApB;AACF;AACH;AACH;AACH;AACD,cAAOH,MAAP;AACF,KApBD;AAqBF,E;;;;;;;;;;;;SC0BeK,S,GAAAA,S;;AAtChB;;;;AACA;;KAAYC,M;;AACZ;;KAAYC,M;;AAEZ;;AACA;;KAAYC,Y;;;;;;qMAlBZ;;;;;;AAMA;;;;;;;AAeA;AACA;AACA,KAAIC,eAAJ;AACA,KAAI;AACD;AACAA,aAASC,SAAU,aAAV,OAA+B,CAAE,GAAGC,IAAL,EAAa,MAAb,CAAxC;AACF,EAHD,CAIA,OAAOC,CAAP,EAAW;AACR;AACAH,aAASI,MAAT;AACF;;AAGD;;;;;;;;;;;;;;;;;AAiBO,UAASR,SAAT,CACJS,aADI,EAEL;AAAA,mFAD8E,EAC9E;AAAA,mCADkBC,cAClB;AAAA,QADkBA,cAClB,uCADmC,EACnC;AAAA,kCADuCC,aACvC;AAAA,QADuCA,aACvC,sCADuD,EACvD;AAAA,8BAD2DC,SAC3D;AAAA,QAD2DA,SAC3D,kCADuE,EACvE;;AACC,0BAAQH,aAAR,EAAwBI,SAAxB;AACA,0BAAQH,cAAR,EAAyBI,OAAzB,CAAkChE,KAAlC,EAA0C+D,SAA1C;AACA,0BAAQD,SAAR,EAAoBE,OAApB,CAA6B7D,MAA7B,EAAsC4D,SAAtC;AACA,0BAAQF,aAAR,EAAwBG,OAAxB,CAAiC7D,MAAjC,EAA0C4D,SAA1C;;AAEA,QAAME,WAAW,sBAAgBJ,aAAhB,EAA+BC,SAA/B,CAAjB;;AAND,QAQSI,cART,GAQqED,QARrE,CAQSC,cART;AAAA,QAQyBC,GARzB,GAQqEF,QARrE,CAQyBE,GARzB;AAAA,QAQ8BC,OAR9B,GAQqEH,QARrE,CAQ8BG,OAR9B;AAAA,QAQuCC,WARvC,GAQqEJ,QARrE,CAQuCI,WARvC;AAAA,QAQoDC,YARpD,GAQqEL,QARrE,CAQoDK,YARpD;;AASCD,gBAAYE,IAAZ;;AAEA,QAAMC,kBAAkB;AACrBC,yBAAkBR,SAASQ,gBADN;AAErBZ,sBAAeI,SAASJ,aAFH;AAGrBa,oBAAaT,SAASS,WAHD;AAIrBR,qCAJqB;AAKrBS,kBAAWV,SAASU,SALC;AAMrBR,eANqB;AAOrBS,oBAAaX,SAASW,WAPD;AAQrBR,uBARqB;AASrBS,gBAASZ,SAASa,gBATG;AAUrBR,qBAAcL,SAASK;AAVF,KAAxB;;AAaA,QAAMS,kBAAmB1B,YAAnB,4BAAoCO,cAApC,EAAN;AACA,QAAMoB,WAAWC,wBAAyBtB,aAAzB,EAAwCa,eAAxC,EAAyDO,cAAzD,EAAyEjB,SAAzE,CAAjB;AACAQ,iBAAaY,sBAAb,CAAqCF,QAArC;;AAEAG,qBAAkBlB,QAAlB;;AAEA,QAAMmB,WAAWnB,SAASJ,aAAT,CAAuBwB,GAAvB,CAA4B,WAA5B,CAAjB;AACA,QAAI,CAACD,QAAL,EAAgB;AACbjB,WAAImB,KAAJ,CAAW,wDAAX;AACA;AACF;;AAEDC,sBAAmB,YAAM;AACtBpB,WAAImB,KAAJ,4BAAoCF,QAApC;AACAnB,gBAASW,WAAT,CAAqBY,mBAArB,CAA0C7B,aAA1C;AACAM,gBAASwB,cAAT,CACIC,QADJ,GAEIC,IAFJ,CAEU,YAAM;AACVxB,cAAImB,KAAJ,CAAW,aAAX;AACF,QAJJ,EAIM,eAAO;AACPnB,cAAIyB,KAAJ,CAAW,8BAAX;AACAzB,cAAIyB,KAAJ,CAAW,wBAAX,EAAqCC,GAArC,EAA0CA,OAAOA,IAAIC,KAArD;AACF,QAPJ;AAQF,KAXD;AAYF;;AAED;;AAEA,UAASP,iBAAT,CAA4BQ,QAA5B,EAAuC;AACpC,QAAIC,SAASC,UAAT,KAAwB,UAA5B,EAAyC;AACtCF;AACF,KAFD,MAGK;AACFC,gBAASE,gBAAT,CAA2B,kBAA3B,EAA+CH,QAA/C;AACF;AACH;;AAED;;AAEA,UAASd,uBAAT,CAAkCtB,aAAlC,EAAiDM,QAAjD,EAA2Dc,cAA3D,EAA2EjB,SAA3E,EAAuF;AAAA,QAC5EK,GAD4E,GACpEF,QADoE,CAC5EE,GAD4E;;AAEpF,QAAMgC,6BAA6B,EAAnC;AACA,QAAMC,wBAAwB,EAA9B;;AAEArB,mBAAesB,OAAf,CAAwB,kBAAU;AAC/BF,kCAA4BG,OAAOC,UAAnC,IAAkDD,MAAlD;AACAF,6BAAuBE,OAAOC,UAA9B,IAA6C,EAAEC,SAAS,EAAX,EAAeC,UAAU,EAAzB,EAA7C;AACF,KAHD;;AAKA,KAAE,SAAF,EAAa,UAAb,EAA0BJ,OAA1B,CAAmC,gBAAQ;AACxCvC,iBAAW4C,IAAX,EAAkBL,OAAlB,CAA2B,oBAAY;AAAA,cAC5BE,UAD4B,GACbI,SAASC,UAAT,CAAoBC,WADP,CAC5BN,UAD4B;;AAEpC,cAAI,CAACJ,2BAA4BI,UAA5B,CAAL,EAAgD;AAAA,iBACrCO,IADqC,GAC5BH,SAASC,UADmB,CACrCE,IADqC;;AAE7C3C,iBAAIyB,KAAJ,CAAW,uDAAX,EAAoEW,UAApE,EAAgFG,IAAhF,EAAsFI,IAAtF;AACA;AACF;AACDV,gCAAuBG,UAAvB,EAAqCG,IAArC,EAA4CK,IAA5C,CAAkDJ,QAAlD;AACF,QARD;AASF,KAVD;;AAYA,QAAMK,uBAAuB,EAA7B;AACA7G,WAAO8G,IAAP,CAAad,0BAAb,EAA0CE,OAA1C,CAAmD,sBAAc;AAC9D,WAAMa,gBAAgBf,2BAA4BI,UAA5B,CAAtB;AACA,WAAMzC,YAAYsC,sBAAuBG,UAAvB,CAAlB;AACAS,4BAAsBT,UAAtB,IAAqCW,cAAchE,SAAd,CAAyBY,SAAzB,EAAoCG,QAApC,EAA8CN,aAA9C,CAArC;AACF,KAJD;AAKA,WAAOqD,oBAAP;AACF;;AAED;;AAEA,UAAS7B,gBAAT,CAA2BlB,QAA3B,EAAsC;AAAA,QAC3BJ,aAD2B,GACKI,QADL,CAC3BJ,aAD2B;AAAA,QACZM,GADY,GACKF,QADL,CACZE,GADY;AAAA,QACPC,OADO,GACKH,QADL,CACPG,OADO;;;AAGnC,QAAIP,cAAcwB,GAAd,CAAmB,iBAAnB,CAAJ,EAA6C;AAC1C8B,mBAAatD,cAAcwB,GAAd,CAAmB,MAAnB,EAA2B,SAA3B,CAAb,IAAwDpB,QAAxD;AACF;;AAED,QAAMmD,cAAcvD,cAAcwB,GAAd,CAAmB,oBAAnB,EAAyCgC,QAAzC,CAApB;AACA,QAAID,gBAAgB,KAApB,EAA4B;AAAE;AAAS;;AAEvC,QAAME,uBAAuB,gBAA7B;AACA,QAAMC,QAAQnD,QAAQoD,4BAAR,EAAd;AACA,QAAIC,aAAaF,MAAMG,OAAN,CAAeJ,oBAAf,CAAjB;AACA,QAAI,CAACG,UAAL,EAAkB;AACfA,oBAAaL,aAAb;AACAG,aAAMI,OAAN,CAAeL,oBAAf,EAAqCG,UAArC;AACF;AACDtD,QAAIyD,MAAJ,CAAY,MAAZ,EAAoBH,UAApB;;AAEA,aAASJ,QAAT,GAAoB;AACjB,mBAAUQ,KAAKC,GAAL,EAAV,GAAuB/G,KAAKC,KAAL,CAAYD,KAAKgH,MAAL,KAAgB,GAA5B,CAAvB;AACF;AACH;;AAED;;AAEA;;;;;;;;;;;;;;;;AAgBA,UAASZ,SAAT,CAAoBa,YAApB,EAAmC;AAChC,QAAMb,YAAY7D,OAAO2E,cAAP,GAA0B3E,OAAO2E,cAAP,IAAyB,EAArE;AACA,WAAOD,eAAeb,UAAWa,YAAX,CAAf,GAA2Cb,SAAlD;AACF;;AAED;;SAGGe,M;SACA/E,M,GAAAA,M;SACAC,M,GAAAA,M;SACA+D,S,GAAAA,S;SACA9D,Y,GAAAA,Y;;;;;;;;;;;;;;AC3MH;;;;;AAKA;;;;;;;;;;AAUA;;;;;;;;;;;AAWA,UAAS8E,SAAT,CAAoBC,OAApB,EAA6BC,eAA7B,EAA+C;AAC5C,SAAKC,QAAL,GAAgBF,OAAhB;AACA,SAAKG,QAAL,GAAgBF,mBAAmB,IAAnC;AACF;;AAED;;AAEA;;;;;;;;;AASAF,WAAU/H,SAAV,CAAoB2D,SAApB,GAAgC,SAASA,SAAT,CAAoBsE,eAApB,EAAsC;AACnE,QAAI,KAAKC,QAAL,IAAiB,IAArB,EAA4B;AACzBE,YAAM,4CAAN,EAAoDH,mBAAmB,KAAKE,QAA5E;AACF;;AAED,WAAO,IAAP;AACF,EAND;;AAQA;;AAEA;;;;;;;;;;;AAWAJ,WAAU/H,SAAV,CAAoB4D,OAApB,GAA8B,SAASA,OAAT,CAAkB0C,IAAlB,EAAwB2B,eAAxB,EAA0C;AACrE,QAAI,OAAO,KAAKC,QAAZ,KAAyB,WAAzB,IAAwC,KAAKA,QAAL,KAAkB,IAA9D,EAAqE;AAClE,cAAO,IAAP;AACF;;AAED,QAAI,OAAO5B,IAAP,KAAgB,UAApB,EAAiC;AAC9B8B,kEAAyD9B,IAAzD,yCAAyDA,IAAzD;AACF;;AAED,QAAI,CAAC+B,UAAW,KAAKH,QAAhB,EAA0B5B,IAA1B,CAAL,EAAwC;AACrC,WAAMgC,eAAeC,aAAc,KAAKL,QAAL,CAAcM,WAA5B,CAArB;AACA,WAAMC,iBAAiBF,aAAcjC,IAAd,CAAvB;;AAEA8B,sDAA8CK,cAA9C,mBAA0EH,YAA1E,SACML,mBAAmB,KAAKE,QAD9B;AAEF;;AAED,WAAO,IAAP;AACF,EAlBD;;AAoBA;;AAEA;;;;;;;;;;;AAWAJ,WAAU/H,SAAV,CAAoB0I,WAApB,GAAkC,SAASA,WAAT,CAAsBC,QAAtB,EAAgCV,eAAhC,EAAkD;AACjF,QAAI,QAAO,KAAKC,QAAZ,MAAyB,QAA7B,EAAwC;AACrCE,sDAA6C,KAAKF,QAAlD;AACF;;AAED,QAAI,EAAGS,YAAY,KAAKT,QAApB,CAAJ,EAAqC;AAClCE,sDAA8CO,QAA9C,SAA4DV,mBAAmB,KAAKE,QAApF;AACF;;AAED,WAAO,IAAP;AACF,EAVD;;AAYA;;AAEA,UAASC,IAAT,CAAeQ,OAAf,EAAwBX,eAAxB,EAA0C;AACvC,QAAIY,UAAU,EAAd;AACA,QAAIZ,eAAJ,EAAsB;AACnB,WAAMa,eAAe,QAAOb,eAAP,yCAAOA,eAAP,OAA2B,QAA3B,GAClBc,KAAKC,SAAL,CAAgBf,eAAhB,CADkB,GACkBA,eADvC;AAEAY,gCAAuBC,YAAvB;AACF;AACD,UAAM,IAAIG,KAAJ,uBAA+BL,OAA/B,GAAyCC,OAAzC,CAAN;AACF;;AAED;;AAEA,KAAMK,sBAAsB;AACzB,cAAUC,MADe;AAEzB,cAAU3I,MAFe;AAGzB,eAAW4I,OAHc;AAIzB,gBAAYjG;AAJa,EAA5B;AAMA,UAASkF,SAAT,CAAoBL,OAApB,EAA6B1B,IAA7B,EAAoC;AACjC,QAAI,QAAO0B,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAkC;AAC/B,cAAOA,mBAAmB1B,IAA1B;AACF;;AAED,QAAM+C,aAAaH,2BAA4BlB,OAA5B,yCAA4BA,OAA5B,EAAnB;AACA,WAAOqB,eAAe/C,IAAtB;AACF;;AAED;;AAEA,KAAMgD,wBAAwB,uBAA9B;AACA,UAASf,YAAT,CAAuBgB,IAAvB,EAA8B;AAC3B,QAAMC,QAAQF,sBAAsBG,IAAtB,CAA4BF,KAAKtJ,QAAL,GAAgByJ,IAAhB,EAA5B,CAAd;AACA,WAAOF,MAAO,CAAP,EAAW9H,MAAX,GAAoB8H,MAAO,CAAP,CAApB,GAAiC,KAAxC;AACF;;AAED;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,UAAS1B,MAAT,CAAiBE,OAAjB,EAA0BC,eAA1B,EAA4C;AACzC,WAAO,IAAIF,SAAJ,CAAeC,OAAf,EAAwBC,eAAxB,CAAP;AACF;;AAED;;AAEA;;;;;;AAMAH,QAAO6B,iBAAP,GAA2B,SAASA,iBAAT,CAA4B1B,eAA5B,EAA8C;AACtEG,SAAM,6BAAN,EAAqCH,eAArC;AACF,EAFD;;AAIA;;AAEA;;;;;;;;AAQAH,QAAO8B,KAAP,GAAe,SAASA,KAAT,CAAgBC,UAAhB,EAA4B5B,eAA5B,EAA8C;AAC1D,QAAI,CAAC4B,UAAL,EAAkB;AACfzB,YAAM,sBAAN,EAA8BH,eAA9B;AACF;AACH,EAJD;;AAMA;;mBAEeH,M;AACR,KAAM6B,gDAAoB7B,OAAO6B,iBAAjC;AACA,KAAMC,wBAAQ9B,OAAO8B,KAArB,C;;;;;;;;;;;;;;SCpKSE,O,GAAAA,O;SA4BA7D,O,GAAAA,O;SAkDA8D,I,GAAAA,I;SAoDAC,O,GAAAA,O;SA0CAC,S,GAAAA,S;SAsCAC,Q,GAAAA,Q;AA5PhB;;;;;;AAMA;;;;;;;;AAQA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,UAASJ,OAAT,CAAkBK,GAAlB,EAAuBC,QAAvB,EAAkC;AACtC,6BAAYA,QAAZ,EAAyBD,GAAzB;AACF;;AAED;;AAEA;;;;;;;;;;;;;;;;;;;;;;AAsBO,UAASlE,OAAT,CAAkBlD,MAAlB,EAA0BsH,gBAA1B,EAA6C;AACjD,QAAIzK,MAAM0K,OAAN,CAAevH,MAAf,CAAJ,EAA8B;AAC3BA,cAAOkD,OAAP,CAAgBoE,gBAAhB;AACA;AACF;;AAED,SAAK,IAAME,GAAX,IAAkBxH,MAAlB,EAA2B;AACxB,WAAIF,eAAgBE,MAAhB,EAAwBwH,GAAxB,CAAJ,EAAoC;AACjCF,2BAAkBtH,OAAQwH,GAAR,CAAlB,EAAiCA,GAAjC,EAAsCxH,MAAtC;AACF;AACH;AACH;;AAED;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCO,UAASgH,IAAT,CAAeI,GAAf,EAAoBK,OAApB,EAA2D;AAAA,QAA9BC,eAA8B,uEAAZ9I,SAAY;;AAC/D,QAAM+I,UAAUF,QAAQG,KAAR,CAAe,GAAf,CAAhB;AACA,QAAIC,OAAOT,GAAX;AACA,QAAII,MAAMG,QAAQG,KAAR,EAAV;;AAEA,WAAON,GAAP,EAAa;AACV,WAAIK,QAAQ,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAxB,IAAoC/H,eAAgB+H,IAAhB,EAAsBL,GAAtB,CAAxC,EAAsE;AACnEK,iBAAOA,KAAML,GAAN,CAAP;AACAA,gBAAMG,QAAQG,KAAR,EAAN;AACF,QAHD,MAIK;AACF,iBAAOJ,eAAP;AACF;AACH;;AAED,WAAOG,IAAP;AACF;;AAED;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCO,UAASZ,OAAT,CAAkBG,GAAlB,EAAuBJ,IAAvB,EAA6BzJ,KAA7B,EAAqC;AACzC,QAAIsK,OAAOT,GAAX;AACA,QAAMO,UAAUX,KAAKY,KAAL,CAAY,GAAZ,CAAhB;AACA,QAAMG,OAAOJ,QAAQK,GAAR,EAAb;;AAEAL,YAAQzE,OAAR,CAAiB,UAAE+E,YAAF,EAAgBtI,KAAhB,EAA2B;AACzC,WAAI,CAACkI,KAAMI,YAAN,CAAD,IAAyB,QAAOJ,KAAMI,YAAN,CAAP,MAAgC,QAA7D,EAAwE;AACrE,cAAMC,oBAAoBP,QAAShI,QAAQ,CAAjB,KAAwBoI,IAAlD;AACA,cAAIG,kBAAkBzB,KAAlB,CAAyB,UAAzB,CAAJ,EAA4C;AACzCoB,kBAAMI,YAAN,IAAuB,EAAvB;AACAE,+BAAmBN,KAAMI,YAAN,CAAnB,EAAyC3I,SAAU4I,iBAAV,EAA6B,EAA7B,CAAzC;AACF,WAHD,MAIK;AACFL,kBAAMI,YAAN,IAAuB,EAAvB;AACF;AACH;;AAEDJ,cAAOA,KAAMI,YAAN,CAAP;AACF,KAbD;;AAeA,QAAIpL,MAAM0K,OAAN,CAAeM,IAAf,KAAyBE,OAAOF,KAAKlJ,MAAzC,EAAkD;AAC/CwJ,yBAAmBN,IAAnB,EAAyBE,IAAzB;AACF;;AAEDF,SAAME,IAAN,IAAexK,KAAf;;AAEA,WAAO6J,GAAP;AACF;;AAED;;AAEA;;;;;;;;;;;AAWO,UAASF,SAAT,CAAoBlH,MAApB,EAA6B;AACjC,QAAI,CAACA,MAAD,IAAW,QAAOA,MAAP,yCAAOA,MAAP,OAAkB,QAAjC,EAA4C;AACzC,cAAOA,MAAP;AACF;;AAED;AACA,QAAIoI,eAAJ;AACA,QAAIvL,MAAM0K,OAAN,CAAevH,MAAf,CAAJ,EAA8B;AAC3BoI,gBAAS,EAAT;AACA,YAAK,IAAIC,IAAI,CAAR,EAAW1J,SAASqB,OAAOrB,MAAhC,EAAwC0J,IAAI1J,MAA5C,EAAoD,EAAE0J,CAAtD,EAA0D;AACvDD,iBAAQC,CAAR,IAAcnB,UAAWlH,OAAQqI,CAAR,CAAX,CAAd;AACF;AACH,KALD,MAMK;AACFD,gBAAS,EAAT;AACA,YAAK,IAAMZ,GAAX,IAAkBxH,MAAlB,EAA2B;AACxB,cAAIF,eAAgBE,MAAhB,EAAwBwH,GAAxB,CAAJ,EAAoC;AACjCY,oBAAQZ,GAAR,IAAgBN,UAAWlH,OAAQwH,GAAR,CAAX,CAAhB;AACF;AACH;AACH;;AAED,WAAOY,MAAP;AACF;;AAED;;AAEA;;;;;;;;;;;AAWO,UAASjB,QAAT,CAAmB/J,EAAnB,EAAuB0G,IAAvB,EAA8B;AAClC,WAAOA,KAAKwE,MAAL,CACJ,UAAEC,KAAF,EAASxJ,CAAT,EAAgB;AAAEwJ,aAAOxJ,CAAP,IAAa3B,GAAI2B,CAAJ,CAAb,CAAsB,OAAOwJ,KAAP;AAAe,KADnD,EAEJ,EAFI,CAAP;AAIF;;AAED;;AAEA;AACA;;;;;AAKA,UAASJ,iBAAT,CAA4BK,GAA5B,EAAiCC,OAAjC,EAA2C;AACxC,SAAK,IAAIJ,IAAIG,IAAI7J,MAAjB,EAAyB0J,IAAII,OAA7B,EAAsC,EAAEJ,CAAxC,EAA4C;AACzCG,WAAKH,CAAL,IAAW,IAAX;AACF;AACH;;AAED;;AAEA,KAAMK,aAAa1L,OAAOC,SAAP,CAAiB6C,cAApC;AACA;AACA;;;AAGA,UAASA,cAAT,CAAyBE,MAAzB,EAAiC4F,QAAjC,EAA4C;AACzC,WAAO8C,WAAWrL,IAAX,CAAiB2C,MAAjB,EAAyB4F,QAAzB,CAAP;AACF,E;;;;;;;;;;;SClJe+C,M,GAAAA,M;SA6DAC,e,GAAAA,e;AArMhB;;;;;AAKA;;;;;;;;AAQA;AACA,KAAMC,YAAY,IAAlB;AACA,KAAMC,kBAAkB,GAAxB;AACA,KAAMC,kBAAkB,GAAxB;AACA,KAAMC,kBAAkB,UAAxB;;AAEA;;;;;;;;;;;;;AAaO,KAAMC,kDAAqBjM,OAAOkM,MAAP,CAAe;AAC9C,OAD8C,aACzCC,KADyC,EACjC;AACV,mBAAUA,KAAV;AACF,KAH6C;AAK9C,OAL8C,aAKzCA,KALyC,EAKjC;AACV,cAAOA,MAAMC,OAAN,CAAe,CAAf,CAAP;AACF,KAP6C;AAS9C,OAT8C,aASzCD,KATyC,EASlCE,kBATkC,EASb;AAC9B,cAAOJ,mBAAmBK,CAAnB,CAAsBH,KAAtB,EAA6BE,kBAA7B,CAAP;AACF,KAX6C;AAa9C,OAb8C,aAazCF,KAbyC,EAalCE,kBAbkC,EAab;AAC9B,WAAME,YAAYF,mBAAmB5C,KAAnB,CAA0B,UAA1B,CAAlB;AACA,WAAI8C,SAAJ,EAAgB;AACb,iBAAOJ,MAAMC,OAAN,CAAeG,UAAW,CAAX,CAAf,CAAP;AACF;;AAED,mBAAUJ,KAAV;AACF,KApB6C;AAsB9C,OAtB8C,aAsBzCA,KAtByC,EAsBjC;AACV,cAAOnD,KAAKC,SAAL,CAAgBkD,KAAhB,CAAP;AACF,KAxB6C;AA0B9C,aA1B8C,oBA0BnCA,KA1BmC,EA0B5BE,kBA1B4B,EA0BP;AACpC,cAAOJ,mBAAmBO,CAAnB,CAAsBL,KAAtB,EAA6BE,kBAA7B,CAAP;AACF;AA5B6C,EAAf,CAA3B;;AA+BP,KAAMI,oBAAoBb,gBAAiBK,kBAAjB,CAA1B;;AAEA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEO,UAASN,MAAT,CAAiB1I,MAAjB,EAAyByJ,2BAAzB,EAAsDC,yBAAtD,EAAkF;AACtF,WAAOF,kBAAmBxJ,MAAnB,EAA2ByJ,2BAA3B,EAAwDC,yBAAxD,CAAP;AACF;;AAED;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDO,UAASf,eAAT,GAA2F;AAAA,QAAjEgB,cAAiE,uEAAhDX,kBAAgD;AAAA,QAA5BY,oBAA4B,uEAAL,EAAK;;;AAE/F,aAASlB,MAAT,CAAiB1I,MAAjB,EAAyByJ,2BAAzB,EAAsDC,yBAAtD,EAAkF;AAC/E,WAAI,OAAO1J,MAAP,KAAkB,QAAtB,EAAiC;AAC9B,iBAAO6J,qBAAsBF,cAAtB,EAAwC3J,MAAxC,CAAP;AACF;;AAED,WAAM8J,UAAUlN,MAAM0K,OAAN,CAAemC,2BAAf,IAA+CA,2BAA/C,GAA6E,EAA7F;AACA,WAAIM,QAAQ,EAAZ;AACA,WAAIL,yBAAJ,EAAgC;AAC7BK,kBAAQL,6BAA6B,EAArC;AACF,QAFD,MAGK,IAAI,CAAC9M,MAAM0K,OAAN,CAAemC,2BAAf,CAAL,EAAoD;AACtDM,kBAAQN,+BAA+B,EAAvC;AACF;;AAED,WAAMO,QAAQhK,OAAO2H,KAAP,CAAc,EAAd,CAAd;AACA,WAAIlI,SAAS,EAAb;AACA,YAAK,IAAI2I,IAAI,CAAR,EAAWnK,MAAM+L,MAAMtL,MAA5B,EAAoC0J,IAAInK,GAAxC,EAA6C,EAAEmK,CAA/C,EAAmD;AAChD,cAAI4B,MAAO5B,CAAP,MAAeQ,SAAnB,EAA+B;AAC5B,iBAAIR,IAAI,CAAJ,KAAUnK,GAAd,EAAoB;AACjB,sBAAM,IAAIgI,KAAJ,8CAAsDmC,CAAtD,qBAAuEpI,MAAvE,QAAN;AACF;;AAEDP,uBAAUuK,MAAO,EAAE5B,CAAT,CAAV;AACF,WAND,MAOK,IAAI4B,MAAO5B,CAAP,MAAeS,eAAnB,EAAqC;AACvC,iBAAMoB,eAAejK,OAAOkK,OAAP,CAAgBpB,eAAhB,EAAiCV,IAAI,CAArC,CAArB;AACA,iBAAI6B,iBAAiB,CAAC,CAAtB,EAA0B;AACvB,sBAAM,IAAIhE,KAAJ,wCAAgDmC,CAAhD,qBAAiEpI,MAAjE,QAAN;AACF;;AAED,iBAAMuH,MAAMvH,OAAOmK,SAAP,CAAkB/B,IAAI,CAAtB,EAAyB6B,YAAzB,CAAZ;;AAEAxK,uBAAU2K,mBAAoB7C,GAApB,EAAyBwC,KAAzB,EAAgCD,OAAhC,EAAyC,EAAE9J,cAAF,EAAUN,OAAO0I,CAAjB,EAAzC,CAAV;;AAEAA,iBAAI6B,YAAJ;AACF,WAXI,MAYA;AACFxK,uBAAUuK,MAAO5B,CAAP,CAAV;AACF;AACH;AACD,cAAO3I,MAAP;AACF;;AAED;;AAEA,aAAS2K,kBAAT,CAA6BC,WAA7B,EAA0CN,KAA1C,EAAiDD,OAAjD,EAA0DQ,OAA1D,EAAoE;AACjE,WAAIC,YAAY,EAAhB;AACA,WAAInB,qBAAqB,EAAzB;AACA,WAAMoB,mBAAmBH,YAAY1C,KAAZ,CAAmB,GAAnB,CAAzB;AACA,WAAMJ,MAAMiD,iBAAkB,CAAlB,CAAZ;;AAEA,WAAIlN,cAAJ;AACA,WAAIyL,gBAAgB0B,IAAhB,CAAsBlD,GAAtB,KAA+BA,MAAMuC,QAAQpL,MAAjD,EAA0D;AACvDpB,kBAAQwM,QAASvC,GAAT,CAAR;AACF,QAFD,MAGK,IAAIA,OAAOwC,KAAX,EAAmB;AACrBzM,kBAAQyM,MAAOxC,GAAP,CAAR;AACF,QAFI,MAGA;AACF,iBAAOsB,kBAAkBwB,WAAlB,GAAgCvB,eAAvC;AACF;;AAED,WAAI0B,iBAAiB9L,MAAjB,GAA0B,CAA9B,EAAkC;;AAE/B,cAAI8L,iBAAkB,CAAlB,EAAsBE,MAAtB,CAA8B,CAA9B,MAAsC,GAA1C,EAAgD;AAC7CpN,qBAAQuM,qBAAsBF,cAAtB,EAAwCrM,KAAxC,CAAR;AACF;;AAED,iBAAOkN,iBAAiBG,KAAjB,CAAwB,CAAxB,EAA4BtC,MAA5B,CAAoC,UAAE/K,KAAF,EAASsN,IAAT,EAAmB;AAC3D,iBAAIA,KAAKV,OAAL,CAAc,GAAd,MAAwB,CAA5B,EAAgC;AAC7B,oBAAMW,iBAAiBD,KAAKpE,KAAL,CAAY,aAAZ,CAAvB;AACA+D,4BAAYM,iBAAiBA,eAAgB,CAAhB,CAAjB,GAAuC,EAAnD;AACAzB,qCAAqByB,iBAAiBA,eAAgB,CAAhB,CAAjB,GAAuC,EAA5D;AACA,oBAAIN,aAAaZ,cAAjB,EAAkC;AAC/B,0BAAOA,eAAgBY,SAAhB,EAA6BjN,KAA7B,EAAoC8L,kBAApC,CAAP;AACF;AACD,oBAAM0B,kBAAkB/N,OAAO8G,IAAP,CAAa8F,cAAb,EACpBoB,MADoB,CACZ;AAAA,0BAAK1K,MAAM,SAAX;AAAA,iBADY,EAEpB2K,GAFoB,CAEf;AAAA,gCAAS3K,CAAT;AAAA,iBAFe,EAGpB4K,IAHoB,CAGd,IAHc,CAAxB;;AAKA,sBAAM,IAAIhF,KAAJ,CACH,gCAA8BsE,SAA9B,yCACaD,QAAQ5K,KADrB,qBAC0C4K,QAAQtK,MADlD,wCAE2B8K,eAF3B,QADG,CAAN;AAKF;AACD,iBAAIF,QAAQhB,oBAAZ,EAAmC;AAChC,uBAAOA,qBAAsBgB,IAAtB,EAA8BtN,KAA9B,CAAP;AACF;;AAED,oBAAOA,KAAP;AACF,WAxBM,EAwBJA,KAxBI,CAAP;AAyBF;;AAED,cAAOuM,qBAAsBF,cAAtB,EAAwCrM,KAAxC,CAAP;AACF;;AAED;;AAEA,WAAOoL,MAAP;AAEF;;AAED;;AAEA,UAASmB,oBAAT,CAA+BF,cAA/B,EAAgD;AAC7C,QAAI,aAAaA,cAAjB,EAAkC;AAC/B,cAAOA,eAAgB,SAAhB,CAAP;AACF;;AAED,WAAOX,mBAAoB,SAApB,CAAP;AACF,E;;;;;;;;;;;SCtRekC,M,GAAAA,M;;AA5BhB;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AA5BA;;;;;AAiCO,UAASA,MAAT,CAAiBC,mBAAjB,EAAsCC,MAAtC,EAA+C;;AAEnD,QAAMC,wBAAwB;AAC3BC,iBAAU3M,SADiB;AAE3B4M,0BAAmB,MAAM,IAFE;AAG3BC,eAAQ;AACLC,iBAAO;AACJC,sBAAS;AADL;AAGP;AACA;AALK,QAHmB;AAU3BC,aAAM;AACHC,sBAAY;AACTpM,qBAAQ,SADC;AAETqM,yBAAY;AAFH;AADT,QAVqB;AAgB3BC,aAAM;AACHC,oBAAU,IADP;AAEHC,kBAAQ,KAFL;AAGHC,mBAAS;AACN,wBAAW;AADL;AAHN,QAhBqB;AAuB3BC,gBAAS;AACNC,kBAAQ,EADF;AAENC,qBAAW;AAFL,QAvBkB;AA2B3B1I,aAAM,SA3BqB;AA4B3B2I,cAAO,SA5BoB;AA6B3BC,sBAAe3N,SA7BY;AA8B3B8C,gBAAS;AACNiK,mBAAS;AADH;AA9BkB,KAA9B;AAkCA,QAAMjL,gBAAgB,2BAAqB0K,mBAArB,EAA0CE,qBAA1C,CAAtB;;AAEA,QAAMkB,UAAU,sBAAhB;AACA,QAAMxL,MAAM,iBAAWN,aAAX,EAA0B8L,OAA1B,CAAZ;AACA,QAAMC,aAAa,+BAAyB/L,aAAzB,EAAwCM,GAAxC,CAAnB;;AAEA,QAAMC,UAAU,qBAAeP,aAAf,EAA8B8L,OAA9B,CAAhB;AACA,QAAME,QAAQ,mBAAa1L,GAAb,EAAkBC,OAAlB,CAAd;;AAEA,QAAMK,mBAAmB,+BAAwB+J,MAAxB,EAAgCmB,OAAhC,EAAyC9L,aAAzC,EAAwDM,GAAxD,CAAzB;;AAEA,QAAMQ,YAAY,wBAAlB;;AAEA;AACA,QAAMmL,YAAY,SAAZA,SAAY,CAAEC,CAAF,EAAKC,CAAL;AAAA,cAAYC,WAAYF,CAAZ,EAAeC,CAAf,CAAZ;AAAA,KAAlB;AACA,QAAM9L,iBAAiB,uBAAgBL,aAAhB,EAA+BM,GAA/B,EAAoCQ,UAAUuL,MAA9C,EAAsDJ,SAAtD,CAAvB;;AAEA,QAAMK,YAAY,yBAAlB;AACA,QAAM9L,cAAc,0BAAmBI,gBAAnB,EAAqC0L,SAArC,CAApB;AACA,QAAMC,eAAe,2BAAoB3L,gBAApB,EAAsC0L,SAAtC,CAArB;AACA,QAAME,aAAa,yBAAkB5L,gBAAlB,EAAoCmL,WAAWU,KAA/C,CAAnB;AACA,QAAMC,gBAAgB,4BAAqB9L,gBAArB,EAAuC0L,SAAvC,CAAtB;AACA,QAAIK,iBAAiB;AAAEC,gBAAF,uBAAc;AAChC,2BAAO1G,iBAAP,CAA0B,iDAA1B;AACF;AAFoB,KAArB;AAGA,QAAMzF,eAAe,2BAClBH,GADkB,EAElBM,gBAFkB,EAGlB8L,aAHkB,EAIlBJ,SAJkB,EAKlBP,WAAWU,KALO,EAMlB;AAAA;;AAAA,cAAe,mCAAeG,SAAf,kCAAf;AAAA,KANkB,CAArB;;AASA,QAAMC,gBAAgB,kCAA0BxM,cAA1B,EAA0CL,aAA1C,CAAtB;AACA,QAAM8M,oBAAoB,sCAA8BzM,cAA9B,CAA1B;AACA,QAAMU,cAAc,0BACjBV,cADiB,EAEjBmM,UAFiB,EAGjBD,YAHiB,EAIjB9L,YAJiB,EAKjBoM,aALiB,EAMjBC,iBANiB,EAOjBf,WAAWU,KAPM,CAApB;;AAUA,QAAM1B,SAAS,2CAA4Be,OAA5B,EAAqC9L,aAArC,CAAf;;AAEA,QAAM4B,iBAAiB,6BACpBhB,gBADoB,EAEpBZ,aAFoB,EAGpBK,cAHoB,EAIpBC,GAJoB,EAKpBS,WALoB,EAMpBgK,MANoB,EAOpBiB,KAPoB,CAAvB;AASA,QAAMnL,cAAc,0BACjBe,cADiB,CAApB;;AAIA,QAAMX,mBAAmB,8BAAwB8K,UAAxB,CAAzB;;AAEAY,qBAAiB,6BACd/L,gBADc,EAEdZ,aAFc,EAGd0M,aAHc,EAIdrM,cAJc,EAKdQ,WALc,EAMdP,GANc,EAOdQ,SAPc,EAQdC,WARc,EASdR,OATc,EAUdU,gBAVc,CAAjB;;AAaA,WAAO;AACJjB,mCADI;AAEJsM,2BAFI;AAGJ1L,yCAHI;AAIJgB,qCAJI;AAKJf,+BALI;AAMJR,qCANI;AAOJS,2BAPI;AAQJyL,iCARI;AASJjM,eATI;AAUJS,+BAVI;AAWJR,uBAXI;AAYJC,+BAZI;AAaJwL,mBAbI;AAcJ/K,yCAdI;AAeJR;AAfI,KAAP;AAiBF,E;;;;;;AClKD;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA,cAAa,yBAAyB;AACtC,cAAa,UAAU;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC,OAAO;AAC9C,sBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;;AAGA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,QAAQ;AAC1C,UAAS;AACT,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;;AAGA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA,mCAAkC,YAAY;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7mBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA,wBAAuB,kBAAkB;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA,oCAAmC;AACnC;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,MAAM;AAClB,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;;AAEA,kBAAiB,iBAAiB;AAClC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,MAAM;AAClB,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAc,6DAA6D;AAC3E;AACA,aAAY,sBAAsB;AAClC,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACrYA;AACA;AACA;;;;;;;;;;;;SCcgBgK,M,GAAAA,M;;AAHhB;;;;AACA;;;;AAdA;;;;;AAKA;;;;;;;;AAWO,UAASA,MAAT,C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ACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,yEAAwE,KAAK,qDAAqD,KAAK;AACvI,MAAK;AACL;AACA,2CAA0C,MAAM,QAAQ,IAAI;AAC5D,MAAK;AACL,4BAA2B;AAC3B,qDAAoD,IAAI,yCAAyC,IAAI,iDAAiD,KAAK,kDAAkD,KAAK,iCAAiC,IAAI,sBAAsB,EAAE,WAAW,IAAI;AAC9R,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,oDAAmD,IAAI,UAAU,EAAE,UAAU,IAAI,GAAG,EAAE,YAAY,IAAI,4BAA4B,EAAE,wCAAwC,EAAE;AAC9K,0CAAyC,IAAI,KAAK,IAAI,aAAa,IAAI,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,oBAAmB;AACnB,sCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,oCAAmC,SAAS;AAC5C;AACA;AACA,QAAO;AACP,oCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB,QAAO;AACP;AACA,8CAA6C,sBAAsB;AACnE;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA,6CAA4C,SAAS;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA,MAAK;AACL;AACA;AACA,0DAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,6DAA4D,SAAS;AACrE;AACA,yBAAwB;AACxB;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAiD,SAAS;AAC1D;AACA,4CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAA+G,4BAA4B;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAmH,4BAA4B;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAuC,SAAS;AAChD;AACA,QAAO;AACP;AACA;AACA;AACA,8CAA6C,SAAS;AACtD,sCAAqC;AACrC;AACA;AACA;AACA,YAAW;AACX,4CAA2C,SAAS;AACpD,kHAAiH,4BAA4B;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA,iDAAgD,SAAS;AACzD,oGAAmG,qBAAqB;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB,cAAa;AACb,+CAA8C,SAAS;AACvD,+GAA8G,qBAAqB;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,yCAAwC,SAAS;AACjD,iGAAgG,qBAAqB;AACrH;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,yCAAwC,SAAS;AACjD,2GAA0G,qBAAqB;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kEAAiE,SAAS,mBAAmB,kBAAkB;;AAE/G;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAgB;AAChB;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAwB,oBAAoB;AAC5C;AACA;AACA,EAAC;;;;;;;AChuBD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe;AACf;AACA;;AAEA,+DAA8D,iBAAiB;AAC/E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;;AAEA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,wCAAuC,6BAA6B;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH,mDAAuB,aAAa,EAAE;AACtC,IAAG;AACH;AACA;AACA,EAAC;;;;;;;;;;;;;+QClWD;;;;;;;SAmBgBgiB,iB,GAAAA,iB;;AAdhB;;AACA;;KAAYvgB,M;;;;AAEZ;AACA,KAAMmjB,mBAAmB,sCAAzB;AACA,KAAMC,mBAAmB,IAAIC,MAAJ,OAAgBF,gBAAhB,OAAzB;AACA,KAAMG,eAAe,IAAID,MAAJ,QAAiBF,gBAAjB,UAAsCA,gBAAtC,UAArB;AAC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","file":"vendor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d62698fa118370857962","/* global require */\nimport 'promise-polyfill/promise';\nimport 'whatwg-fetch/fetch.js';\nimport './lib/polyfills/array_from.js';\nimport './lib/polyfills/array_includes.js';\nimport './lib/polyfills/object_assign.js';\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/polyfills.js","(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n  \n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new (this.constructor)(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\n    function (fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n  \n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n\n})(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise-polyfill/promise.js\n// module id = 29\n// module chunks = 0 1","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n// module id = 30\n// module chunks = 0 1","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/timers-browserify/~/setimmediate/setImmediate.js\n// module id = 31\n// module chunks = 0 1","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/process/browser.js\n// module id = 32\n// module chunks = 0 1","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (typeof input === 'string') {\n      this.url = input\n    } else {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split('\\r\\n').forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 33\n// module chunks = 0 1","/* eslint-disable prefer-rest-params */\n// Polyfill based on:\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from\n// Production steps of ECMA-262, Edition 6, 22.1.2.1\nif( !Array.from ) {\n   const toStr = Object.prototype.toString;\n   const isCallable = function( fn ) {\n      return typeof fn === 'function' || toStr.call( fn ) === '[ object Function ]';\n   };\n   const toInteger = function( value ) {\n      const number = Number( value );\n      if( isNaN( number ) ) { return 0; }\n      if( number === 0 || !isFinite( number ) ) { return number; }\n      return ( number > 0 ? 1 : -1 ) * Math.floor( Math.abs( number ) );\n   };\n   const maxSafeInteger = Math.pow( 2, 53 ) - 1;\n   const toLength = function( value ) {\n      const len = toInteger( value );\n      return Math.min( Math.max( len, 0 ), maxSafeInteger );\n   };\n\n   // The length property of the from method is 1.\n   Array.from = function from( arrayLike/*, mapFn, thisArg */ ) {\n      // 1. Let C be the this value.\n      const C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n      const items = Object( arrayLike );\n\n      // 3. ReturnIfAbrupt(items).\n      if( arrayLike == null ) {\n         throw new TypeError( 'Array.from requires an array-like object - not null or undefined' );\n      }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n      // eslint-disable-next-line no-void\n      const mapFn = arguments.length > 1 ? arguments[ 1 ] : void undefined;\n      let T;\n      if( typeof mapFn !== 'undefined' ) {\n         // 5. else\n         // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n         if( !isCallable( mapFn ) ) {\n            throw new TypeError( 'Array.from: when provided, the second argument must be a function' );\n         }\n\n         // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n         if( arguments.length > 2 ) {\n            T = arguments[ 2 ];\n         }\n      }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n      const len = toLength( items.length );\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [ [Construct] ] internal method\n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n      const A = isCallable( C ) ? Object( new C( len ) ) : new Array( len );\n\n      // 16. Let k be 0.\n      let k = 0;\n      // 17. Repeat, while k < len… (also steps a - h)\n      let kValue;\n      while( k < len ) {\n         kValue = items[ k ];\n         if( mapFn ) {\n            A[ k ] = typeof T === 'undefined' ? mapFn( kValue, k ) : mapFn.call( T, kValue, k );\n         }\n         else {\n            A[ k ] = kValue;\n         }\n         k += 1;\n      }\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n      A.length = len;\n      // 20. Return A.\n      return A;\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/polyfills/array_from.js","// Polyfill based on:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes\n// Alternatives seem to cause problems with MSIE (e.g. by relying on a `global` object).\nif( !Array.prototype.includes ) {\n   // eslint-disable-next-line no-extend-native\n   Array.prototype.includes = function( searchElement, optionalFromIndex ) {\n      'use strict';\n      if( this == null ) {\n         throw new TypeError( 'Array.prototype.includes called on null or undefined' );\n      }\n      const list = Object( this );\n      const n = parseInt( list.length, 10 ) || 0;\n      if( n === 0 ) { return false; }\n\n      const start = parseInt( optionalFromIndex, 10 ) || 0;\n      let k = start >= 0 ? start : Math.max( 0, n + start );\n\n      // detect special case (only NaN !== NaN):\n      // eslint-disable-next-line no-self-compare\n      if( searchElement !== searchElement ) {\n         while( k < n ) {\n            if( list[ k ] !== list[ k ] ) { return true; }\n            k++;\n         }\n         return false;\n      }\n\n      while( k < n ) {\n         if( searchElement === list[ k ] ) { return true; }\n         k++;\n      }\n      return false;\n   };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/polyfills/array_includes.js","/* eslint-disable prefer-rest-params */\n// Polyfill based on:\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif( !Object.assign ) {\n   Object.assign = function( target ) {\n      'use strict';\n      // We must check against these specific cases.\n      if( target === undefined || target === null ) {\n         throw new TypeError( 'Cannot convert undefined or null to object' );\n      }\n\n      const output = Object( target );\n      for( let index = 1; index < arguments.length; index++ ) {\n         const source = arguments[ index ];\n         if( source !== undefined && source !== null ) {\n            for( const nextKey in source ) {\n               // eslint-disable-next-line max-depth\n               if( source.hasOwnProperty( nextKey ) ) {\n                  output[ nextKey ] = source[ nextKey ];\n               }\n            }\n         }\n      }\n      return output;\n   };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/polyfills/object_assign.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * The API entry point for boostrapping LaxarJS applications.\n * Also, provides a couple of utilities to deal with assertions, objects and strings.\n *\n * @module laxar\n */\n\nimport assert from './lib/utilities/assert';\nimport * as object from './lib/utilities/object';\nimport * as string from './lib/utilities/string';\n\nimport { create as createServices } from './lib/runtime/services';\nimport * as plainAdapter from './lib/runtime/plain_adapter';\n\n\n// Get a reference to the global object of the JS environment.\n// See http://stackoverflow.com/a/6930376 for details\nlet global;\ntry {\n   // eslint-disable-next-line no-new-func, no-eval\n   global = Function( 'return this' )() || ( 1, eval )( 'this' );\n}\ncatch( _ ) {\n   // if it forbids eval, it's probably a browser\n   global = window;\n}\n\n\n/**\n * Bootstraps AngularJS on the provided `anchorElement` and sets up the LaxarJS runtime.\n *\n * @param {HTMLElement} anchorElement\n *    the element to insert the page in\n * @param {Object} [optionalOptions]\n *    optional options for bootstrapping\n * @param {Array} optionalOptions.widgetAdapters\n *    widget adapters that are used in this application\n * @param {Object} optionalOptions.configuration\n *    configuration for the laxar application. See http://laxarjs.org/docs/laxar-latest/manuals/configuration/\n *    for further information on available properties\n * @param {Object} optionalOptions.artifacts\n *    an artifact listing for the application, generated by the utilized built tool (e.g. webpack)\n *\n * @memberof laxar\n */\nexport function bootstrap(\n   anchorElement, { widgetAdapters = [], configuration = {}, artifacts = {} } = {}\n) {\n   assert( anchorElement ).isNotNull();\n   assert( widgetAdapters ).hasType( Array ).isNotNull();\n   assert( artifacts ).hasType( Object ).isNotNull();\n   assert( configuration ).hasType( Object ).isNotNull();\n\n   const services = createServices( configuration, artifacts );\n\n   const { globalEventBus, log, storage, themeLoader, widgetLoader } = services;\n   themeLoader.load();\n\n   const adapterServices = {\n      artifactProvider: services.artifactProvider,\n      configuration: services.configuration,\n      flowService: services.flowService,\n      globalEventBus,\n      heartbeat: services.heartbeat,\n      log,\n      pageService: services.pageService,\n      storage,\n      tooling: services.toolingProviders,\n      widgetLoader: services.widgetLoader\n   };\n\n   const adapterModules = [ plainAdapter, ...widgetAdapters ];\n   const adapters = bootstrapWidgetAdapters( anchorElement, adapterServices, adapterModules, artifacts );\n   widgetLoader.registerWidgetAdapters( adapters );\n\n   announceInstance( services );\n\n   const flowName = services.configuration.get( 'flow.name' );\n   if( !flowName ) {\n      log.trace( 'LaxarJS Bootstrap complete: No `flow.name` configured.' );\n      return;\n   }\n\n   whenDocumentReady( () => {\n      log.trace( `LaxarJS loading Flow: ${flowName}` );\n      services.pageService.createControllerFor( anchorElement );\n      services.flowController\n         .loadFlow()\n         .then( () => {\n            log.trace( 'Flow loaded' );\n         }, err => {\n            log.fatal( 'LaxarJS failed to load flow.' );\n            log.fatal( 'Error [0].\\nStack: [1]', err, err && err.stack );\n         } );\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction whenDocumentReady( callback ) {\n   if( document.readyState === 'complete' ) {\n      callback();\n   }\n   else {\n      document.addEventListener( 'DOMContentLoaded', callback );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction bootstrapWidgetAdapters( anchorElement, services, adapterModules, artifacts ) {\n   const { log } = services;\n   const adapterModulesByTechnology = {};\n   const artifactsByTechnology = {};\n\n   adapterModules.forEach( module => {\n      adapterModulesByTechnology[ module.technology ] = module;\n      artifactsByTechnology[ module.technology ] = { widgets: [], controls: [] };\n   } );\n\n   [ 'widgets', 'controls' ].forEach( type => {\n      artifacts[ type ].forEach( artifact => {\n         const { technology } = artifact.descriptor.integration;\n         if( !adapterModulesByTechnology[ technology ] ) {\n            const { name } = artifact.descriptor;\n            log.fatal( 'Unknown widget technology: [0], required by [1] \"[2]\"', technology, type, name );\n            return;\n         }\n         artifactsByTechnology[ technology ][ type ].push( artifact );\n      } );\n   } );\n\n   const adaptersByTechnology = {};\n   Object.keys( adapterModulesByTechnology ).forEach( technology => {\n      const adapterModule = adapterModulesByTechnology[ technology ];\n      const artifacts = artifactsByTechnology[ technology ];\n      adaptersByTechnology[ technology ] = adapterModule.bootstrap( artifacts, services, anchorElement );\n   } );\n   return adaptersByTechnology;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction announceInstance( services ) {\n   const { configuration, log, storage } = services;\n\n   if( configuration.get( 'tooling.enabled' ) ) {\n      instances()[ configuration.get( 'name', 'unnamed' ) ] = services;\n   }\n\n   const idGenerator = configuration.get( 'logging.instanceId', simpleId );\n   if( idGenerator === false ) { return; }\n\n   const instanceIdStorageKey = 'axLogTags.INST';\n   const store = storage.getApplicationSessionStorage();\n   let instanceId = store.getItem( instanceIdStorageKey );\n   if( !instanceId ) {\n      instanceId = idGenerator();\n      store.setItem( instanceIdStorageKey, instanceId );\n   }\n   log.addTag( 'INST', instanceId );\n\n   function simpleId() {\n      return `${Date.now()}${Math.floor( Math.random() * 100 )}`;\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Provide tooling access to LaxarJS services.\n *\n * Each laxar#bootstrap call creates a new set of services such as a logger, global event bus etc. For tools\n * like the laxar-developer-tools-widget, it may be necessary to access these services for a given instance,\n * or for all instances.\n *\n * @param {String} [optionalName]\n *   The configuration name of a LaxarJS instance to inspect.\n *   May be omitted to access all application instances by name.\n *\n * @return {Object}\n *   The tooling services for a specified instance, or for all instances that have tooling enabled.\n *\n * @memberof laxar\n */\nfunction instances( optionalName ) {\n   const instances = global.laxarInstances = ( global.laxarInstances || {} );\n   return optionalName ? instances[ optionalName ] : instances;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport {\n   assert,\n   object,\n   string,\n   instances,\n   plainAdapter\n};\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/laxar.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * The *assert* module provides some simple assertion methods for type checks, truthyness tests and guards\n * invalid code paths.\n * When importing the module as `default` module, it is the {@link assert} function itself.\n *\n * When requiring `laxar`, it is available as `laxar.assert`.\n *\n * @module assert\n */\n\n/**\n * Constructor for an Assertion.\n *\n * @param {*} subject\n *    the object assertions are made for\n * @param {String} [optionalDetails]\n *    details that should be printed in case no specific details are given for an assertion method\n *\n * @constructor\n * @private\n */\nfunction Assertion( subject, optionalDetails ) {\n   this.subject_ = subject;\n   this.details_ = optionalDetails || null;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Throws an error if the subject is `null` or `undefined`.\n *\n * @param {String} [optionalDetails]\n *    details to append to the error message\n *\n * @return {Assertion}\n *    this instance\n */\nAssertion.prototype.isNotNull = function isNotNull( optionalDetails ) {\n   if( this.subject_ == null ) {\n      fail( 'Expected value to be defined and not null.', optionalDetails || this.details_ );\n   }\n\n   return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Throws an error if the subject is not of the given type. No error is thrown for `null` or `undefined`.\n *\n * @param {Function} type\n *    the expected type of the subject\n * @param {String} [optionalDetails]\n *    details to append to the error message\n *\n * @return {Assertion}\n *    this instance\n */\nAssertion.prototype.hasType = function hasType( type, optionalDetails ) {\n   if( typeof this.subject_ === 'undefined' || this.subject_ === null ) {\n      return this;\n   }\n\n   if( typeof type !== 'function' ) {\n      fail( `type must be a constructor function. Got ${typeof type}.` );\n   }\n\n   if( !checkType( this.subject_, type ) ) {\n      const actualString = functionName( this.subject_.constructor );\n      const expectedString = functionName( type );\n\n      fail( `Expected value to be an instance of \"${expectedString}\" but was \"${actualString}\".`,\n            optionalDetails || this.details_ );\n   }\n\n   return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Throws an error if the subject is no object or the given property is not defined on it.\n *\n * @param {String} property\n *    the property that is expected for the subject\n * @param {String} [optionalDetails]\n *    details to append to the error message\n *\n * @return {Assertion}\n *    this instance\n */\nAssertion.prototype.hasProperty = function hasProperty( property, optionalDetails ) {\n   if( typeof this.subject_ !== 'object' ) {\n      fail( `value must be an object. Got ${typeof this.subject_}.` );\n   }\n\n   if( !( property in this.subject_ ) ) {\n      fail( `value is missing mandatory property \"${property}\".`, optionalDetails || this.details_ );\n   }\n\n   return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction fail( message, optionalDetails ) {\n   let details = '';\n   if( optionalDetails ) {\n      const detailString = typeof optionalDetails === 'object' ?\n         JSON.stringify( optionalDetails ) : optionalDetails;\n      details = ` Details: ${detailString}`;\n   }\n   throw new Error( `Assertion error: ${message}${details}` );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst TYPE_TO_CONSTRUCTOR = {\n   'string': String,\n   'number': Number,\n   'boolean': Boolean,\n   'function': Function\n};\nfunction checkType( subject, type ) {\n   if( typeof subject === 'object' ) {\n      return subject instanceof type;\n   }\n\n   const actualType = TYPE_TO_CONSTRUCTOR[ typeof subject ];\n   return actualType === type;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst FUNCTION_NAME_MATCHER = /^function ([^\\(]*)\\(/i;\nfunction functionName( func ) {\n   const match = FUNCTION_NAME_MATCHER.exec( func.toString().trim() );\n   return match[ 1 ].length ? match[ 1 ] : 'n/a';\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates and returns a new `Assertion` instance for the given `subject`.\n *\n * **Note**: this function is no member of the module, but the module itself. Thus when using `assert` via\n * laxar, `assert` is will be no simple object, but this function having the other functions as\n * properties.\n *\n * Example:\n * ```js\n * define( [ 'laxar' ], function( ax ) {\n *    ax.assert( ax.assert ).hasType( Function );\n *    ax.assert.state( typeof ax.assert.codeIsUnreachable === 'function' );\n * } );\n * ```\n *\n * @param {*} subject\n *    the object assertions are made for\n * @param {String} [optionalDetails]\n *    details that should be printed in case no specific details are given when calling an assertion method\n *\n * @return {Assertion}\n *    the assertion instance\n */\nfunction assert( subject, optionalDetails ) {\n   return new Assertion( subject, optionalDetails );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Marks a code path as erroneous by throwing an error when reached.\n *\n * @param {String} [optionalDetails]\n *    details to append to the error message\n */\nassert.codeIsUnreachable = function codeIsUnreachable( optionalDetails ) {\n   fail( 'Code should be unreachable!', optionalDetails );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Throws an error if the given expression is falsy.\n *\n * @param {*} expression\n *    the expression to test for truthyness\n * @param {String} [optionalDetails]\n *    details to append to the error message\n */\nassert.state = function state( expression, optionalDetails ) {\n   if( !expression ) {\n      fail( 'State does not hold.', optionalDetails );\n   }\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport default assert;\nexport const codeIsUnreachable = assert.codeIsUnreachable;\nexport const state = assert.state;\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/utilities/assert.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * Utilities for dealing with objects.\n *\n * When requiring `laxar`, it is available as `laxar.object`.\n *\n * @module object\n */\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Returns all properties from `obj` with missing properties completed from `defaults`. If `obj` is `null`\n * or `undefined`, an empty object is automatically created. `obj` and `defaults` are not modified by this\n * function. This is very useful for optional map arguments, resembling some kind of configuration.\n *\n * Example:\n * ```js\n * object.options( { validate: true }, {\n *    validate: false,\n *    highlight: true\n * } );\n * // =>\n * // {\n * //    validate: true,\n * //    highlight: true\n * // }\n * ```\n *\n * @param {Object} obj\n *    the options object to use as source, may be `null` or `undefined`\n * @param {Object} defaults\n *    the defaults to take missing properties from\n *\n * @return {Object}\n *    the completed options object\n */\nexport function options( obj, defaults ) {\n   return { ...defaults, ...obj };\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Iterates over the keys of an object and calls the given iterator function for each entry.\n * On each iteration the iterator function is passed the `value`, the `key` and the complete `object` as\n * arguments.\n * If `object` is an array, the native `Array.prototype.forEach` function is called.\n * In this case the keys are the indices of the array.\n *\n * Example:\n * ```\n * object.forEach( { name: Peter, age: 12 }, ( value, key ) => {\n *    console.log( `${key} = ${value}\\n` );\n * });\n * // =>\n * // name = Peter\n * // age = 12\n * ```\n *\n * @param {Object} object\n *    the object to run the iterator function on\n * @param {Function} iteratorFunction\n *    the iterator function to run on each key-value pair\n */\nexport function forEach( object, iteratorFunction ) {\n   if( Array.isArray( object ) ) {\n      object.forEach( iteratorFunction );\n      return;\n   }\n\n   for( const key in object ) {\n      if( hasOwnProperty( object, key ) ) {\n         iteratorFunction( object[ key ], key, object );\n      }\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Finds a property in a nested object structure by a given path. A path is a string of keys, separated\n * by a dot from each other, used to traverse that object and find the value of interest. An additional\n * default is returned, if otherwise the value would yield `undefined`.\n *\n * Note that `path()` must only be used in situations where all path segments are also valid\n * JavaScript identifiers, and should never be used with user-specified paths:\n *\n *  - there is no mechanism to escape '.' in path segments; a dot always separates keys,\n *  - an empty string as a path segment will abort processing and return the entire sub-object under the\n *    respective position. For historical reasons, the path interpretation differs from that performed by\n *    {@link #setPath()}.\n *\n *\n * Example:\n *\n * ```js\n * object.path( { one: { two: 3 } }, 'one.two' ); // => 3\n * object.path( { one: { two: 3 } }, 'one.three' ); // => undefined\n * object.path( { one: { two: 3 } }, 'one.three', 42 ); // => 42\n * object.path( { one: { two: 3 } }, 'one.' ); // => { two: 3 }\n * object.path( { one: { two: 3 } }, '' ); // => { one: { two: 3 } }\n * object.path( { one: { two: 3 } }, '.' ); // => { one: { two: 3 } }\n * ```\n *\n * @param {Object} obj\n *    the object to traverse\n * @param {String} thePath\n *    the path to search for\n * @param {*} [optionalDefault]\n *    the value to return instead of `undefined` if nothing is found\n *\n * @return {*}\n *    the value at the given path\n */\nexport function path( obj, thePath, optionalDefault = undefined ) {\n   const pathArr = thePath.split( '.' );\n   let node = obj;\n   let key = pathArr.shift();\n\n   while( key ) {\n      if( node && typeof node === 'object' && hasOwnProperty( node, key ) ) {\n         node = node[ key ];\n         key = pathArr.shift();\n      }\n      else {\n         return optionalDefault;\n      }\n   }\n\n   return node;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Sets a property in a nested object structure at a given path to a given value. A path is a string of\n * keys, separated by a dot from each other, used to traverse that object and find the place where the\n * value should be set. Any missing subtrees along the path are created.\n *\n * Note that `setPath()` must only be used in situations where all path segments are also valid\n * JavaScript identifiers, and should never be used with user-specified paths:\n *\n *  - there is no mechanism to escape '.' in path segments; a dot will always create separate keys,\n *  - an empty string as a path segment will create an empty string key in the object graph where missing.\n *    For historical reasons, this path interpretation differs from that performed by #path (see there).\n *\n *\n * Example:\n *\n * ```js\n * object.setPath( {}, 'name.first', 'Peter' ); // => { name: { first: 'Peter' } }\n * object.setPath( {}, 'pets.1', 'Hamster' ); // => { pets: [ null, 'Hamster' ] }\n * object.setPath( {}, '', 'Hamster' ); // => { '': 'Hamster' } }\n * object.setPath( {}, '.', 'Hamster' ); // => { '': { '': 'Hamster' } } }\n * ```\n *\n * @param {Object} obj\n *    the object to modify\n * @param {String} path\n *    the path to set a value at\n * @param {*} value\n *    the value to set at the given path\n *\n * @return {*}\n *    the full object (for chaining)\n */\nexport function setPath( obj, path, value ) {\n   let node = obj;\n   const pathArr = path.split( '.' );\n   const last = pathArr.pop();\n\n   pathArr.forEach( ( pathFragment, index ) => {\n      if( !node[ pathFragment ] || typeof node[ pathFragment ] !== 'object' ) {\n         const lookAheadFragment = pathArr[ index + 1 ] || last;\n         if( lookAheadFragment.match( /^[0-9]+$/ ) ) {\n            node[ pathFragment ] = [];\n            fillArrayWithNull( node[ pathFragment ], parseInt( lookAheadFragment, 10 ) );\n         }\n         else {\n            node[ pathFragment ] = {};\n         }\n      }\n\n      node = node[ pathFragment ];\n   } );\n\n   if( Array.isArray( node ) && last > node.length ) {\n      fillArrayWithNull( node, last );\n   }\n\n   node[ last ] = value;\n\n   return obj;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Returns a deep clone of the given object. Note that the current implementation is intended to be used\n * for simple object literals only. There is no guarantee that cloning objects instantiated via\n * constructor function works and cyclic references will lead to endless recursion.\n *\n * @param {*} object\n *    the object to clone\n *\n * @return {*}\n *    the clone\n */\nexport function deepClone( object ) {\n   if( !object || typeof object !== 'object' ) {\n      return object;\n   }\n\n   // Using plain for-loops here for performance-reasons.\n   let result;\n   if( Array.isArray( object ) ) {\n      result = [];\n      for( let i = 0, length = object.length; i < length; ++i ) {\n         result[ i ] = deepClone( object[ i ] );\n      }\n   }\n   else {\n      result = {};\n      for( const key in object ) {\n         if( hasOwnProperty( object, key ) ) {\n            result[ key ] = deepClone( object[ key ] );\n         }\n      }\n   }\n\n   return result;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a lookup table from a function and a list of inputs to the function.\n *\n * @param {Function} fn\n *    The callback to apply to all inputs\n * @param {String[]|Number[]|Boolean[]} keys\n *    The keys for the lookup table, and inputs to the function.\n *\n * @return {Object}\n *    An object mapping the given keys to their values under `fn`.\n */\nexport function tabulate( fn, keys ) {\n   return keys.reduce(\n      ( table, k ) => { table[ k ] = fn( k ); return table; },\n      {}\n   );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Sets all entries of the given array to `null`.\n *\n * @private\n */\nfunction fillArrayWithNull( arr, toIndex ) {\n   for( let i = arr.length; i < toIndex; ++i ) {\n      arr[ i ] = null;\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst hasOwnProp = Object.prototype.hasOwnProperty;\n// eslint-disable-next-line valid-jsdoc\n/**\n * @private\n */\nfunction hasOwnProperty( object, property ) {\n   return hasOwnProp.call( object, property );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/utilities/object.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Utilities for dealing with strings.\n *\n * When requiring `laxar`, it is available as `laxar.string`.\n *\n * @module string\n */\n\n//\nconst BACKSLASH = '\\\\';\nconst OPENING_BRACKET = '[';\nconst CLOSING_BRACKET = ']';\nconst INTEGER_MATCHER = /^[0-9]+$/;\n\n/**\n * A map of all available default format specifiers to their respective formatter function.\n * The following specifiers are available:\n *\n * - `%d` / `%i`: Format the given numeric value as integer. Decimal places are removed\n * - `%f`: Format the given numeric value as floating point value. This specifier supports precision as\n *   sub-specifier (e.g. `%.2f` for 2 decimal places)\n * - `%s`: use simple string serialization using `toString`\n * - `%o`: Format complex objects using `JSON.stringify`\n *\n * @type {Object}\n * @name DEFAULT_FORMATTERS\n */\nexport const DEFAULT_FORMATTERS = Object.freeze( {\n   's'( input ) {\n      return `${input}`;\n   },\n\n   'd'( input ) {\n      return input.toFixed( 0 );\n   },\n\n   'i'( input, subSpecifierString ) {\n      return DEFAULT_FORMATTERS.d( input, subSpecifierString );\n   },\n\n   'f'( input, subSpecifierString ) {\n      const precision = subSpecifierString.match( /^\\.(\\d)$/ );\n      if( precision ) {\n         return input.toFixed( precision[ 1 ] );\n      }\n\n      return `${input}`;\n   },\n\n   'o'( input ) {\n      return JSON.stringify( input );\n   },\n\n   'default'( input, subSpecifierString ) {\n      return DEFAULT_FORMATTERS.s( input, subSpecifierString );\n   }\n} );\n\nconst DEFAULT_FORMATTER = createFormatter( DEFAULT_FORMATTERS );\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Substitutes all unescaped placeholders in the given string for a given indexed or named value.\n * A placeholder is written as a pair of brackets around the key of the placeholder. An example of an\n * indexed placeholder is `[0]` and a named placeholder would look like this `[replaceMe]`. If no\n * replacement for a key exists, the placeholder will simply not be substituted.\n *\n * Some examples:\n * ```javascript\n * string.format( 'Hello [0], how do you like [1]?', [ 'Peter', 'Cheeseburgers' ] );\n * // => 'Hello Peter, how do you like Cheeseburgers?'\n * ```\n * ```javascript\n * string.format( 'Hello [name] and [partner], how do you like [0]?', [ 'Pizza' ], {\n *    name: 'Hans',\n *    partner: 'Roswita'\n * } );\n * // => 'Hello Hans and Roswita, how do you like Pizza?'\n * ```\n * If a pair of brackets should not be treated as a placeholder, the opening bracket can simply be escaped\n * by backslashes (thus to get an actual backslash in a JavaScript string literal, which is then treated as\n * an escape symbol, it needs to be written as double backslash):\n * ```javascript\n * string.format( 'A [something] should eventually only have \\\\[x].', {\n *    something: 'checklist'\n * } );\n * // => 'A checklist should eventually only have [x].'\n * ```\n * A placeholder key can be any character string besides `[`, `]` and `:` to keep parsing simple and fast.\n * By using `:` as separator it is possible to provide a type specifier for string serialization or other\n * additional mapping functions for the value to insert. Type specifiers always begin with an `%` and end\n * with the specifier type. Builtin specifiers and their according formatter functions are defined\n * as {@link DEFAULT_FORMATTERS}.\n *\n * When no specifier is provided, by default `%s` is assumed.\n *\n * Example:\n * ```javascript\n * string.format( 'Hello [0:%s], you owe me [1:%.2f] euros.', [ 'Peter', 12.1243 ] );\n * // => 'Hello Peter, you owe me 12.12 euros.'\n * ```\n *\n * Mapping functions should instead consist of simple strings and may not begin with a `%` character. It is\n * advised to use the same naming rules as for simple JavaScript functions. Type specifiers and mapping\n * functions are applied in the order they appear within the placeholder.\n *\n * An example, where we assume that the mapping functions `flip` and `double` where defined by the user\n * when creating the `formatString` function using {@link #createFormatter()}:\n * ```javascript\n * formatString( 'Hello [0:%s:flip], you owe me [1:double:%.2f] euros.', [ 'Peter', 12 ] );\n * // => 'Hello reteP, you owe me 24.00 euros.'\n * ```\n *\n * Note that there currently exist no builtin mapping functions.\n *\n * If a type specifier is used that doesn't exist, an exception is thrown. In contrast to that the use of\n * an unknown mapping function results in a no-op. This is on purpose to be able to use filter-like\n * functions that, in case they are defined for a formatter, transform a value as needed and in all other\n * cases simply are ignored and don't alter the value.\n *\n * @param {String} string\n *    the string to replace placeholders in\n * @param {Array} [optionalIndexedReplacements]\n *    an optional array of indexed replacements\n * @param {Object} [optionalNamedReplacements]\n *    an optional map of named replacements\n *\n * @return {String}\n *    the string with placeholders substituted for their according replacements\n */\nexport function format( string, optionalIndexedReplacements, optionalNamedReplacements ) {\n   return DEFAULT_FORMATTER( string, optionalIndexedReplacements, optionalNamedReplacements );\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a new format function having the same api as {@link #format()}. If the first argument is\n * omitted or `null`, the default formatters for type specifiers are used. Otherwise only the provided map\n * of specifiers is available to the returned format function. Each key of the map is a specifier character\n * where the `%` is omitted and the value is the formatting function. A formatting function receives the\n * value to format (i.e. serialize) and the sub-specifier (if any) as arguments. For example for the format\n * specifier `%.2f` the sub-specifier would be `.2` where for `%s` it would simply be the empty string.\n *\n * Example:\n * ```js\n * const format = string.createFormatter( {\n *    'm': function( value ) {\n *       return value.amount + ' ' + value.currency;\n *    },\n *    'p': function( value, subSpecifier ) {\n *       return Math.pow( value, parseInt( subSpecifier, 10 ) );\n *    }\n * } );\n *\n * format( 'You owe me [0:%m].', [ { amount: 12, currency: 'EUR' } ] );\n * // => 'You owe me 12 EUR.'\n *\n * format( '[0]^3 = [0:%3p]', [ 2 ] );\n * // => '2^3 = 8'\n * ```\n *\n * The second argument is completely additional to the behavior of the default {@link #format()}\n * function. Here a map from mapping function id to actual mapping function can be passed in. Whenever the\n * id of a mapping function is found within the placeholder, that mapping function is called with the\n * current value and its return value is either passed to the next mapping function or rendered\n * instead of the placeholder if there are no more mapping function ids or type specifiers within the\n * placeholder string.\n *\n * ```javascript\n * const format = string.createFormatter( null, {\n *    flip: function( value ) {\n *       return ( '' + s ).split( '' ).reverse().join( '' );\n *    },\n *    double: function( value ) {\n *       return value * 2;\n *    }\n * } );\n *\n * format( 'Hello [0:%s:flip], you owe me [1:double:%.2f] euros.', [ 'Peter', 12 ] );\n * // => 'Hello reteP, you owe me 24.00 euros.'\n * ```\n *\n * @param {Object} typeFormatters\n *    map from format specifier (single letter without leading `%`) to formatting function\n * @param {Object} [optionalValueMappers]\n *    map from mapping identifier to mapping function\n *\n * @return {Function}\n *    a function having the same api as {@link #format()}\n */\nexport function createFormatter( typeFormatters = DEFAULT_FORMATTERS, optionalValueMappers = {} ) {\n\n   function format( string, optionalIndexedReplacements, optionalNamedReplacements ) {\n      if( typeof string !== 'string' ) {\n         return defaultTypeFormatter( typeFormatters )( string );\n      }\n\n      const indexed = Array.isArray( optionalIndexedReplacements ) ? optionalIndexedReplacements : [];\n      let named = {};\n      if( optionalNamedReplacements ) {\n         named = optionalNamedReplacements || {};\n      }\n      else if( !Array.isArray( optionalIndexedReplacements ) ) {\n         named = optionalIndexedReplacements || {};\n      }\n\n      const chars = string.split( '' );\n      let output = '';\n      for( let i = 0, len = chars.length; i < len; ++i ) {\n         if( chars[ i ] === BACKSLASH ) {\n            if( i + 1 === len ) {\n               throw new Error( `Unterminated escaping sequence at index ${i} of string: \"${string}\".` );\n            }\n\n            output += chars[ ++i ];\n         }\n         else if( chars[ i ] === OPENING_BRACKET ) {\n            const closingIndex = string.indexOf( CLOSING_BRACKET, i + 1 );\n            if( closingIndex === -1 ) {\n               throw new Error( `Unterminated placeholder at index ${i} of string: \"${string}\".` );\n            }\n\n            const key = string.substring( i + 1, closingIndex );\n\n            output += replacePlaceholder( key, named, indexed, { string, index: i } );\n\n            i = closingIndex;\n         }\n         else {\n            output += chars[ i ];\n         }\n      }\n      return output;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function replacePlaceholder( placeholder, named, indexed, context ) {\n      let specifier = '';\n      let subSpecifierString = '';\n      const placeholderParts = placeholder.split( ':' );\n      const key = placeholderParts[ 0 ];\n\n      let value;\n      if( INTEGER_MATCHER.test( key ) && key < indexed.length ) {\n         value = indexed[ key ];\n      }\n      else if( key in named ) {\n         value = named[ key ];\n      }\n      else {\n         return OPENING_BRACKET + placeholder + CLOSING_BRACKET;\n      }\n\n      if( placeholderParts.length > 1 ) {\n\n         if( placeholderParts[ 1 ].charAt( 0 ) !== '%' ) {\n            value = defaultTypeFormatter( typeFormatters )( value );\n         }\n\n         return placeholderParts.slice( 1 ).reduce( ( value, part ) => {\n            if( part.indexOf( '%' ) === 0 ) {\n               const specifierMatch = part.match( /^%(.*)(\\w)$/ );\n               specifier = specifierMatch ? specifierMatch[ 2 ] : '';\n               subSpecifierString = specifierMatch ? specifierMatch[ 1 ] : '';\n               if( specifier in typeFormatters ) {\n                  return typeFormatters[ specifier ]( value, subSpecifierString );\n               }\n               const knownSpecifiers = Object.keys( typeFormatters )\n                  .filter( _ => _ !== 'default' )\n                  .map( _ => `%${_}` )\n                  .join( ', ' );\n\n               throw new Error(\n                  `Unknown format specifier \"%${specifier}\" for placeholder` +\n                  ` at index ${context.index} of string: \"${context.string}\"` +\n                  ` (Known specifiers are: ${knownSpecifiers}).`\n               );\n            }\n            if( part in optionalValueMappers ) {\n               return optionalValueMappers[ part ]( value );\n            }\n\n            return value;\n         }, value );\n      }\n\n      return defaultTypeFormatter( typeFormatters )( value );\n   }\n\n   ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return format;\n\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction defaultTypeFormatter( typeFormatters ) {\n   if( 'default' in typeFormatters ) {\n      return typeFormatters[ 'default' ];\n   }\n\n   return DEFAULT_FORMATTERS[ 'default' ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/utilities/string.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport pagejs from 'page';\nimport assert from '../utilities/assert';\nimport { create as createConfiguration } from './configuration';\nimport { create as createBrowser } from './browser';\nimport { create as createLog } from './log';\nimport { create as createEventBus } from '../runtime/event_bus';\nimport { create as createArtifactProvider } from './artifact_provider';\nimport { create as createControlLoader } from '../loaders/control_loader';\nimport { create as createCssLoader } from '../loaders/css_loader';\nimport { create as createLayoutLoader } from '../loaders/layout_loader';\nimport { create as createPageLoader } from '../loaders/page_loader';\nimport { create as createThemeLoader } from '../loaders/theme_loader';\nimport { create as createWidgetLoader } from '../loaders/widget_loader';\nimport { create as createStorage } from './storage';\nimport { create as createTimer } from './timer';\nimport { create as createFlowController } from './flow_controller';\nimport { create as createFlowService } from './flow_service';\nimport { create as createHeartbeat } from './heartbeat';\nimport { create as createPageService } from './page_service';\nimport { create as createPagejsRouter } from './pagejs_router';\nimport { create as createLocaleEventManager } from './locale_event_manager';\nimport { create as createVisibilityEventManager } from './visibility_event_manager';\nimport { create as createWidgetServices } from './widget_services';\nimport {\n   createCollectors as createToolingCollectors,\n   createProviders as createToolingProviders\n} from '../tooling/tooling';\n\nexport function create( configurationSource, assets ) {\n\n   const configurationDefaults = {\n      baseHref: undefined,\n      eventBusTimeoutMs: 120 * 1000,\n      router: {\n         query: {\n            enabled: false\n         }\n         // 'pagejs' is not configured here:\n         // any deviation from the page.js library defaults must be set by the application\n      },\n      flow: {\n         entryPoint: {\n            target: 'default',\n            parameters: {}\n         }\n      },\n      i18n: {\n         fallback: 'en',\n         strict: false,\n         locales: {\n            'default': 'en'\n         }\n      },\n      logging: {\n         levels: {},\n         threshold: 'INFO'\n      },\n      name: 'unnamed',\n      theme: 'default',\n      storagePrefix: undefined,\n      tooling: {\n         enabled: false\n      }\n   };\n   const configuration = createConfiguration( configurationSource, configurationDefaults );\n\n   const browser = createBrowser();\n   const log = createLog( configuration, browser );\n   const collectors = createToolingCollectors( configuration, log );\n\n   const storage = createStorage( configuration, browser );\n   const timer = createTimer( log, storage );\n\n   const artifactProvider = createArtifactProvider( assets, browser, configuration, log );\n\n   const heartbeat = createHeartbeat();\n\n   // MSIE Bug we have to wrap setTimeout to pass assertion\n   const timeoutFn = ( f, t ) => setTimeout( f, t );\n   const globalEventBus = createEventBus( configuration, log, heartbeat.onNext, timeoutFn );\n\n   const cssLoader = createCssLoader();\n   const themeLoader = createThemeLoader( artifactProvider, cssLoader );\n   const layoutLoader = createLayoutLoader( artifactProvider, cssLoader );\n   const pageLoader = createPageLoader( artifactProvider, collectors.pages );\n   const controlLoader = createControlLoader( artifactProvider, cssLoader );\n   let widgetServices = { forWidget() {\n      assert.codeIsUnreachable( 'Using widget services before they are available');\n   } };\n   const widgetLoader = createWidgetLoader(\n      log,\n      artifactProvider,\n      controlLoader,\n      cssLoader,\n      collectors.pages,\n      ( ...args ) => widgetServices.forWidget( ...args )\n   );\n\n   const localeManager = createLocaleEventManager( globalEventBus, configuration );\n   const visibilityManager = createVisibilityEventManager( globalEventBus );\n   const pageService = createPageService(\n      globalEventBus,\n      pageLoader,\n      layoutLoader,\n      widgetLoader,\n      localeManager,\n      visibilityManager,\n      collectors.pages\n   );\n\n   const router = createPagejsRouter( pagejs, browser, configuration );\n\n   const flowController = createFlowController(\n      artifactProvider,\n      configuration,\n      globalEventBus,\n      log,\n      pageService,\n      router,\n      timer\n   );\n   const flowService = createFlowService(\n      flowController\n   );\n\n   const toolingProviders = createToolingProviders( collectors );\n\n   widgetServices = createWidgetServices(\n      artifactProvider,\n      configuration,\n      controlLoader,\n      globalEventBus,\n      flowService,\n      log,\n      heartbeat,\n      pageService,\n      storage,\n      toolingProviders\n   );\n\n   return {\n      configuration,\n      cssLoader,\n      artifactProvider,\n      flowController,\n      flowService,\n      globalEventBus,\n      heartbeat,\n      layoutLoader,\n      log,\n      pageService,\n      storage,\n      themeLoader,\n      timer,\n      toolingProviders,\n      widgetLoader\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/services.js","  /* globals require, module */\n\n  'use strict';\n\n  /**\n   * Module dependencies.\n   */\n\n  var pathtoRegexp = require('path-to-regexp');\n\n  /**\n   * Module exports.\n   */\n\n  module.exports = page;\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = ('undefined' !== typeof document) && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var location = ('undefined' !== typeof window) && (window.history.location || window.location);\n\n  /**\n   * Perform initial dispatch.\n   */\n\n  var dispatch = true;\n\n\n  /**\n   * Decode URL components (query string, pathname, hash).\n   * Accommodates both regular percent encoding and x-www-form-urlencoded format.\n   */\n  var decodeURLComponents = true;\n\n  /**\n   * Base path.\n   */\n\n  var base = '';\n\n  /**\n   * Running flag.\n   */\n\n  var running;\n\n  /**\n   * HashBang option\n   */\n\n  var hashbang = false;\n\n  /**\n   * Previous context, for capturing\n   * page exit events.\n   */\n\n  var prevContext;\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page('*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path));\n      for (var i = 1; i < arguments.length; ++i) {\n        page.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      page['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      page.start(path);\n    }\n  }\n\n  /**\n   * Callback functions.\n   */\n\n  page.callbacks = [];\n  page.exits = [];\n\n  /**\n   * Current path being processed\n   * @type {string}\n   */\n  page.current = '';\n\n  /**\n   * Number of pages navigated to.\n   * @type {number}\n   *\n   *     page.len == 0;\n   *     page('/login');\n   *     page.len == 1;\n   */\n\n  page.len = 0;\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  page.base = function(path) {\n    if (0 === arguments.length) return base;\n    base = path;\n  };\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  page.start = function(options) {\n    options = options || {};\n    if (running) return;\n    running = true;\n    if (false === options.dispatch) dispatch = false;\n    if (false === options.decodeURLComponents) decodeURLComponents = false;\n    if (false !== options.popstate) window.addEventListener('popstate', onpopstate, false);\n    if (false !== options.click) {\n      document.addEventListener(clickEvent, onclick, false);\n    }\n    if (true === options.hashbang) hashbang = true;\n    if (!dispatch) return;\n    var url = (hashbang && ~location.hash.indexOf('#!')) ? location.hash.substr(2) + location.search : location.pathname + location.search + location.hash;\n    page.replace(url, null, true, dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  page.stop = function() {\n    if (!running) return;\n    page.current = '';\n    page.len = 0;\n    running = false;\n    document.removeEventListener(clickEvent, onclick, false);\n    window.removeEventListener('popstate', onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  page.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    if (false !== dispatch) page.dispatch(ctx);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  page.back = function(path, state) {\n    if (page.len > 0) {\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      history.back();\n      page.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    }else{\n      setTimeout(function() {\n        page.show(base, state);\n      });\n    }\n  };\n\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  page.redirect = function(from, to) {\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page(from, function(e) {\n        setTimeout(function() {\n          page.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        page.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  page.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) page.dispatch(ctx);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  page.dispatch = function(ctx) {\n    var prev = prevContext,\n      i = 0,\n      j = 0;\n\n    prevContext = ctx;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled(ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n\n    if (hashbang) {\n      current = base + location.hash.replace('#!', '');\n    } else {\n      current = location.pathname + location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    location.href = ctx.canonicalPath;\n  }\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  page.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return page.exit('*', path);\n    }\n\n    var route = new Route(path);\n    for (var i = 1; i < arguments.length; ++i) {\n      page.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   */\n  function decodeURLEncodedURIComponent(val) {\n    if (typeof val !== 'string') { return val; }\n    return decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state) {\n    if ('/' === path[0] && 0 !== path.indexOf(base)) path = base + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    this.path = path.replace(base, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = document.title;\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = parts[0];\n      this.hash = decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Expose `Context`.\n   */\n\n  page.Context = Context;\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    page.len++;\n    history.pushState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    history.replaceState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options) {\n    options = options || {};\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathtoRegexp(this.path,\n      this.keys = [],\n      options);\n  }\n\n  /**\n   * Expose `Route`.\n   */\n\n  page.Route = Route;\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) return fn(ctx, next);\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Handle \"populate\" events.\n   */\n\n  var onpopstate = (function () {\n    var loaded = false;\n    if ('undefined' === typeof window) {\n      return;\n    }\n    if (document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else {\n        page.show(location.pathname + location.hash, undefined, undefined, false);\n      }\n    };\n  })();\n  /**\n   * Handle \"click\" events.\n   */\n\n  function onclick(e) {\n\n    if (1 !== which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n\n\n    // ensure link\n    // use shadow dom when available\n    var el = e.path ? e.path[0] : e.target;\n    while (el && 'A' !== el.nodeName) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName) return;\n\n\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if (!hashbang && el.pathname === location.pathname && (el.hash || '#' === link)) return;\n\n\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    if (el.target) return;\n\n    // x-origin\n    if (!sameOrigin(el.href)) return;\n\n\n\n    // rebuild path\n    var path = el.pathname + el.search + (el.hash || '');\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (typeof process !== 'undefined' && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n\n    if (path.indexOf(base) === 0) {\n      path = path.substr(base.length);\n    }\n\n    if (hashbang) path = path.replace('#!', '');\n\n    if (base && orig === path) return;\n\n    e.preventDefault();\n    page.show(orig);\n  }\n\n  /**\n   * Event button.\n   */\n\n  function which(e) {\n    e = e || window.event;\n    return null === e.which ? e.button : e.which;\n  }\n\n  /**\n   * Check if `href` is the same origin.\n   */\n\n  function sameOrigin(href) {\n    var origin = location.protocol + '//' + location.hostname;\n    if (location.port) origin += ':' + location.port;\n    return (href && (0 === href.indexOf(origin)));\n  }\n\n  page.sameOrigin = sameOrigin;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/page/index.js\n// module id = 42\n// module chunks = 0 1","var isarray = require('isarray')\n\n/**\n * Expose `pathToRegexp`.\n */\nmodule.exports = pathToRegexp\nmodule.exports.parse = parse\nmodule.exports.compile = compile\nmodule.exports.tokensToFunction = tokensToFunction\nmodule.exports.tokensToRegExp = tokensToRegExp\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g')\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = []\n  var key = 0\n  var index = 0\n  var path = ''\n  var res\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0]\n    var escaped = res[1]\n    var offset = res.index\n    path += str.slice(index, offset)\n    index = offset + m.length\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1]\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path)\n      path = ''\n    }\n\n    var prefix = res[2]\n    var name = res[3]\n    var capture = res[4]\n    var group = res[5]\n    var suffix = res[6]\n    var asterisk = res[7]\n\n    var repeat = suffix === '+' || suffix === '*'\n    var optional = suffix === '?' || suffix === '*'\n    var delimiter = prefix || '/'\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?')\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    })\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index)\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path)\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length)\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$')\n    }\n  }\n\n  return function (obj) {\n    var path = ''\n    var data = obj || {}\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i]\n\n      if (typeof token === 'string') {\n        path += token\n\n        continue\n      }\n\n      var value = data[token.name]\n      var segment\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j])\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value)\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g)\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      })\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = []\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source)\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options))\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path)\n  var re = tokensToRegExp(tokens, options)\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i])\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {}\n\n  var strict = options.strict\n  var end = options.end !== false\n  var route = ''\n  var lastToken = tokens[tokens.length - 1]\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken)\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n\n    if (typeof token === 'string') {\n      route += escapeString(token)\n    } else {\n      var prefix = escapeString(token.prefix)\n      var capture = token.pattern\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*'\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?'\n        } else {\n          capture = '(' + capture + ')?'\n        }\n      } else {\n        capture = prefix + '(' + capture + ')'\n      }\n\n      route += capture\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?'\n  }\n\n  if (end) {\n    route += '$'\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)'\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || []\n\n  if (!isarray(keys)) {\n    options = keys\n    keys = []\n  } else if (!options) {\n    options = {}\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/page/~/path-to-regexp/index.js\n// module id = 43\n// module chunks = 0 1","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/page/~/path-to-regexp/~/isarray/index.js\n// module id = 44\n// module chunks = 0 1","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the Configuration factory.\n *\n * To use the Configuration in a widget, request the {@link widget_services#axConfiguration axConfiguration}\n * injection. In compatibility mode with LaxarJS v1.x, it is also available under `laxar.configuration`.\n *\n * @module configuration\n */\nimport assert from '../utilities/assert';\nimport { path } from '../utilities/object';\n\nexport function create( source, defaults ) {\n\n   /**\n    * Provides access to the configuration that was passed during application bootstrapping.\n    *\n    * A *Configuration* instance provides convenient readonly access to the underlying LaxarJS\n    * application bootstrapping configuration. The configuration values are passed to\n    * {@link laxar#bootstrap()} on startup (before LaxarJS v2.x, these configuration values were read from\n    * `window.laxar`). When using the LaxarJS application template, the configuration values are set in the\n    * file `application/application.js` under your project's root directory.\n    *\n    * @name Configuration\n    * @constructor\n    */\n   return { get, ensure };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Returns the configured value for the specified attribute path or `undefined` in case it wasn't\n    * configured. If a default value was passed as second argument this is returned instead of `undefined`.\n    *\n    * Services should use this to get configuration values for which there are universal fallback behaviors.\n    *\n    * Examples:\n    * ```js\n    * // ... inject `axConfiguration` as parameter `config` ...\n    * config.get( 'logging.threshold' ); // -> 'INFO'\n    * config.get( 'iDontExist' ); // -> undefined\n    * config.get( 'iDontExist', 42 ); // -> 42\n    * ```\n    *\n    * @param {String} key\n    *    a  path (using `.` as separator) to the property in the configuration object\n    * @param {*} [optionalDefault]\n    *    the value to return if no value was set for `key`\n    *\n    * @return {*}\n    *    either the configured value, `undefined` or `optionalDefault`\n    *\n    * @memberof Configuration\n    */\n   function get( key, optionalDefault ) {\n      const value = path( source, key );\n      return ( value !== undefined ) ? value : path( defaults, key, optionalDefault );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Retrieves a configuration value by key, failing if it is `undefined` or `null`.\n    *\n    * Services should use this to get configuration values for which no universal default or fallback exists.\n    *\n    * Examples:\n    * ```js\n    * // ... inject `axConfiguration` as parameter `config` ...\n    * config.ensure( 'logging.threshold' ); // -> 'INFO'\n    * config.ensure( 'iDontExist' ); // -> throws\n    * ```\n    *\n    * @param {String} key\n    *    a  path (using `.` as separator) to the property in the configuration object\n    *\n    * @return {*}\n    *    the configured value (if `undefined` or `null`, an exception is thrown instead)\n    *\n    * @memberof Configuration\n    */\n   function ensure( key ) {\n      const value = get( key );\n      assert( value ).isNotNull( `Configuration is missing mandatory entry: ${key}` );\n      return value;\n   }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/configuration.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the Browser factory.\n *\n * Provides abstractions for browser APIs used internally by LaxarJS, which might need a different\n * implementation in a server-side environment, or for testing.\n * This service is internal to LaxarJS and not available to widgets and activities.\n *\n * @module browser\n */\n\n/**\n * Create a browser abstraction environment.\n *\n * @return {Browser}\n *    a fresh browser instance\n *\n * @private\n */\nexport function create() {\n\n   // for the MSIE `resolve`-workaround, cache the temporary HTML document\n   let resolveDoc;\n   let resolveDocBase;\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * A brower mostly abstracts over the location-related DOM window APIs, and provides a console wrapper.\n    * Since it is internal to LaxarJS, only relevant APIs are included.\n    *\n    * @name Browser\n    * @constructor\n    */\n   return {\n      /**\n      * Calculates an absolute URL from a (relative) URL, and an optional base URL.\n      *\n      * If no base URL is given, the `document.baseURI` is used instead. The given base URL may also be\n      * relative, in which case it is resolved against the `document.baseURI` before resolving the first URL.\n      *\n      * For browser environments that do not support the `new URL( url, baseUrl )` constructor for resolving\n      * URLs or that do not support `document.baseURI`, fallback mechanisms are used.\n      *\n      * @param {String} url\n      *    the URL to resolve\n      * @param {String} baseUrl\n      *    the base to resolve from\n      *\n      * @return {String}\n      *    an absolute URL based on the given URL\n      *\n      * @type {Function}\n      * @memberof Browser\n      */\n      resolve: selectResolver(),\n\n      /**\n       * Provides easily mocked access to `window.location`\n       *\n       * @return {Location}\n       *    the current (window's) DOM location\n       *\n       * @type {Function}\n       * @memberof Browser\n       */\n      location: () => window.location,\n\n      /**\n       * Provides easily mocked access to `window.fetch` or a suitable polyfill:\n       *\n       * @param {String|Request} input\n       *    the URL to fetch or the request to perform\n       * @param {Object} [init]\n       *    additional options, described here in more detail:\n       *    https://developer.mozilla.org/en-US/docs/Web/API/Globalfetch/fetch#Parameters\n       *\n       * @return {Promise<Response>}\n       *    the resulting promise\n       *\n       * @type {Function}\n       * @memberof Browser\n       */\n      fetch: ( input, init ) => window.fetch( input, init ),\n\n      /**\n       * Provides easily mocked access to `window.console`:\n       *\n       * @return {Console}\n       *    the browser console promise\n       *\n       * @type {Function}\n       * @memberof Browser\n       */\n      console: () => window.console\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // perform the exception-based feature-detect only once (for performance, and to be nice to debugger users)\n   function selectResolver() {\n      try {\n         const { href } = window.location;\n         return ( new URL( '', href ).href === href ) ? resolveUsingUrl : resolveUsingLink;\n      }\n      catch( e ) {\n         return resolveUsingLink;\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // Resolve using the DOM URL API (Chrome, Firefox, Safari, MS Edge)\n   function resolveUsingUrl( url, baseUrl ) {\n      const absoluteBaseUrl = baseUrl ? abs( baseUrl ) : ( document.baseURI || abs( '.' ) );\n      return new URL( url, absoluteBaseUrl ).href;\n\n      function abs( url ) {\n         return new URL( url, document.baseURI || resolveUsingLink( '.' ) );\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // Resolve using the a-tag fallback (MSIE)\n   function resolveUsingLink( url, baseUrl ) {\n      const absoluteBaseUrl = abs( baseUrl );\n      if( !resolveDoc ) {\n         resolveDoc = document.implementation.createHTMLDocument( '' );\n         resolveDocBase = resolveDoc.createElement( 'base' );\n         resolveDoc.head.appendChild( resolveDocBase );\n      }\n      resolveDocBase.href = absoluteBaseUrl;\n      return abs( url, resolveDoc );\n\n      function abs( url, baseDocument = document ) {\n         const a = baseDocument.createElement( 'a' );\n         // MSIE does not process empty URLs correctly (http://stackoverflow.com/a/7966835)\n         a.href = url || '#';\n         return url ? a.href : a.href.slice( 0, -1 );\n      }\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/browser.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the Logger factory.\n *\n * To use the Log service in a widget, request the {@link widget_services#axLog axLog} injection.\n *\n * @module log\n */\nimport assert from '../utilities/assert';\nimport { forEach } from '../utilities/object';\n\n/**\n * Log levels that are available by default, sorted by increasing severity:\n *\n * - TRACE (level 100)\n * - DEBUG (level 200)\n * - INFO (level 300)\n * - WARN (level 400)\n * - ERROR (level 500)\n * - FATAL (level 600)\n *\n * @type {Object}\n * @name levels\n */\nexport const levels = {\n   TRACE: 100,\n   DEBUG: 200,\n   INFO: 300,\n   WARN: 400,\n   ERROR: 500,\n   FATAL: 600\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Pass this as an additional replacement parameter to a log-method, in order to blackbox your logging call.\n * Blackboxed callers are ignored when logging the source information (file, line).\n *\n * @type {Object}\n * @name BLACKBOX\n */\nexport const BLACKBOX = {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport function create( configuration, optionalBrowser ) {\n   const startChannels = optionalBrowser ? [ createConsoleChannel( optionalBrowser ) ] : [];\n   return new Logger( configuration, startChannels );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * A flexible logger.\n *\n * It is recommended to prefer this logger over `console.log` and friends, at least for any log messages that\n * might make their way into production code. For once, this logger is safe to use across browsers and allows\n * to attach additional channels for routing messages to (i.e. to send them to a server process for\n * persistence). If a browser console is available, messages will be logged to that console using the builtin\n * console channel.\n * For testing, a silent mock for this logger is used, making it simple to test the logging behavior of\n * widgets and activities, while avoiding noisy log messages in the test runner output.\n *\n * All messages produced\n *\n * @constructor\n * @private\n */\nfunction Logger( configuration, channels = [] ) {\n   this.levels = { ...levels, ...configuration.get( 'logging.levels' ) };\n\n   this.queueSize_ = 100;\n   this.channels_ = channels;\n   this.counter_ = 0;\n   this.messageQueue_ = [];\n   this.threshold_ = 0;\n   this.tags_ = {};\n\n   this.levelToName_ = ( levels => {\n      const result = {};\n      forEach( levels, ( level, levelName ) => {\n         this[ levelName.toLowerCase() ] = ( ...args ) => {\n            this.log( level, ...args, BLACKBOX );\n         };\n         result[ level ] = levelName;\n      } );\n      return result;\n   } )( this.levels );\n\n   this.setLogThreshold( configuration.ensure( 'logging.threshold' ) );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message. A message may contain placeholders in the form `[#]` where `#` resembles the index\n * within the list of `replacements`. `replacements` are incrementally counted starting at `0`. If the\n * log level is below the configured log threshold, the message is simply discarded.\n *\n * It is recommended not to use this method directly, but instead one of the short cut methods for the\n * according log level.\n *\n * @param {Number} level\n *    the level for this message\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.log = function( level, message, ...replacements ) {\n   if( level < this.threshold_ ) {\n      return;\n   }\n\n   let blackboxDepth = 0;\n   while( replacements[ replacements.length - 1 ] === BLACKBOX ) {\n      ++blackboxDepth;\n      replacements.pop();\n   }\n\n   const messageObject = {\n      id: this.counter_++,\n      level: this.levelToName_[ level ],\n      text: message,\n      replacements,\n      time: new Date(),\n      tags: this.gatherTags(),\n      sourceInfo: gatherSourceInformation( blackboxDepth + 1 ) // add 1 depth to exclude this function\n   };\n\n   this.channels_.forEach( channel => {\n      channel( messageObject );\n   } );\n\n   if( this.messageQueue_.length === this.queueSize_ ) {\n      this.messageQueue_.shift();\n   }\n   this.messageQueue_.push( messageObject );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `TRACE`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.trace = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `DEBUG`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.debug = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `INFO`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.info = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `WARN`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.warn = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `ERROR`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.error = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Logs a message in log level `FATAL`. See {@link Logger#log} for further information.\n *\n * *Important note*: This method is only available, if no custom log levels were defined via\n * configuration or custom log levels include this method as well.\n *\n * @param {String} message\n *    the message to log\n * @param {...*} replacements\n *    objects that should replace placeholders within the message\n */\nLogger.prototype.fatal = function() {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Adds a new channel to forward log messages to. A channel is called synchronously for every log message\n * and can do whatever necessary to handle the message according to its task. Note that blocking or\n * performance critical actions within a channel should always take place asynchronously to prevent from\n * blocking the application. Ideally a web worker is used for heavier background tasks.\n *\n * Each message is an object having the following properties:\n * - `id`: the unique, ascending id of the log message\n * - `level`: the log level of the message in string representation\n * - `text`: the actual message that was logged\n * - `replacements`: the raw list of replacements passed along the message\n * - `time`: JavaScript Date instance when the message was logged\n * - `tags`: A map of all log tags currently set for the logger\n * - `sourceInfo`: if supported, a map containing `file`, `line` and `char` where the logging took place\n *\n * @param {Function} channel\n *    the log channel to add\n */\nLogger.prototype.addLogChannel = function( channel ) {\n   this.channels_.push( channel );\n   this.messageQueue_.forEach( entry => {\n      channel( entry );\n   } );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Removes a log channel and thus stops sending further messages to it.\n *\n * @param {Function} channel\n *    the log channel to remove\n */\nLogger.prototype.removeLogChannel = function( channel ) {\n   const channelIndex = this.channels_.indexOf( channel );\n   if( channelIndex > -1 ) {\n      this.channels_.splice( channelIndex, 1 );\n   }\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Adds a value for a log tag. If a tag is already known, the value is appended to the existing one using a\n * `;` as separator. Note that no formatting of the value takes place and a non-string value will just have\n * its appropriate `toString` method called.\n *\n * Log tags can be used to mark a set of log messages with a value giving further information on the\n * current logging context. For example laxar sets a tag `'INST'` with a unique-like identifier for the\n * current browser client. If then for example log messages are persisted on a server, messages belonging\n * to the same client can be accumulated.\n *\n * @param {String} tag\n *    the id of the tag to add a value for\n * @param {String} value\n *    the value to add\n */\nLogger.prototype.addTag = function( tag, value ) {\n   assert( tag ).hasType( String ).isNotNull();\n\n   if( !this.tags_[ tag ] ) {\n      this.tags_[ tag ] = [ value ];\n   }\n   else {\n      this.tags_[ tag ].push( value );\n   }\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Sets a value for a log tag. If a tag is already known, the value is overwritten by the given one. Note\n * that no formatting of the value takes place and a non-string value will just have its appropriate\n * `toString` method called. For further information on log tags, see {@link Logger#addTag}.\n *\n * @param {String} tag\n *    the id of the tag to set a value for\n * @param {String} value\n *    the value to set\n */\nLogger.prototype.setTag = function( tag, value ) {\n   assert( tag ).hasType( String ).isNotNull();\n\n   this.tags_[ tag ] = [ value ];\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Removes a log tag. For further information on log tags, see {@link Logger#addTag}.\n *\n * @param {String} tag\n *    the id of the tag to set a value for\n */\nLogger.prototype.removeTag = function( tag ) {\n   assert( tag ).hasType( String ).isNotNull();\n\n   delete this.tags_[ tag ];\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Returns a map of all tags. If there are multiple values for the same tag, their values are concatenated\n * using a `;` as separator. For further information on log tags, see {@link Logger#addTag}.\n *\n * @return {Object}\n *    a mapping from tag to its value(s)\n */\nLogger.prototype.gatherTags = function() {\n   const tags = {};\n   forEach( this.tags_, ( values, tag ) => {\n      tags[ tag ] = values.join( ';' );\n   } );\n   return tags;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Sets the threshold for log messages. Log messages with a lower level will be discarded upon logging.\n *\n * @param {String|Number} threshold\n *    the numeric or the string value of the log level to use as threshold\n */\nLogger.prototype.setLogThreshold = function( threshold ) {\n   if( typeof threshold === 'string' ) {\n      assert.state( threshold.toUpperCase() in this.levels, `Unsupported log threshold \"${threshold}\".` );\n      this.threshold_ = this.levels[ threshold.toUpperCase() ];\n   }\n   else {\n      assert( threshold ).hasType( Number );\n      this.threshold_ = threshold;\n   }\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst EMPTY_CALL_INFORMATION = { file: '?', line: -1, char: -1 };\n\nfunction gatherSourceInformation( blackboxDepth ) {\n   let e = new Error();\n\n   if( !e.stack ) {\n      try {\n         // IE >= 10 only generates a stack if the error object is really thrown\n         throw new Error();\n      }\n      catch( err ) {\n         e = err;\n      }\n      if( !e.stack ) {\n         return EMPTY_CALL_INFORMATION;\n      }\n   }\n\n   const rows = e.stack.split( /[\\n]/ );\n   let interpret;\n   if( rows[ 0 ] === 'Error' ) {\n      rows.shift();\n      interpret = chromeStackInterpreter;\n   }\n   else if( rows[ 0 ].indexOf( '@' ) !== -1 ) {\n      interpret = firefoxStackInterpreter;\n   }\n   else {\n      return EMPTY_CALL_INFORMATION;\n   }\n\n   const row = rows[ blackboxDepth + 1 ]; // add 1 depth to exclude this function\n   return row ? interpret( row ) : EMPTY_CALL_INFORMATION;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst CHROME_AND_IE_STACK_MATCHER = /\\(?([^\\( ]+):(\\d+):(\\d+)\\)?$/;\n\nfunction chromeStackInterpreter( row ) {\n   const match = CHROME_AND_IE_STACK_MATCHER.exec( row );\n   return {\n      file: match ? match[ 1 ] : '?',\n      line: match ? match[ 2 ] : -1,\n      char: match ? match[ 3 ] : -1\n   };\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst FIREFOX_STACK_MATCHER = /@(.+):(\\d+)$/;\n\nfunction firefoxStackInterpreter( row ) {\n   const match = FIREFOX_STACK_MATCHER.exec( row );\n   return {\n      file: match ? match[ 1 ] : '?',\n      line: match ? match[ 2 ] : -1,\n      char: -1\n   };\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport function createConsoleChannel( browser ) {\n\n   return function log( messageObject ) {\n      const browserConsole = browser.console();\n      if( !browserConsole ) { return; }\n\n      const { level, text, replacements, sourceInfo: { file, line } } = messageObject;\n\n      let logMethod = level.toLowerCase();\n      if( !( logMethod in browserConsole ) || logMethod === 'trace' ) {\n         // In console objects trace doesn't define a valid log level but is used to print stack traces. We\n         // thus need to change it something different.\n         logMethod = 'log';\n      }\n\n      if( !( logMethod in browserConsole ) ) {\n         return;\n      }\n\n      const callArgs = [ `${level}: ` ]\n         .concat( mergeTextAndReplacements( text, replacements ) )\n         .concat( [ `(@ ${file}:${line})` ] );\n\n      browserConsole[ logMethod ]( ...callArgs );\n   };\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction mergeTextAndReplacements( text, replacements ) {\n   const parts = [];\n   let pos = 0;\n   let buffer = '';\n\n   while( pos < text.length ) {\n      const character = text.charAt( pos );\n\n      switch( character ) {\n         case '\\\\': {\n            ++pos;\n            if( pos === text.length ) {\n               throw new Error( `Unterminated string: \"${text}\"` );\n            }\n\n            buffer += text.charAt( pos );\n            break;\n         }\n         case '[': {\n            parts.push( buffer );\n            buffer = '';\n\n            const end = text.indexOf( ']', pos );\n            if( end === -1 ) {\n               throw new Error( `Unterminated replacement at character ${pos}: \"${text}\"` );\n            }\n\n            const replacementIndex = parseInt( text.substring( pos + 1, end ), 10 );\n\n            parts.push( replacements[ replacementIndex ] );\n            pos = end;\n\n            break;\n         }\n         default: {\n            buffer += character;\n            break;\n         }\n      }\n\n      ++pos;\n   }\n\n   if( buffer.length > 0 ) {\n      parts.push( buffer );\n   }\n\n   return parts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/log.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the EventBus factory.\n *\n * To use the EventBus in a widget, request the {@link widget_services#axEventBus axEventBus} injection, or\n * use the `eventBus` property on the {@link widget_services#axContext axContext} injection.\n * In some cases, it may be useful to inject the global EventBus instance backing all widget instances of the\n * same bootstrapping context, by requesting the {@link widget_services#axGlobalEventBus axGlobalEventBus}\n * injection.\n *\n * @module event_bus\n */\nimport assert from '../utilities/assert';\nimport * as object from '../utilities/object';\n\nconst WILDCARD = '*';\nconst SUBSCRIBER_FIELD = '.';\n\nconst TOPIC_SEPARATOR = '.';\nconst SUB_TOPIC_SEPARATOR = '-';\nconst REQUEST_MATCHER = /^([^.])([^.]*)Request(\\..+)?$/;\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * @param {Object} configuration\n *    configuration for the event bus instance.\n *    The key `eventBusTimeoutMs` is used to determine the will/did timeout.\n * @param {Object} log\n *    a logger instance for error reporting\n * @param {Function} nextTick\n *    a next tick function like `process.nextTick`, `setImmediate` or AngularJS' `$timeout`\n * @param {Function} timeoutFunction\n *    a timeout function like `window.setTimeout` or AngularJS' `$timeout`\n * @param {Function} [errorHandler]\n *    a custom handler for thrown exceptions. By default exceptions are logged using the global logger.\n *\n * @constructor\n * @private\n */\nfunction EventBus(\n   configuration,\n   log,\n   nextTick,\n   timeoutFunction,\n   errorHandler = createLogErrorHandler( log )\n) {\n   this.nextTick_ = f => nextTick( f );\n   this.timeoutFunction_ = ( f, ms ) => timeoutFunction( f, ms );\n   this.timeoutMs_ = configuration.ensure( 'eventBusTimeoutMs' );\n   this.errorHandler_ = errorHandler;\n\n   this.cycleCounter_ = 0;\n   this.eventQueue_ = [];\n   this.subscriberTree_ = {};\n\n   this.waitingPromiseResolves_ = [];\n   this.currentCycle_ = -1;\n   this.inspectors_ = [];\n   this.log_ = log;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Adds an inspector, that gets notified when certain actions within the event bus take place. Currently\n * these actions may occur:\n *\n * - `subscribe`: a new subscriber registered for an event\n * - `publish`: an event is published but not yet delivered\n * - `deliver`: an event is actually delivered to a subscriber\n *\n * An inspector receives a map with the following properties:\n *\n * - `action`: one of the actions from above\n * - `source`: the origin of the `action`\n * - `target`: the name of the event subscriber (`deliver` action only)\n * - `event`: the full name of the event or the subscribed event (`subscribe` action only)\n * - `eventObject`: the published event item (`publish` action only)\n * - `subscribedTo`: the event, possibly with omissions, the subscriber subscribed to (`deliver` action only)\n * - `cycleId`: the id of the event cycle\n *\n * The function returned by this method can be called to remove the inspector again and prevent it from\n * being called for future event bus actions.\n *\n * @param {Function} inspector\n *    the inspector function to add\n *\n * @return {Function}\n *    a function to remove the inspector\n */\nEventBus.prototype.addInspector = function( inspector ) {\n   assert( inspector ).hasType( Function ).isNotNull();\n\n   this.inspectors_.push( inspector );\n   return function() {\n      const index = this.inspectors_.indexOf( inspector );\n      if( index !== -1 ) {\n         this.inspectors_.splice( index, 1 );\n      }\n   }.bind( this );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Subscribes to an event by name. An event name consists of so called *topics*, where each topic is\n * separated from another by dots (`.`). If a topic is omitted, this is treated as a wildcard. Note that\n * two dots in the middle or one dot at the beginning of an event name must remain, whereas a dot at the\n * end may be omitted. As such every event name has an intrinsic wildcard at its end. For example these are\n * all valid event names:\n *\n * - `some.event`: matches `some.event`, `some.event.again`\n * - `.event`: matches `some.event`, `any.event`, `any.event.again`\n * - `some..event`: matches `some.fancy.event`, `some.special.event`\n *\n * Additionally *subtopics* are supported. Subtopics are fragments of a topic, separated from another by\n * simple dashes (`-`). Here only suffixes of subtopics may be omitted when subscribing. Thus subscribing\n * to `some.event` would match an event published with name `some.event-again` or even\n * `some.event-another.again`.\n *\n * **The subscriber function**\n *\n * When an event is delivered, the subscriber function receives two arguments:\n * The first one is the event object as it was published. If `optionalOptions.clone` yields `true` this is a\n * simple deep copy of the object (note that only properties passing a JSON-(de)serialization remain). If\n * `false` the object is frozen using `Object.freeze` recursively.\n *\n * The second one is a meta object with these properties:\n *\n * - `name`: The name of the event as it actually was published (i.e. without wildcards).\n * - `cycleId`: The id of the cycle the event was published (and delivered) in\n * - `sender`: The id of the event sender, may be `null`.\n * - `initiator`: The id of the initiator of the cycle. Currently not implemented, thus always `null`.\n * - `options`: The options that were passed to `publish` or `publishAndGatherReplies` respectively.\n *\n * @param {String} eventName\n *    the name of the event to subscribe to\n * @param {Function} subscriber\n *    a function to call whenever an event matching `eventName` is published\n * @param {Object} [optionalOptions]\n *    additional options for the subscribe action\n * @param {String} [optionalOptions.subscriber=null]\n *    the id of the subscriber. Default is `null`\n * @param {Boolean} [optionalOptions.clone=true]\n *    if `false` the event will be send frozen to the subscriber, otherwise it will receive a deep copy.\n *    Default is `true`\n *\n * @return {Function}\n *    a function that when called unsubscribes from this subscription again\n */\nEventBus.prototype.subscribe = function( eventName, subscriber, optionalOptions ) {\n   assert( eventName ).hasType( String ).isNotNull();\n   assert( subscriber ).hasType( Function ).isNotNull();\n\n   const options = object.options( optionalOptions, {\n      subscriber: null,\n      clone: true\n   } );\n   const subscriberItem = {\n      name: eventName,\n      subscriber,\n      subscriberName: options.subscriber,\n      subscriptionWeight: calculateSubscriptionWeight( eventName ),\n      options\n   };\n\n   const eventNameParts = eventName.split( TOPIC_SEPARATOR );\n   const node = eventNameParts.reduce( ( node, eventNamePart ) => {\n      const bucketName = eventNamePart || WILDCARD;\n      if( !( bucketName in node ) ) {\n         node[ bucketName ] = {};\n      }\n      return node[ bucketName ];\n   }, this.subscriberTree_ );\n\n   if( !( SUBSCRIBER_FIELD in node ) ) {\n      node[ SUBSCRIBER_FIELD ] = [];\n   }\n   node[ SUBSCRIBER_FIELD ].push( subscriberItem );\n\n   notifyInspectors( this, {\n      action: 'subscribe',\n      source: options.subscriber,\n      target: '-',\n      event: eventName,\n      cycleId: this.currentCycle_\n   } );\n\n   return () => {\n      unsubscribeRecursively( this, this.subscriberTree_, eventNameParts, subscriber );\n   };\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Asynchronously publishes an event on the event bus. The returned promise will be enqueued as soon as this\n * event is delivered and, if during delivery a new event was enqueued, resolved after that new event was\n * delivered. If no new event is published during delivery of this event, the promise is instantly resolved.\n * To make this a bit clearer, lets assume we publish and thus enqueue an event at time `t`. It then will\n * be delivered at time `t+1`. At that precise moment the promise is enqueued to be resolved soon. We then\n * distinguish between two cases:\n *\n * - At time `t+1` no subscriber publishes (i.e. enqueues) an event: Thus there is no event in the same\n *   cycle and the promise is also resolved at time `t+1`.\n * - At least one subscriber publishes an event at time `t+1`: The promise is then scheduled to be resolved\n *   as soon as this event is delivered at time `t+2`.\n *\n * The implication of this is the following:\n *\n * We have two collaborators, A and B. A listens to event b and B listens to event a.\n * Whenever A publishes a and B than instantly (i.e. in the same event cycle of the JavaScript runtime\n * where its subscriber function was called) *responds* by publishing b, b arrives at the subscriber\n * function of A, before the promise of A's publish action is resolved.\n * It is hence possible to observe possible effects of an event sent by oneself, under the conditions\n * mentioned above. Practically this is used internally for the implementation of\n * {@link #EventBus.publishAndGatherReplies()}.\n *\n * @param {String} eventName\n *    the name of the event to publish\n * @param {Object} [optionalEvent]\n *    the event to publish\n * @param {Object} [optionalOptions]\n *    additional options for the publish action\n * @param {String} [optionalOptions.sender=null]\n *    the id of the event sender. Default is `null`\n * @param {Boolean} [optionalOptions.deliverToSender=true]\n *    if `false` the event will not be send to subscribers whose subscriber name matches\n *    `optionalOptions.sender`, else all subscribers will receive the event. Default is `true`\n *\n * @return {Promise}\n  *   the delivery promise\n */\nEventBus.prototype.publish = function( eventName, optionalEvent = {}, optionalOptions = {} ) {\n   assert( eventName ).hasType( String ).isNotNull();\n\n   const event = JSON.parse( JSON.stringify( optionalEvent ) );\n   const options = { deliverToSender: true, sender: null, ...optionalOptions };\n\n   return new Promise( resolve => {\n      const eventItem = {\n         meta: {\n            name: eventName,\n            cycleId: this.currentCycle_ > -1 ? this.currentCycle_ : this.cycleCounter_++,\n            sender: options.sender,\n            initiator: null,\n            options\n         },\n         event,\n         resolvePublish: resolve\n      };\n      enqueueEvent( this, eventItem );\n\n      notifyInspectors( this, {\n         action: 'publish',\n         source: options.sender,\n         target: '-',\n         event: eventName,\n         eventObject: event,\n         cycleId: eventItem.meta.cycleId\n      } );\n   } );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Publishes an event that follows the *request-will-did pattern* and awaits all replies. This pattern has\n * evolved over time and is of great use when handling the asynchronous nature of event bus events.\n *\n * Certain rules need to be fulfilled: First the initiator needs to call this method with an event whose\n * name has the suffix `Request`, e.g. `takeActionRequest`. All collaborators that want to react to this\n * event then either do so in the same event cycle by sending a `didTakeAction` event or announce that they\n * will do something asynchronously by publishing a `willTakeAction` event. In the latter case they need to\n * broadcast the fulfillment of their action some time later by sending a `didTakeAction` event. Note that for\n * both events the same sender name needs to be given. Otherwise they cannot be mapped and the event bus\n * doesn't know if all asynchronous replies were already received.\n *\n * Additionally a timer is started using either the globally configured `pendingDidTimeout` ms value or the\n * value provided as option to this method. If that timer expires before all `did*` events to all given\n * `will*` events were received, the error handler is called to handle the incident and the promise is\n * rejected with all responses received up to now.\n *\n * @param {String} eventName\n *    the name of the event to publish\n * @param {Object} [optionalEvent]\n *    the event to publish\n * @param {Object} [optionalOptions]\n *    additional options for the publish action\n * @param {String} [optionalOptions.sender=null]\n *    the id of the event sender. Default is `null`\n * @param {Number} [optionalOptions.pendingDidTimeout]\n *    the timeout in milliseconds for pending did* events. Default is the timeout option used when the\n *    event bus instance was created\n *\n * @return {Promise}\n *   the delivery promise. It receives a list of all collected `did*` events and according meta information\n */\nEventBus.prototype.publishAndGatherReplies = function( eventName, optionalEvent, optionalOptions ) {\n   assert( eventName ).hasType( String ).isNotNull();\n\n   const matches = REQUEST_MATCHER.exec( eventName );\n   assert.state( !!matches, `Expected eventName to end with \"Request\" but got ${eventName}` );\n\n   const options = { pendingDidTimeout: this.timeoutMs_, ...optionalOptions };\n\n   let eventNameSuffix = matches[ 1 ].toUpperCase() + matches[ 2 ];\n   if( matches[ 3 ] ) {\n      eventNameSuffix += matches[ 3 ];\n   }\n   const deferred = {};\n   deferred.promise = new Promise( ( resolve, reject ) => {\n      deferred.resolve = resolve;\n      deferred.reject = reject;\n   } );\n   const willWaitingForDid = [];\n   const givenDidResponses = [];\n   let cycleFinished = false;\n\n   const unsubscribeWillCollector = this.subscribe( `will${eventNameSuffix}`, ( event, meta ) => {\n      assert( meta.sender ).hasType( String )\n         .isNotNull( 'A response with will to a request-event must contain a sender.' );\n\n      willWaitingForDid.push( meta.sender );\n   }, { subscriber: options.sender } );\n\n   const unsubscribeDidCollector = this.subscribe( `did${eventNameSuffix}`, ( event, meta ) => {\n      givenDidResponses.push( { event, meta } );\n      let senderIndex;\n      do {\n         senderIndex = willWaitingForDid.indexOf( meta.sender );\n         if( senderIndex !== -1 ) {\n            willWaitingForDid.splice( senderIndex, 1 );\n         }\n      } while( senderIndex !== -1 );\n\n      if( willWaitingForDid.length === 0 && cycleFinished ) {\n         finish();\n      }\n   }, { subscriber: options.sender } );\n\n\n   const timeoutRef = this.timeoutFunction_( () => {\n      if( willWaitingForDid.length > 0 ) {\n         const message = `Timeout while waiting for pending did${eventNameSuffix} on ${eventName}.`;\n         this.errorHandler_( message, {\n            'Sender': options.sender,\n            'After ms timeout': options.pendingDidTimeout,\n            'Responses missing from': willWaitingForDid.join( ', ' )\n         } );\n         finish( true );\n      }\n   }, options.pendingDidTimeout );\n\n   this.publish( eventName, optionalEvent, options )\n      .then( () => {\n         unsubscribeWillCollector();\n         if( willWaitingForDid.length === 0 ) {\n            // either there was no will or all did responses were already given in the same cycle as the will\n            finish();\n            return;\n         }\n         cycleFinished = true;\n      } );\n\n   function finish( wasCanceled ) {\n      clearTimeout( timeoutRef );\n      unsubscribeDidCollector();\n      ( wasCanceled ? deferred.reject : deferred.resolve )( givenDidResponses );\n   }\n\n   return deferred.promise;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction enqueueEvent( self, eventItem ) {\n   if( self.eventQueue_.length === 0 ) {\n      self.nextTick_( () => {\n         const queuedEvents = self.eventQueue_;\n\n         self.eventQueue_ = [];\n\n         processWaitingPublishPromises( self, processQueue( self, queuedEvents ) );\n      } );\n   }\n   self.eventQueue_.push( eventItem );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction processQueue( self, queuedEvents ) {\n   return queuedEvents.map( eventItem => {\n      const meta = eventItem.meta;\n      self.currentCycle_ = meta.cycleId;\n\n      const subscribers = findSubscribers( self, meta.name );\n      if( subscribers.length === 0 ) {\n         self.currentCycle_ = -1;\n         return eventItem.resolvePublish;\n      }\n\n      let serializedEvent = null;\n      if( subscribers.length > 1 ) {\n         serializedEvent = JSON.stringify( eventItem.event );\n      }\n\n      const senderName = meta.sender;\n      const options = meta.options;\n\n      subscribers.forEach( subscriberItem => {\n         const subscriberName = subscriberItem.subscriberName;\n         if( !options.deliverToSender && senderName && senderName === subscriberName ) {\n            return;\n         }\n\n         try {\n            let event;\n            if( subscriberItem.options.clone ) {\n               event = serializedEvent ? JSON.parse( serializedEvent ) : eventItem.event;\n            }\n            else {\n               event = eventItem.event;\n            }\n            subscriberItem.subscriber( event, meta );\n         }\n         catch( e ) {\n            const message = `error while calling subscriber \"${subscriberName}\"` +\n               ` for event ${meta.name}` +\n               ` published by \"${senderName}\" (subscribed to: ${subscriberItem.name})`;\n            self.errorHandler_( message, {\n               'Exception': e,\n               'Published event': eventItem.event,\n               'Event meta information': meta,\n               'Caused by Subscriber': subscriberItem\n            } );\n         }\n\n         notifyInspectors( self, {\n            action: 'deliver',\n            source: senderName,\n            target: subscriberName,\n            event: meta.name,\n            eventObject: eventItem.event,\n            subscribedTo: subscriberItem.name,\n            cycleId: meta.cycleId\n         } );\n      } );\n\n      self.currentCycle_ = -1;\n\n      return eventItem.resolvePublish;\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction processWaitingPublishPromises( self, newPromiseResolves ) {\n   const waitingResolves = self.waitingPromiseResolves_;\n   self.waitingPromiseResolves_ = newPromiseResolves;\n\n   waitingResolves.forEach( resolve => resolve() );\n\n   if( self.eventQueue_.length === 0 ) {\n      // nothing was queued by any subscriber. The publishers can instantly be notified of delivery.\n      newPromiseResolves.forEach( resolve => resolve() );\n      self.waitingPromiseResolves_ = [];\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction unsubscribeRecursively( self, node, parts, subscriber ) {\n   if( parts.length === 0 && Array.isArray( node[ SUBSCRIBER_FIELD ] ) ) {\n      const subscribers = node[ SUBSCRIBER_FIELD ];\n      for( let i = subscribers.length - 1; i >= 0; --i ) {\n         if( subscribers[ i ].subscriber === subscriber ) {\n            notifyInspectors( self, {\n               action: 'unsubscribe',\n               source: subscribers[ i ].subscriberName,\n               target: '-',\n               event: subscribers[ i ].name,\n               cycleId: self.currentCycle_\n            } );\n            subscribers.splice( i, 1 );\n         }\n      }\n   }\n\n   const [ part, ...rest ] = parts;\n   const searchPart = part || WILDCARD;\n   if( searchPart in node ) {\n      unsubscribeRecursively( self, node[ searchPart ], rest, subscriber );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction findSubscribers( self, eventName ) {\n   const subscribers = [];\n   const parts = eventName.split( TOPIC_SEPARATOR );\n   const node = self.subscriberTree_;\n\n   findSubscribersRecursively( node, parts, subscribers );\n   subscribers.sort( ( a, b ) => {\n      const aWeight = a.subscriptionWeight;\n      const bWeight = b.subscriptionWeight;\n      if( aWeight[ 0 ] === bWeight[ 0 ] ) {\n         return bWeight[ 1 ] - aWeight[ 1 ];\n      }\n\n      return bWeight[ 0 ] - aWeight[ 0 ];\n   } );\n\n   return subscribers;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction findSubscribersRecursively( node, parts, subscribers ) {\n   if( Array.isArray( node[ SUBSCRIBER_FIELD ] ) ) {\n      subscribers.push( ...node[ SUBSCRIBER_FIELD ] );\n   }\n\n   if( parts.length === 0 ) {\n      return;\n   }\n\n   const [ part, ...remainder ] = parts;\n   if( part.indexOf( SUB_TOPIC_SEPARATOR ) !== -1 ) {\n      let index = part.length;\n      let currentPart = part;\n      do {\n         currentPart = currentPart.substring( 0, index );\n         if( currentPart in node ) {\n            findSubscribersRecursively( node[ currentPart ], remainder, subscribers );\n         }\n         index = currentPart.lastIndexOf( SUB_TOPIC_SEPARATOR );\n      }\n      while( index !== -1 );\n   }\n   else if( part in node ) {\n      findSubscribersRecursively( node[ part ], remainder, subscribers );\n   }\n\n   if( WILDCARD in node ) {\n      findSubscribersRecursively( node[ WILDCARD ], remainder, subscribers );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction calculateSubscriptionWeight( eventName ) {\n   const parts = eventName.split( TOPIC_SEPARATOR );\n   const weight = [ 0, 0 ];\n   parts.forEach( part => {\n      if( part.length > 0 ) {\n         weight[ 0 ]++;\n         weight[ 1 ] += part.split( SUB_TOPIC_SEPARATOR ).length - 1;\n      }\n   } );\n   return weight;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction notifyInspectors( self, infoObject ) {\n   self.inspectors_.forEach( inspector => {\n      inspector( infoObject );\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction createLogErrorHandler( log ) {\n   return ( message, optionalErrorInformation ) => {\n      const sensitiveData = [ 'Published event' ];\n\n      log.error( `EventBus: ${message}` );\n\n      if( optionalErrorInformation ) {\n         object.forEach( optionalErrorInformation, ( info, title ) => {\n            let formatString = '   - [0]: [1:%o]';\n            if( sensitiveData.indexOf( title ) !== -1 ) {\n               formatString = '   - [0]: [1:%o:anonymize]';\n            }\n\n            log.error( formatString, title, info );\n\n            if( info instanceof Error && info.stack ) {\n               log.error( `   - Stacktrace: ${info.stack}` );\n            }\n         } );\n      }\n   };\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates and returns a new event bus instance using the given configuration.\n *\n * @param {Object} configuration\n *    configuration for the event bus instance.\n *    The key `eventBusTimeoutMs` is used to determine the will/did timeout.\n * @param {Object} log\n *    a logger to use for error reporting\n * @param {Function} nextTick\n *    a next tick function like `process.nextTick` or AngularJS' `$timeout`\n * @param {Function} timeoutFunction\n *    a timeout function like `window.setTimeout` or AngularJS' `$timeout`\n * @param {Function} [errorHandler]\n *    a custom handler for thrown exceptions. By default exceptions are logged using the global logger.\n *\n * @return {EventBus}\n *    an event bus instance\n *\n * @private\n */\nexport function create( configuration, log, nextTick, timeoutFunction, errorHandler ) {\n   assert( configuration.ensure ).hasType( Function ).isNotNull();\n   assert( log.error ).hasType( Function ).isNotNull();\n   assert( nextTick ).hasType( Function ).isNotNull();\n   assert( timeoutFunction ).hasType( Function ).isNotNull();\n   assert( errorHandler ).hasType( Function );\n\n   return new EventBus( configuration, log, nextTick, timeoutFunction, errorHandler );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/event_bus.js","/**\n* Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport assert from '../utilities/assert';\nimport { deepClone } from '../utilities/object';\n\nconst NOT_FOUND = { content: null };\n\nexport function create( artifacts, browser, configuration, log ) {\n\n   const baseHref = configuration.get( 'baseHref' );\n\n   const resolve = baseHref ?\n      ( _ => browser.resolve( _, baseHref ) ) :\n      ( _ => _ );\n\n   const [ themeRef, themeName ] = ( themeRef => {\n      const themeIndex = artifacts.aliases.themes[ themeRef ];\n      const theme = artifacts.themes[ themeIndex ];\n      if( !theme ) {\n         log.error( `The configured theme ${themeRef} is not available.` );\n         return [ 'default', 'default.theme' ];\n      }\n      return [ themeRef, theme.descriptor.name ];\n   } )( configuration.ensure( 'theme' ) );\n\n   return {\n      forFlow: makeProvider( 'flows', [ 'descriptor' ], [ 'definition' ] ),\n      forTheme: makeProvider( 'themes', [ 'descriptor', 'assets' ] ).bind( null, themeRef ),\n      forPage: makeProvider( 'pages', [ 'descriptor' ], [ 'definition' ] ),\n      forLayout: makeProvider( 'layouts', [ 'descriptor', 'assets' ] ),\n      forWidget: makeProvider( 'widgets', [ 'descriptor', 'assets', 'module' ] ),\n      forControl: makeProvider( 'controls', [ 'descriptor', 'assets', 'module' ] )\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function makeProvider( bucket, keys = [], cloneKeys = [] ) {\n      return ref => {\n         const api = {};\n         const index = artifacts.aliases[ bucket ][ ref ];\n         const artifactPromise = index === undefined ?\n            Promise.reject( new Error( `Artifact ${ref} not found in ${bucket}` ) ) :\n            Promise.resolve( artifacts[ bucket ][ index ] );\n\n         [ 'definition', 'module', 'descriptor' ].forEach( key => {\n            if( cloneKeys.includes( key ) ) {\n               api[ key ] = () => artifactPromise.then( _ => deepClone( _[ key ] ) );\n            }\n            else if( keys.includes( key ) ) {\n               api[ key ] = () => artifactPromise.then( _ => _[ key ] );\n            }\n         } );\n\n         if( keys.includes( 'assets' ) ) {\n            const lookup = name => {\n               assert( name ).hasType( String ).isNotNull();\n               return ({ assets = {} }) => {\n                  return assets[ name ] || NOT_FOUND;\n               };\n            };\n\n            const lookupForTheme = name => {\n               assert( name ).hasType( String ).isNotNull();\n               return ({ assets = {} }) => {\n                  const themedAssets = assets[ themeName ];\n                  if( themedAssets && themedAssets[ name ] ) {\n                     return themedAssets[ name ];\n                  }\n                  const defaultAssets = assets[ 'default.theme' ];\n                  if( defaultAssets && defaultAssets[ name ] ) {\n                     return defaultAssets[ name ];\n                  }\n                  return NOT_FOUND;\n               };\n            };\n\n            const provide = ({ url, content }) => {\n               if( content == null && url ) {\n                  return browser.fetch( resolve( url ) ).then( _ => _.text() );\n               }\n               return content || null;\n            };\n\n            const provideUrl = ({ url }) => url ? resolve( url ) : null;\n\n            api.asset = name => artifactPromise\n               .then( lookup( name ) )\n               .then( provide );\n\n            api.assetUrl = name => artifactPromise\n               .then( lookup( name ) )\n               .then( provideUrl );\n\n            api.assetForTheme = name => artifactPromise\n               .then( lookupForTheme( name ) )\n               .then( provide );\n\n            api.assetUrlForTheme = name => artifactPromise\n               .then( lookupForTheme( name ) )\n               .then( provideUrl );\n         }\n\n         return api;\n      };\n   }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/artifact_provider.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * The control loader helps to load control assets and implementations.\n *\n * @module control_loader\n */\nimport { format } from '../utilities/string';\n\nexport function create( artifactProvider, cssLoader ) {\n\n   const notDeclaredMessage =\n      'Tried to load control reference [0] without declaration in widget.json.\\nDetails: [1]';\n   const errorInfoLink =\n      'https://github.com/LaxarJS/laxar/blob/master/docs/manuals/providing_controls.md#compatibility';\n\n   const aliases = {};\n   const modules = {};\n\n   /**\n    * @constructor\n    * @name ControlLoader\n    */\n   return {\n      load,\n      provide\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Provides the implementation module of the given control, for manual instantiation by a widget.\n    *\n    * Because the method must return synchronously, it may only be called for controls that have been\n    * loaded before (using {@link #load()})!\n    * For controls that are correctly listed in the `controls` section of the `widget.json`, this is ensured\n    * by the widget loader.\n    *\n    * @param {String} controlRef\n    *   a valid control reference as used in the `widget.json`\n    *\n    * @return {*}\n    *   the module for the requested control reference\n    *\n    * @memberof ControlLoader\n    */\n   function provide( controlRef ) {\n      const module = modules[ aliases[ controlRef ] ];\n      if( !module ) {\n         const message = format( `axControls: ${notDeclaredMessage}`, [ controlRef, errorInfoLink ] );\n         throw new Error( message );\n      }\n      return module;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Fetches the descriptor for a given control reference, and saves it as a side-effect.\n    * This is part of the internal API used by the widget loader.\n    *\n    * This process must be completed before the descriptor or the module for a control can be provided.\n    * For this reason, `load` is called by the widget-loader, using information from the `widget.json` file.\n    *\n    * @param {String} controlRef\n    *   a valid control reference as used in the `widget.json`\n    *\n    * @return {Promise}\n    *   a promise for the (fetched or synthesized) control descriptor\n    *\n    * @memberof ControlLoader\n    */\n   function load( controlRef ) {\n      const { assetUrlForTheme, descriptor, module } = artifactProvider.forControl( controlRef );\n      return Promise.all( [ descriptor(), module() ] )\n         .then( ([ descriptor, module ]) => {\n            const { name } = descriptor;\n            aliases[ controlRef ] = name;\n            modules[ name ] = module;\n            return assetUrlForTheme( descriptor.styleSource || `css/${name}.css` )\n               .then( url => {\n                  if( url ) {\n                     cssLoader.load( url );\n                  }\n               } )\n               .then( () => descriptor );\n         } );\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/control_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\nexport function create() {\n   const mergedCssFileLoaded = Array.from( document.getElementsByTagName( 'link' ) )\n      .some( link => link.hasAttribute( 'data-ax-merged-css' ) );\n\n   if( mergedCssFileLoaded ) {\n      return { load() {} };\n   }\n\n   const loadedFiles = [];\n   return {\n      /**\n       * If not already loaded, loads the given file into the current page by appending a `link` element to\n       * the document's `head` element.\n       *\n       * @param {String} url\n       *    the url of the css file to load. If `null`, loading is skipped\n       */\n      load( url ) {\n         if( !loadedFiles.includes( url ) ) {\n            const element = document.createElement( 'link' );\n            element.type = 'text/css';\n            element.id = `cssLoaderStyleSheet${loadedFiles.length}`;\n            element.rel = 'stylesheet';\n            element.href = url;\n            document.getElementsByTagName( 'head' )[ 0 ].appendChild( element );\n\n            loadedFiles.push( url );\n         }\n      }\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/css_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\nexport function create( artifactProvider, cssLoader ) {\n   return {\n      load( layoutRef ) {\n         const { descriptor, assetForTheme, assetUrlForTheme } = artifactProvider.forLayout( layoutRef );\n         return descriptor()\n            .then( ({ name, templateSource, styleSource }) => Promise.all( [\n               assetForTheme( templateSource || `${name}.html` ),\n               assetUrlForTheme( styleSource || `css/${name}.css` ),\n               Promise.resolve( name )\n            ] ) )\n            .then( ([ html, cssUrl, name ]) => {\n               if( cssUrl ) {\n                  cssLoader.load( cssUrl );\n               }\n               return { name, className: `${name}-layout`, html };\n            } );\n      }\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/layout_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport assert from '../utilities/assert';\nimport * as object from '../utilities/object';\nimport * as string from '../utilities/string';\nimport { create as createJsonValidator } from '../utilities/json_validator';\nimport * as featuresProvider from './features_provider';\nimport pageSchema from 'json!../../static/schemas/page.json';\nimport { FLAT, COMPACT } from '../tooling/pages';\n\nconst SEGMENTS_MATCHER = /[_/-]./g;\n\nconst ID_SEPARATOR = '-';\nconst ID_SEPARATOR_MATCHER = /\\-/g;\nconst SUBTOPIC_SEPARATOR = '+';\n\nconst COMPOSITION_EXPRESSION_MATCHER = /^(!?)\\$\\{([^}]+)\\}$/;\nconst COMPOSITION_TOPIC_PREFIX = 'topic:';\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction PageLoader( artifactProvider, pageCollector ) {\n   this.artifactProvider_ = artifactProvider;\n   this.pageToolingCollector_ = pageCollector;\n   this.idCounter_ = 0;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Loads a page specification and resolves all extension and compositions. The result is a page were all\n * referenced page fragments are merged in to one JavaScript object. As loading of all relevant files is\n * already asynchronous, this method is also asynchronous and thus returns a promise that is either\n * resolved with the constructed page or rejected with a JavaScript `Error` instance.\n *\n * @param {String} pageRef\n *    the page to load. Usually a path relative to the base url, with the `.json` suffix omitted\n *\n * @return {Promise}\n *    the result promise\n *\n * @private\n */\nPageLoader.prototype.load = function( pageRef ) {\n   return loadPageRecursively( this, pageRef, [] );\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction loadPageRecursively( self, pageRef, extensionChain ) {\n   let page;\n\n   if( extensionChain.includes( pageRef ) ) {\n      throwError(\n         { name: pageRef },\n         `Cycle in page extension detected: ${extensionChain.concat( [ pageRef ] ).join( ' -> ' )}`\n      );\n   }\n\n   const { definition, descriptor } = self.artifactProvider_.forPage( pageRef );\n\n   return Promise.all( [ definition(), descriptor() ] )\n      .then( ([ foundPage, descriptor ]) => {\n         validatePage( foundPage, pageRef );\n\n         page = foundPage;\n         page.name = descriptor.name;\n\n         if( !page.areas ) {\n            page.areas = {};\n         }\n      } )\n      .then( () => processExtends( self, page, extensionChain ) )\n      .then( () => {\n         generateMissingIds( self, page );\n         // we need to check ids before and after expanding compositions\n         checkForDuplicateIds( self, page );\n         return processCompositions( self, page, pageRef );\n      } )\n      .then( () => {\n         checkForDuplicateIds( self, page );\n         removeDisabledWidgets( self, page );\n      } )\n      .then( () => {\n         self.pageToolingCollector_.collectPageDefinition( pageRef, page, FLAT );\n         return page;\n      } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Processing inheritance (i.e. the `extends` keyword)\n//\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction processExtends( self, page, extensionChain ) {\n   if( has( page, 'extends' ) ) {\n      return loadPageRecursively( self, page[ 'extends' ], extensionChain.concat( [ page.name ] ) )\n         .then( basePage => {\n            mergePageWithBasePage( page, basePage );\n         } );\n   }\n   return Promise.resolve();\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction mergePageWithBasePage( page, basePage ) {\n   const extendingAreas = page.areas;\n   const mergedPageAreas = object.deepClone( basePage.areas );\n   if( has( basePage, 'layout' ) ) {\n      if( has( page, 'layout' ) ) {\n         throwError( page, string.format( 'Page overwrites layout set by base page \"[name]', basePage ) );\n      }\n      page.layout = basePage.layout;\n   }\n\n   object.forEach( extendingAreas, ( widgets, areaName ) => {\n      if( !( areaName in mergedPageAreas ) ) {\n         mergedPageAreas[ areaName ] = widgets;\n         return;\n      }\n\n      mergeWidgetLists( mergedPageAreas[ areaName ], widgets, page );\n   } );\n\n   page.areas = mergedPageAreas;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Processing compositions\n//\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction processCompositions( self, topPage, topPageRef ) {\n\n   return processNestedCompositions( topPage, null, [] );\n\n   function processNestedCompositions( page, instanceId, compositionChain ) {\n\n      let promise = Promise.resolve();\n\n      object.forEach( page.areas, widgets => {\n         widgets.slice().reverse().forEach( widgetSpec => {\n            if( widgetSpec.enabled === false ) {\n               return;\n            }\n            ensureWidgetSpecHasId( self, widgetSpec );\n\n            if( !has( widgetSpec, 'composition' ) ) {\n               return;\n            }\n            const compositionRef = widgetSpec.composition;\n            if( compositionChain.includes( compositionRef ) ) {\n               const chainString = compositionChain.concat( [ compositionRef ] ).join( ' -> ' );\n               const message = `Cycle in compositions detected: ${chainString}`;\n               throwError( topPage, message );\n            }\n\n            // Compositions must be loaded sequentially, because replacing the widgets in the page needs to\n            // take place in order. Otherwise the order of widgets could be messed up.\n            promise = promise\n               .then( () => self.artifactProvider_.forPage( compositionRef ).definition() )\n               .then( composition => prefixCompositionIds( composition, widgetSpec ) )\n               .then( composition =>\n                  processCompositionExpressions( composition, widgetSpec, message => {\n                     throwError(\n                        { name: page.name },\n                        `Error loading composition \"${compositionRef}\" (id: \"${widgetSpec.id}\"). ${message}`\n                     );\n                  } )\n               )\n               .then( composition => {\n                  const chain = compositionChain.concat( compositionRef );\n                  return processNestedCompositions( composition, widgetSpec.id, chain )\n                     .then( () => {\n                        self.pageToolingCollector_.collectCompositionDefinition(\n                           topPageRef,\n                           widgetSpec.id,\n                           composition,\n                           FLAT\n                        );\n                        return composition;\n                     } );\n               } )\n               .then( composition => {\n                  mergeCompositionAreasWithPageAreas( composition, page, widgets, widgetSpec );\n               } );\n         } );\n      } );\n\n      // now that all IDs have been created, we can store a copy of the page prior to composition expansion\n      if( page === topPage ) {\n         self.pageToolingCollector_.collectPageDefinition( topPageRef, page, COMPACT );\n      }\n      else {\n         self.pageToolingCollector_.collectCompositionDefinition( topPageRef, instanceId, page, COMPACT );\n      }\n\n      return promise;\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction mergeCompositionAreasWithPageAreas( composition, page, widgets, compositionSpec ) {\n   object.forEach( composition.areas, ( compositionAreaWidgets, areaName ) => {\n      if( areaName === '.' ) {\n         insertAfterEntry( widgets, compositionSpec, compositionAreaWidgets );\n         return;\n      }\n\n      if( !( areaName in page.areas ) ) {\n         page.areas[ areaName ] = compositionAreaWidgets;\n         return;\n      }\n\n      mergeWidgetLists( page.areas[ areaName ], compositionAreaWidgets, page );\n   } );\n\n   removeEntry( widgets, compositionSpec );\n\n   function insertAfterEntry( arr, entry, replacements ) {\n      const index = arr.indexOf( entry );\n      arr.splice( index, 0, ...replacements );\n   }\n\n   function removeEntry( arr, entry ) {\n      const index = arr.indexOf( entry );\n      arr.splice( index, 1 );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction prefixCompositionIds( composition, widgetSpec ) {\n   const prefixedAreas = {};\n   object.forEach( composition.areas, ( widgets, areaName ) => {\n      widgets.forEach( widget => {\n         if( has( widget, 'id' ) ) {\n            widget.id = widgetSpec.id + ID_SEPARATOR + widget.id;\n         }\n      } );\n\n      if( areaName.indexOf( '.' ) > 0 ) {\n         // All areas prefixed with a local widget id need to be prefixed as well\n         prefixedAreas[ widgetSpec.id + ID_SEPARATOR + areaName ] = widgets;\n         return;\n      }\n\n      prefixedAreas[ areaName ] = widgets;\n   } );\n   composition.areas = prefixedAreas;\n   return composition;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction processCompositionExpressions( composition, widgetSpec, throwPageError ) {\n   const expressionData = {};\n\n   // feature definitions in compositions may contain generated topics for default resource names or action\n   // topics. As such these are generated before instantiating the composition's features.\n   composition.features = iterateOverExpressions( composition.features || {}, replaceExpression );\n   expressionData.features = featuresProvider.featuresForWidget( composition, widgetSpec, throwPageError );\n\n   if( typeof composition.mergedFeatures === 'object' ) {\n      const mergedFeatures = iterateOverExpressions( composition.mergedFeatures, replaceExpression );\n\n      Object.keys( mergedFeatures ).forEach( featurePath => {\n         const currentValue = object.path( expressionData.features, featurePath, [] );\n         const values = mergedFeatures[ featurePath ];\n         object.setPath( expressionData.features, featurePath, values.concat( currentValue ) );\n      } );\n   }\n\n   composition.areas = iterateOverExpressions( composition.areas, replaceExpression );\n\n   function replaceExpression( subject ) {\n      const matches = subject.match( COMPOSITION_EXPRESSION_MATCHER );\n      if( !matches ) {\n         return subject;\n      }\n\n      const possibleNegation = matches[ 1 ];\n      const expression = matches[ 2 ];\n      let result;\n      if( expression.indexOf( COMPOSITION_TOPIC_PREFIX ) === 0 ) {\n         result = topicFromId( widgetSpec.id ) +\n            SUBTOPIC_SEPARATOR + expression.substr( COMPOSITION_TOPIC_PREFIX.length );\n      }\n      else {\n         result = object.path( expressionData, expression );\n      }\n\n      return typeof result === 'string' && possibleNegation ? possibleNegation + result : result;\n   }\n\n   return composition;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction iterateOverExpressions( obj, replacer ) {\n   if( obj === null ) {\n      return obj;\n   }\n\n   if( Array.isArray( obj ) ) {\n      return obj\n         .map( value => {\n            if( typeof value === 'object' ) {\n               return iterateOverExpressions( value, replacer );\n            }\n\n            return typeof value === 'string' ? replacer( value ) : value;\n         } )\n         .filter( _ => _ !== undefined );\n   }\n\n   const result = {};\n   object.forEach( obj, ( value, key ) => {\n      const replacedKey = replacer( key );\n      if( typeof value === 'object' ) {\n         result[ replacedKey ] = iterateOverExpressions( value, replacer );\n         return;\n      }\n\n      const replacedValue = typeof value === 'string' ? replacer( value ) : value;\n      if( typeof replacedValue !== 'undefined' ) {\n         result[ replacedKey ] = replacedValue;\n      }\n   } );\n\n   return result;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Additional Tasks\n//\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction removeDisabledWidgets( self, page ) {\n   object.forEach( page.areas, ( widgetList, index ) => {\n      page.areas[ index ] = widgetList.filter( widgetSpec => widgetSpec.enabled !== false );\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction checkForDuplicateIds( self, page ) {\n   const idCount = {};\n\n   object.forEach( page.areas, widgetList => {\n      object.forEach( widgetList, widgetSpec => {\n         idCount[ widgetSpec.id ] = idCount[ widgetSpec.id ] ? idCount[ widgetSpec.id ] + 1 : 1;\n      } );\n   } );\n\n   const duplicates = Object.keys( idCount ).filter( widgetId => idCount[ widgetId ] > 1 );\n\n   if( duplicates.length ) {\n      throwError( page, `Duplicate widget/composition ID(s): ${duplicates.join( ', ' )}` );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction generateDefaultWidgetSpecName( widgetSpec ) {\n   return artifactName().replace( SEGMENTS_MATCHER, dashToCamelcase );\n\n   function artifactName() {\n      if( widgetSpec.hasOwnProperty( 'widget' ) ) {\n         return widgetSpec.widget.split( '/' ).pop();\n      }\n      if( widgetSpec.hasOwnProperty( 'composition' ) ) {\n         return widgetSpec.composition;\n      }\n      if( widgetSpec.hasOwnProperty( 'layout' ) ) {\n         return widgetSpec.layout;\n      }\n      // Assume that non-standard items do not require a specific name.\n      return '';\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction ensureWidgetSpecHasId( self, widgetSpec ) {\n   if( widgetSpec.hasOwnProperty( 'id' ) ) {\n      return;\n   }\n   widgetSpec.id = nextId( self, generateDefaultWidgetSpecName( widgetSpec ) );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction generateMissingIds( self, page ) {\n   object.forEach( page.areas, widgetList => {\n      object.forEach( widgetList, widgetSpec => {\n         ensureWidgetSpecHasId( self, widgetSpec );\n      } );\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction validatePage( foundPage, pageName ) {\n   const errors = createJsonValidator( pageSchema ).validate( foundPage );\n   if( errors.length ) {\n      const errorString = errors\n         .reduce( ( errorString, errorItem ) => `${errorString}\\n - ${errorItem.message}`, '' );\n\n      throwError( { name: pageName }, `Schema validation failed: ${errorString}` );\n   }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Common functionality and utility functions\n//\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction mergeWidgetLists( targetList, sourceList, page ) {\n   sourceList.forEach( widgetConfiguration => {\n      if( widgetConfiguration.insertBeforeId ) {\n         for( let i = 0, length = targetList.length; i < length; ++i ) {\n            if( targetList[ i ].id === widgetConfiguration.insertBeforeId ) {\n               targetList.splice( i, 0, widgetConfiguration );\n               return;\n            }\n         }\n\n         throwError( page,\n            string.format(\n               'No id found that matches insertBeforeId value \"[insertBeforeId]\"',\n               widgetConfiguration\n            )\n         );\n      }\n\n      targetList.push( widgetConfiguration );\n   } );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction has( object, what ) {\n   return typeof object[ what ] === 'string' && object[ what ].length;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction nextId( self, prefix ) {\n   return `${prefix}${ID_SEPARATOR}id${self.idCounter_++}`;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction dashToCamelcase( segmentStart ) {\n   return segmentStart.charAt( 1 ).toUpperCase();\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction topicFromId( id ) {\n   return id.replace( ID_SEPARATOR_MATCHER, SUBTOPIC_SEPARATOR ).replace( SEGMENTS_MATCHER, dashToCamelcase );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction throwError( page, message ) {\n   const text = string.format( 'Error loading page \"[name]\": [0]', [ message ], page );\n   throw new Error( text );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates and returns a new page loader instance.\n *\n * @param {ArtifactProvider} artifactProvider\n *    an ArtifactProvider to load application assets\n * @param {PagesCollector} pagesCollector\n *    a tooling collector to consume page and composition information\n *\n * @return {PageLoader}\n *    a page loader instance\n *\n * @private\n */\nexport function create( artifactProvider, pagesCollector ) {\n   assert( artifactProvider ).isNotNull();\n   assert( pagesCollector ).isNotNull();\n\n   return new PageLoader( artifactProvider, pagesCollector );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/page_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * A wrapper around `jjv` and `jjve` for JSON validation.\n * Enhances error messages and adds some other optional convenience.\n *\n * @module json_validator\n * @private\n */\n\nimport jjv from 'jjv';\nimport jjve from 'jjve';\n\nexport const JSON_SCHEMA_V4_URI = 'http://json-schema.org/draft-04/schema#';\n\n/**\n * Creates and returns a new JSON validator for schema draft version 4.\n * Version detection for v4 takes place by checking if the `$schema` property of the root schema equals the\n * uri `http://json-schema.org/draft-04/schema#`.\n * Missing or other values for `$schema` will lead to an error.\n *\n * It returns an object with `validate` function, accepting the object to validate against the `jsonSchema`,\n * and it returns an array containing all errors found.\n * If the array is empty, no errors were found.\n * If `optionalOptions.useDefault` was set to `true`, calling `valdate` will modify the argument object by\n * adding missing default values.\n *\n * @param {Object} jsonSchema\n *    the JSON schema to use when validating\n * @param {Object} [optionalOptions]\n *    an optional set of options\n * @param {Boolean} [optionalOptions.prohibitAdditionalProperties=false]\n *    sets additionalProperties to false if not defined otherwise for the according object schema\n * @param {Boolean} [optionalOptions.checkRequired=true]\n *    (jjv option) if `true` it reports missing required properties, otherwise it allows missing\n *    required properties. Default is `true`\n * @param {Boolean} [optionalOptions.useDefault=false]\n *    (jjv option) If true it modifies the validated object to have the default values for missing\n *    non-required fields. Default is `false`\n * @param {Boolean} [optionalOptions.useCoerce=false]\n *    (jjv option) if `true` it enables type coercion where defined. Default is `false`\n * @param {Boolean} [optionalOptions.removeAdditional=false]\n *    (jjv option) if `true` it removes all attributes of an object which are not matched by the\n *    schema's specification. Default is `false`\n *\n * @return {Object}\n *    a new instance of JsonValidator\n */\nexport function create( jsonSchema, optionalOptions = {} ) {\n\n   const env = jjv();\n   const options = {\n      prohibitAdditionalProperties: false,\n      ...optionalOptions\n   };\n   Object.assign( env.defaultOptions, options );\n\n   if( !( '$schema' in jsonSchema ) ) {\n      throw new Error( 'Missing schema version. Use the $schema property to define it.' );\n   }\n\n   if( jsonSchema.$schema !== JSON_SCHEMA_V4_URI ) {\n      throw new Error(\n         `Unsupported schema version \"${jsonSchema.$schema}\". Only V4 is supported: \"${JSON_SCHEMA_V4_URI}\".`\n      );\n   }\n\n   if( options.prohibitAdditionalProperties ) {\n      prohibitAdditionalProperties( jsonSchema );\n   }\n\n   const origValidate = env.validate;\n\n   env.validate = object => {\n      const result = origValidate.call( env, jsonSchema, object );\n      return !result ? [] : jjve( env )( jsonSchema, object, result )\n         .map( err => ({ ...err, message: `${err.message}. Path: \"${err.path}\".` }) );\n   };\n\n   return env;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction prohibitAdditionalProperties( schema ) {\n   if( ( 'properties' in schema || 'patternProperties' in schema ) &&\n   !( 'additionalProperties' in schema ) ) {\n      schema.additionalProperties = false;\n   }\n\n   if( 'properties' in schema ) {\n      Object.keys( schema.properties ).forEach( name => {\n         prohibitAdditionalProperties( schema.properties[ name ] );\n      } );\n   }\n\n   if( 'additionalProperties' in schema && typeof schema.additionalProperties === 'object' ) {\n      prohibitAdditionalProperties( schema.additionalProperties );\n   }\n\n   if( 'patternProperties' in schema ) {\n      Object.keys( schema.patternProperties ).forEach( pattern => {\n         prohibitAdditionalProperties( schema.patternProperties[ pattern ] );\n      } );\n   }\n\n   if( 'items' in schema ) {\n      prohibitAdditionalProperties( schema.items );\n   }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/utilities/json_validator.js","module.exports = require('./lib/jjv.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jjv/index.js\n// module id = 55\n// module chunks = 0 1","/* jshint proto: true */\n\n/**\n * jjv.js -- A javascript library to validate json input through a json-schema.\n *\n * Copyright (c) 2013 Alex Cornejo.\n *\n * Redistributable under a MIT-style open source license.\n */\n\n(function () {\n  var clone = function (obj) {\n      // Handle the 3 simple types (string, number, function), and null or undefined\n      if (obj === null || typeof obj !== 'object') return obj;\n      var copy;\n\n      // Handle Date\n      if (obj instanceof Date) {\n          copy = new Date();\n          copy.setTime(obj.getTime());\n          return copy;\n      }\n\n      // handle RegExp\n      if (obj instanceof RegExp) {\n        copy = new RegExp(obj);\n        return copy;\n      }\n\n      // Handle Array\n      if (obj instanceof Array) {\n          copy = [];\n          for (var i = 0, len = obj.length; i < len; i++)\n              copy[i] = clone(obj[i]);\n          return copy;\n      }\n\n      // Handle Object\n      if (obj instanceof Object) {\n          copy = {};\n//           copy = Object.create(Object.getPrototypeOf(obj));\n          for (var attr in obj) {\n              if (obj.hasOwnProperty(attr))\n                copy[attr] = clone(obj[attr]);\n          }\n          return copy;\n      }\n\n      throw new Error(\"Unable to clone object!\");\n  };\n\n  var clone_stack = function (stack) {\n    var new_stack = [ clone(stack[0]) ], key = new_stack[0].key, obj = new_stack[0].object;\n    for (var i = 1, len = stack.length; i< len; i++) {\n      obj = obj[key];\n      key = stack[i].key;\n      new_stack.push({ object: obj, key: key });\n    }\n    return new_stack;\n  };\n\n  var copy_stack = function (new_stack, old_stack) {\n    var stack_last = new_stack.length-1, key = new_stack[stack_last].key;\n    old_stack[stack_last].object[key] = new_stack[stack_last].object[key];\n  };\n\n  var handled = {\n    'type': true,\n    'not': true,\n    'anyOf': true,\n    'allOf': true,\n    'oneOf': true,\n    '$ref': true,\n    '$schema': true,\n    'id': true,\n    'exclusiveMaximum': true,\n    'exclusiveMininum': true,\n    'properties': true,\n    'patternProperties': true,\n    'additionalProperties': true,\n    'items': true,\n    'additionalItems': true,\n    'required': true,\n    'default': true,\n    'title': true,\n    'description': true,\n    'definitions': true,\n    'dependencies': true\n  };\n\n  var fieldType = {\n    'null': function (x) {\n      return x === null;\n    },\n    'string': function (x) {\n      return typeof x === 'string';\n    },\n    'boolean': function (x) {\n      return typeof x === 'boolean';\n    },\n    'number': function (x) {\n      // Use x === x instead of !isNaN(x) for speed\n      return typeof x === 'number' && x === x;\n    },\n    'integer': function (x) {\n      return typeof x === 'number' && x%1 === 0;\n    },\n    'object': function (x) {\n      return x && typeof x === 'object' && !Array.isArray(x);\n    },\n    'array': function (x) {\n      return Array.isArray(x);\n    },\n    'date': function (x) {\n      return x instanceof Date;\n    }\n  };\n\n  // missing: uri, date-time, ipv4, ipv6\n  var fieldFormat = {\n    'alpha': function (v) {\n      return (/^[a-zA-Z]+$/).test(v);\n    },\n    'alphanumeric': function (v) {\n      return (/^[a-zA-Z0-9]+$/).test(v);\n    },\n    'identifier': function (v) {\n      return (/^[-_a-zA-Z0-9]+$/).test(v);\n    },\n    'hexadecimal': function (v) {\n      return (/^[a-fA-F0-9]+$/).test(v);\n    },\n    'numeric': function (v) {\n      return (/^[0-9]+$/).test(v);\n    },\n    'date-time': function (v) {\n      return !isNaN(Date.parse(v)) && v.indexOf('/') === -1;\n    },\n    'uppercase': function (v) {\n      return v === v.toUpperCase();\n    },\n    'lowercase': function (v) {\n      return v === v.toLowerCase();\n    },\n    'hostname': function (v) {\n      return v.length < 256 && (/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])(\\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]))*$/).test(v);\n    },\n    'uri': function (v) {\n      return (/[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/).test(v);\n    },\n    'email': function (v) { // email, ipv4 and ipv6 adapted from node-validator\n      return (/^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/).test(v);\n    },\n    'ipv4': function (v) {\n      if ((/^(\\d?\\d?\\d)\\.(\\d?\\d?\\d)\\.(\\d?\\d?\\d)\\.(\\d?\\d?\\d)$/).test(v)) {\n        var parts = v.split('.').sort();\n        if (parts[3] <= 255)\n          return true;\n      }\n      return false;\n    },\n    'ipv6': function(v) {\n      return (/^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/).test(v);\n     /*  return (/^::|^::1|^([a-fA-F0-9]{1,4}::?){1,7}([a-fA-F0-9]{1,4})$/).test(v); */\n    }\n  };\n\n  var fieldValidate = {\n    'readOnly': function (v, p) {\n      return false;\n    },\n    // ****** numeric validation ********\n    'minimum': function (v, p, schema) {\n      return !(v < p || schema.exclusiveMinimum && v <= p);\n    },\n    'maximum': function (v, p, schema) {\n      return !(v > p || schema.exclusiveMaximum && v >= p);\n    },\n    'multipleOf': function (v, p) {\n      return (v/p)%1 === 0 || typeof v !== 'number';\n    },\n    // ****** string validation ******\n    'pattern': function (v, p) {\n      if (typeof v !== 'string')\n        return true;\n      var pattern, modifiers;\n      if (typeof p === 'string')\n        pattern=p;\n      else {\n        pattern=p[0];\n        modifiers=p[1];\n      }\n      var regex = new RegExp(pattern, modifiers);\n      return regex.test(v);\n    },\n    'minLength': function (v, p) {\n      return v.length >= p || typeof v !== 'string';\n    },\n    'maxLength': function (v, p) {\n      return v.length <= p || typeof v !== 'string';\n    },\n    // ***** array validation *****\n    'minItems': function (v, p) {\n      return v.length >= p || !Array.isArray(v);\n    },\n    'maxItems': function (v, p) {\n      return v.length <= p || !Array.isArray(v);\n    },\n    'uniqueItems': function (v, p) {\n      var hash = {}, key;\n      for (var i = 0, len = v.length; i < len; i++) {\n        key = JSON.stringify(v[i]);\n        if (hash.hasOwnProperty(key))\n          return false;\n        else\n          hash[key] = true;\n      }\n      return true;\n    },\n    // ***** object validation ****\n    'minProperties': function (v, p) {\n      if (typeof v !== 'object')\n        return true;\n      var count = 0;\n      for (var attr in v) if (v.hasOwnProperty(attr)) count = count + 1;\n      return count >= p;\n    },\n    'maxProperties': function (v, p) {\n      if (typeof v !== 'object')\n        return true;\n      var count = 0;\n      for (var attr in v) if (v.hasOwnProperty(attr)) count = count + 1;\n      return count <= p;\n    },\n    // ****** all *****\n    'constant': function (v, p) {\n      return JSON.stringify(v) == JSON.stringify(p);\n    },\n    'enum': function (v, p) {\n      var i, len, vs;\n      if (typeof v === 'object') {\n        vs = JSON.stringify(v);\n        for (i = 0, len = p.length; i < len; i++)\n          if (vs === JSON.stringify(p[i]))\n            return true;\n      } else {\n        for (i = 0, len = p.length; i < len; i++)\n          if (v === p[i])\n            return true;\n      }\n      return false;\n    }\n  };\n\n  var normalizeID = function (id) {\n    return id.indexOf(\"://\") === -1 ? id : id.split(\"#\")[0];\n  };\n\n  var resolveURI = function (env, schema_stack, uri) {\n    var curschema, components, hash_idx, name;\n\n    hash_idx = uri.indexOf('#');\n\n    if (hash_idx === -1) {\n      if (!env.schema.hasOwnProperty(uri))\n        return null;\n      return [env.schema[uri]];\n    }\n\n    if (hash_idx > 0) {\n      name = uri.substr(0, hash_idx);\n      uri = uri.substr(hash_idx+1);\n      if (!env.schema.hasOwnProperty(name)) {\n        if (schema_stack && schema_stack[0].id === name)\n          schema_stack = [schema_stack[0]];\n        else\n          return null;\n      } else\n        schema_stack = [env.schema[name]];\n    } else {\n      if (!schema_stack)\n        return null;\n      uri = uri.substr(1);\n    }\n\n    if (uri === '')\n      return [schema_stack[0]];\n\n    if (uri.charAt(0) === '/') {\n      uri = uri.substr(1);\n      curschema = schema_stack[0];\n      components = uri.split('/');\n      while (components.length > 0) {\n        if (!curschema.hasOwnProperty(components[0]))\n          return null;\n        curschema = curschema[components[0]];\n        schema_stack.push(curschema);\n        components.shift();\n      }\n      return schema_stack;\n    } else // FIX: should look for subschemas whose id matches uri\n      return null;\n  };\n\n  var resolveObjectRef = function (object_stack, uri) {\n    var components, object, last_frame = object_stack.length-1, skip_frames, frame, m = /^(\\d+)/.exec(uri);\n\n    if (m) {\n      uri = uri.substr(m[0].length);\n      skip_frames = parseInt(m[1], 10);\n      if (skip_frames < 0 || skip_frames > last_frame)\n        return;\n      frame = object_stack[last_frame-skip_frames];\n      if (uri === '#')\n        return frame.key;\n    } else\n      frame = object_stack[0];\n\n    object = frame.object[frame.key];\n\n    if (uri === '')\n      return object;\n\n    if (uri.charAt(0) === '/') {\n      uri = uri.substr(1);\n      components = uri.split('/');\n      while (components.length > 0) {\n        components[0] = components[0].replace(/~1/g, '/').replace(/~0/g, '~');\n        if (!object.hasOwnProperty(components[0]))\n          return;\n        object = object[components[0]];\n        components.shift();\n      }\n      return object;\n    } else\n      return;\n  };\n\n  var checkValidity = function (env, schema_stack, object_stack, options) {\n    var i, len, count, hasProp, hasPattern;\n    var p, v, malformed = false, objerrs = {}, objerr, props, matched;\n    var sl = schema_stack.length-1, schema = schema_stack[sl], new_stack;\n    var ol = object_stack.length-1, object = object_stack[ol].object, name = object_stack[ol].key, prop = object[name];\n    var errCount, minErrCount;\n\n    if (schema.hasOwnProperty('$ref')) {\n      schema_stack= resolveURI(env, schema_stack, schema.$ref);\n      if (!schema_stack)\n        return {'$ref': schema.$ref};\n      else\n        return checkValidity(env, schema_stack, object_stack, options);\n    }\n\n    if (schema.hasOwnProperty('type')) {\n      if (typeof schema.type === 'string') {\n        if (options.useCoerce && env.coerceType.hasOwnProperty(schema.type))\n          prop = object[name] = env.coerceType[schema.type](prop);\n        if (!env.fieldType[schema.type](prop))\n          return {'type': schema.type};\n      } else {\n        malformed = true;\n        for (i = 0, len = schema.type.length; i < len && malformed; i++)\n          if (env.fieldType[schema.type[i]](prop))\n            malformed = false;\n        if (malformed)\n          return {'type': schema.type};\n      }\n    }\n\n    if (schema.hasOwnProperty('allOf')) {\n      for (i = 0, len = schema.allOf.length; i < len; i++) {\n        objerr = checkValidity(env, schema_stack.concat(schema.allOf[i]), object_stack, options);\n        if (objerr)\n          return objerr;\n      }\n    }\n\n    if (!options.useCoerce && !options.useDefault && !options.removeAdditional) {\n      if (schema.hasOwnProperty('oneOf')) {\n        minErrCount = Infinity;\n        for (i = 0, len = schema.oneOf.length, count = 0; i < len; i++) {\n          objerr = checkValidity(env, schema_stack.concat(schema.oneOf[i]), object_stack, options);\n          if (!objerr) {\n            count = count + 1;\n            if (count > 1)\n              break;\n          } else {\n            errCount = objerr.schema ? Object.keys(objerr.schema).length : 1;\n            if (errCount < minErrCount) {\n                minErrCount = errCount;\n                objerrs = objerr;\n            }\n          }\n        }\n        if (count > 1)\n          return {'oneOf': true};\n        else if (count < 1)\n          return objerrs;\n        objerrs = {};\n      }\n\n      if (schema.hasOwnProperty('anyOf')) {\n        objerrs = null;\n        minErrCount = Infinity;\n        for (i = 0, len = schema.anyOf.length; i < len; i++) {\n          objerr = checkValidity(env, schema_stack.concat(schema.anyOf[i]), object_stack, options);\n          if (!objerr) {\n            objerrs = null;\n            break;\n          }\n          else {\n            errCount = objerr.schema ? Object.keys(objerr.schema).length : 1;\n            if (errCount < minErrCount) {\n                minErrCount = errCount;\n                objerrs = objerr;\n            }\n          }\n        }\n        if (objerrs)\n          return objerrs;\n      }\n\n      if (schema.hasOwnProperty('not')) {\n        objerr = checkValidity(env, schema_stack.concat(schema.not), object_stack, options);\n        if (!objerr)\n          return {'not': true};\n      }\n    } else {\n      if (schema.hasOwnProperty('oneOf')) {\n        minErrCount = Infinity;\n        for (i = 0, len = schema.oneOf.length, count = 0; i < len; i++) {\n          new_stack = clone_stack(object_stack);\n          objerr = checkValidity(env, schema_stack.concat(schema.oneOf[i]), new_stack, options);\n          if (!objerr) {\n            count = count + 1;\n            if (count > 1)\n              break;\n            else\n              copy_stack(new_stack, object_stack);\n          } else {\n            errCount = objerr.schema ? Object.keys(objerr.schema).length : 1;\n            if (errCount < minErrCount) {\n                minErrCount = errCount;\n                objerrs = objerr;\n            }\n          }\n        }\n        if (count > 1)\n          return {'oneOf': true};\n        else if (count < 1)\n          return objerrs;\n        objerrs = {};\n      }\n\n      if (schema.hasOwnProperty('anyOf')) {\n        objerrs = null;\n        minErrCount = Infinity;\n        for (i = 0, len = schema.anyOf.length; i < len; i++) {\n          new_stack = clone_stack(object_stack);\n          objerr = checkValidity(env, schema_stack.concat(schema.anyOf[i]), new_stack, options);\n          if (!objerr) {\n            copy_stack(new_stack, object_stack);\n            objerrs = null;\n            break;\n          }\n          else {\n            errCount = objerr.schema ? Object.keys(objerr.schema).length : 1;\n            if (errCount < minErrCount) {\n                minErrCount = errCount;\n                objerrs = objerr;\n            }\n          }\n        }\n        if (objerrs)\n          return objerrs;\n      }\n\n      if (schema.hasOwnProperty('not')) {\n        new_stack = clone_stack(object_stack);\n        objerr = checkValidity(env, schema_stack.concat(schema.not), new_stack, options);\n        if (!objerr)\n          return {'not': true};\n      }\n    }\n\n    if (schema.hasOwnProperty('dependencies')) {\n      for (p in schema.dependencies)\n        if (schema.dependencies.hasOwnProperty(p) && prop.hasOwnProperty(p)) {\n          if (Array.isArray(schema.dependencies[p])) {\n            for (i = 0, len = schema.dependencies[p].length; i < len; i++)\n              if (!prop.hasOwnProperty(schema.dependencies[p][i])) {\n                return {'dependencies': true};\n              }\n          } else {\n            objerr = checkValidity(env, schema_stack.concat(schema.dependencies[p]), object_stack, options);\n            if (objerr)\n              return objerr;\n          }\n        }\n    }\n\n    if (!Array.isArray(prop)) {\n      props = [];\n      objerrs = {};\n      for (p in prop)\n        if (prop.hasOwnProperty(p))\n          props.push(p);\n\n      if (options.checkRequired && schema.required) {\n        for (i = 0, len = schema.required.length; i < len; i++)\n          if (!prop.hasOwnProperty(schema.required[i])) {\n            objerrs[schema.required[i]] = {'required': true};\n            malformed = true;\n          }\n      }\n\n      hasProp = schema.hasOwnProperty('properties');\n      hasPattern = schema.hasOwnProperty('patternProperties');\n      if (hasProp || hasPattern) {\n        i = props.length;\n        while (i--) {\n          matched = false;\n          if (hasProp && schema.properties.hasOwnProperty(props[i])) {\n            matched = true;\n            objerr = checkValidity(env, schema_stack.concat(schema.properties[props[i]]), object_stack.concat({object: prop, key: props[i]}), options);\n            if (objerr !== null) {\n              objerrs[props[i]] = objerr;\n              malformed = true;\n            }\n          }\n          if (hasPattern) {\n            for (p in schema.patternProperties)\n              if (schema.patternProperties.hasOwnProperty(p) && props[i].match(p)) {\n                matched = true;\n                objerr = checkValidity(env, schema_stack.concat(schema.patternProperties[p]), object_stack.concat({object: prop, key: props[i]}), options);\n                if (objerr !== null) {\n                  objerrs[props[i]] = objerr;\n                  malformed = true;\n                }\n              }\n          }\n          if (matched)\n            props.splice(i, 1);\n        }\n      }\n\n      if (options.useDefault && hasProp && !malformed) {\n        for (p in schema.properties)\n          if (schema.properties.hasOwnProperty(p) && !prop.hasOwnProperty(p) && schema.properties[p].hasOwnProperty('default'))\n            prop[p] = schema.properties[p]['default'];\n      }\n\n      if (options.removeAdditional && hasProp && schema.additionalProperties !== true && typeof schema.additionalProperties !== 'object') {\n        for (i = 0, len = props.length; i < len; i++)\n          delete prop[props[i]];\n      } else {\n        if (schema.hasOwnProperty('additionalProperties')) {\n          if (typeof schema.additionalProperties === 'boolean') {\n            if (!schema.additionalProperties) {\n              for (i = 0, len = props.length; i < len; i++) {\n                objerrs[props[i]] = {'additional': true};\n                malformed = true;\n              }\n            }\n          } else {\n            for (i = 0, len = props.length; i < len; i++) {\n              objerr = checkValidity(env, schema_stack.concat(schema.additionalProperties), object_stack.concat({object: prop, key: props[i]}), options);\n              if (objerr !== null) {\n                objerrs[props[i]] = objerr;\n                malformed = true;\n              }\n            }\n          }\n        }\n      }\n      if (malformed)\n        return {'schema': objerrs};\n    } else {\n      if (schema.hasOwnProperty('items')) {\n        if (Array.isArray(schema.items)) {\n          for (i = 0, len = schema.items.length; i < len; i++) {\n            objerr = checkValidity(env, schema_stack.concat(schema.items[i]), object_stack.concat({object: prop, key: i}), options);\n            if (objerr !== null) {\n              objerrs[i] = objerr;\n              malformed = true;\n            }\n          }\n          if (prop.length > len && schema.hasOwnProperty('additionalItems')) {\n            if (typeof schema.additionalItems === 'boolean') {\n              if (!schema.additionalItems)\n                return {'additionalItems': true};\n            } else {\n              for (i = len, len = prop.length; i < len; i++) {\n                objerr = checkValidity(env, schema_stack.concat(schema.additionalItems), object_stack.concat({object: prop, key: i}), options);\n                if (objerr !== null) {\n                  objerrs[i] = objerr;\n                  malformed = true;\n                }\n              }\n            }\n          }\n        } else {\n          for (i = 0, len = prop.length; i < len; i++) {\n            objerr = checkValidity(env, schema_stack.concat(schema.items), object_stack.concat({object: prop, key: i}), options);\n            if (objerr !== null) {\n              objerrs[i] = objerr;\n              malformed = true;\n            }\n          }\n        }\n      } else if (schema.hasOwnProperty('additionalItems')) {\n        if (typeof schema.additionalItems !== 'boolean') {\n          for (i = 0, len = prop.length; i < len; i++) {\n            objerr = checkValidity(env, schema_stack.concat(schema.additionalItems), object_stack.concat({object: prop, key: i}), options);\n            if (objerr !== null) {\n              objerrs[i] = objerr;\n              malformed = true;\n            }\n          }\n        }\n      }\n      if (malformed)\n        return {'schema': objerrs};\n    }\n\n    for (v in schema) {\n      if (schema.hasOwnProperty(v) && !handled.hasOwnProperty(v)) {\n        if (v === 'format') {\n          if (env.fieldFormat.hasOwnProperty(schema[v]) && !env.fieldFormat[schema[v]](prop, schema, object_stack, options)) {\n            objerrs[v] = true;\n            malformed = true;\n          }\n        } else {\n          if (env.fieldValidate.hasOwnProperty(v) && !env.fieldValidate[v](prop, schema[v].hasOwnProperty('$data') ? resolveObjectRef(object_stack, schema[v].$data) : schema[v], schema, object_stack, options)) {\n            objerrs[v] = true;\n            malformed = true;\n          }\n        }\n      }\n    }\n\n    if (malformed)\n      return objerrs;\n    else\n      return null;\n  };\n\n  var defaultOptions = {\n    useDefault: false,\n    useCoerce: false,\n    checkRequired: true,\n    removeAdditional: false\n  };\n\n  function Environment() {\n    if (!(this instanceof Environment))\n      return new Environment();\n\n    this.coerceType = {};\n    this.fieldType = clone(fieldType);\n    this.fieldValidate = clone(fieldValidate);\n    this.fieldFormat = clone(fieldFormat);\n    this.defaultOptions = clone(defaultOptions);\n    this.schema = {};\n  }\n\n  Environment.prototype = {\n    validate: function (name, object, options) {\n      var schema_stack = [name], errors = null, object_stack = [{object: {'__root__': object}, key: '__root__'}];\n\n      if (typeof name === 'string') {\n        schema_stack = resolveURI(this, null, name);\n        if (!schema_stack)\n          throw new Error('jjv: could not find schema \\'' + name + '\\'.');\n      }\n\n      if (!options) {\n        options = this.defaultOptions;\n      } else {\n        for (var p in this.defaultOptions)\n          if (this.defaultOptions.hasOwnProperty(p) && !options.hasOwnProperty(p))\n            options[p] = this.defaultOptions[p];\n      }\n\n      errors = checkValidity(this, schema_stack, object_stack, options);\n\n      if (errors)\n        return {validation: errors.hasOwnProperty('schema') ? errors.schema : errors};\n      else\n        return null;\n    },\n\n    resolveRef: function (schema_stack, $ref) {\n      return resolveURI(this, schema_stack, $ref);\n    },\n\n    addType: function (name, func) {\n      this.fieldType[name] = func;\n    },\n\n    addTypeCoercion: function (type, func) {\n      this.coerceType[type] = func;\n    },\n\n    addCheck: function (name, func) {\n      this.fieldValidate[name] = func;\n    },\n\n    addFormat: function (name, func) {\n      this.fieldFormat[name] = func;\n    },\n\n    addSchema: function (name, schema) {\n      if (!schema && name) {\n        schema = name;\n        name = undefined;\n      }\n      if (schema.hasOwnProperty('id') && typeof schema.id === 'string' && schema.id !== name) {\n        if (schema.id.charAt(0) === '/')\n          throw new Error('jjv: schema id\\'s starting with / are invalid.');\n        this.schema[normalizeID(schema.id)] = schema;\n      } else if (!name) {\n        throw new Error('jjv: schema needs either a name or id attribute.');\n      }\n      if (name)\n        this.schema[normalizeID(name)] = schema;\n    }\n  };\n\n  // Export for use in server and client.\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Environment;\n  else if (typeof define === 'function' && define.amd)\n    define(function () {return Environment;});\n  else\n    this.jjv = Environment;\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jjv/lib/jjv.js\n// module id = 56\n// module chunks = 0 1","(function() {\n  'use strict';\n\n  function make(o) {\n    var errors = [];\n\n    var keys = Object.keys(o.validation);\n\n    // when we're on a leaf node we need to handle the validation errors,\n    // otherwise we continue walking\n    var leaf = keys.every(function(key) {\n      return typeof o.validation[key] !== 'object' ||\n        isArray(o.validation[key]);\n    });\n\n    if (leaf) {\n      // step through each validation issue\n      // example: { required: true }\n      keys.forEach(function(key) {\n        var error, properties;\n        try {\n          switch (key) {\n            case 'type':\n              var type = typeof o.data;\n\n              // further discover types\n              if (type === 'number' && ('' + o.data).match(/^\\d+$/)) {\n                type = 'integer';\n              } else if (type === 'object' && Array.isArray(o.data)) {\n                type = 'array';\n              }\n\n              // the value of type is the required type (ex: { type: 'string' })\n              error = {\n                code: 'INVALID_TYPE',\n                message: 'Invalid type: ' + type + ' should be ' +\n                         (isArray(o.validation[key]) ?  'one of ' :  '') +\n                          o.validation[key]\n              };\n\n              break;\n            case 'required':\n              properties = o.ns;\n\n              error = {\n                code: 'OBJECT_REQUIRED',\n                message: 'Missing required property: ' +\n                         properties[properties.length - 1]\n              };\n\n              break;\n            case 'minimum':\n              error = {\n                code: 'MINIMUM',\n                message: 'Value ' + o.data + ' is less than minimum ' +\n                         o.schema.minimum\n              };\n\n              break;\n            case 'maximum':\n              error = {\n                code: 'MAXIMUM',\n                message: 'Value ' + o.data + ' is greater than maximum ' +\n                         o.schema.maximum\n              };\n\n              break;\n            case 'multipleOf':\n              error = {\n                code: 'MULTIPLE_OF',\n                message: 'Value ' + o.data + ' is not a multiple of ' +\n                         o.schema.multipleOf\n              };\n\n              break;\n            case 'pattern':\n              error = {\n                code: 'PATTERN',\n                message: 'String does not match pattern: ' + o.schema.pattern\n              };\n\n              break;\n            case 'minLength':\n              error = {\n                code: 'MIN_LENGTH',\n                message: 'String is too short (' + o.data.length + ' chars), ' +\n                         'minimum ' + o.schema.minLength\n              };\n\n              break;\n            case 'maxLength':\n              error = {\n                code: 'MAX_LENGTH',\n                message: 'String is too long (' + o.data.length + ' chars), ' +\n                         'maximum ' + o.schema.maxLength\n              };\n\n              break;\n            case 'minItems':\n              error = {\n                code: 'ARRAY_LENGTH_SHORT',\n                message: 'Array is too short (' + o.data.length + '), ' +\n                         'minimum ' + o.schema.minItems\n              };\n\n              break;\n            case 'maxItems':\n              error = {\n                code: 'ARRAY_LENGTH_LONG',\n                message: 'Array is too long (' + o.data.length + '), maximum ' +\n                         o.schema.maxItems\n              };\n\n              break;\n            case 'uniqueItems':\n              error = {\n                code: 'ARRAY_UNIQUE',\n                message: 'Array items are not unique'\n              };\n\n              break;\n            case 'minProperties':\n              error = {\n                code: 'OBJECT_PROPERTIES_MINIMUM',\n                message: 'Too few properties defined (' +\n                         Object.keys(o.data).length + '), minimum ' +\n                         o.schema.minProperties\n              };\n\n              break;\n            case 'maxProperties':\n              error = {\n                code: 'OBJECT_PROPERTIES_MAXIMUM',\n                message: 'Too many properties defined (' +\n                         Object.keys(o.data).length + '), maximum ' +\n                         o.schema.maxProperties\n              };\n\n              break;\n            case 'enum':\n              error = {\n                code: 'ENUM_MISMATCH',\n                message: 'No enum match (' + o.data + '), expects: ' +\n                         o.schema['enum'].join(', ')\n              };\n\n              break;\n            case 'not':\n              error = {\n                code: 'NOT_PASSED',\n                message: 'Data matches schema from \"not\"'\n              };\n\n              break;\n            case 'additional':\n              properties = o.ns;\n\n              error = {\n                code: 'ADDITIONAL_PROPERTIES',\n                message: 'Additional properties not allowed: ' +\n                         properties[properties.length - 1]\n              };\n\n              break;\n            case 'format':\n              error = {\n                code: 'FORMAT',\n                message: 'Value does not satisfy format: ' +\n                         o.schema.format\n              };\n\n              break;\n          }\n        } catch (err) {\n          // ignore errors\n        }\n\n        // unhandled errors\n        if (!error) {\n          error = {\n            code: 'FAILED',\n            message: 'Validation error: ' + key\n          };\n\n          try {\n            if (typeof o.validation[key] !== 'boolean') {\n              error.message = ' (' + o.validation[key] + ')';\n            }\n          } catch (err) {\n            // ignore errors\n          }\n        }\n\n        error.code = 'VALIDATION_' + error.code;\n        if (o.data !== undefined) error.data = o.data;\n        error.path = o.ns;\n        errors.push(error);\n      });\n    } else {\n      // handle all non-leaf children\n      keys.forEach(function(key) {\n        var s;\n\n        if (o.schema.$ref) {\n          if (o.schema.$ref.match(/#\\/definitions\\//)) {\n            o.schema = o.definitions[o.schema.$ref.slice(14)];\n          } else {\n            o.schema = o.schema.$ref;\n          }\n\n          if (typeof o.schema === 'string') {\n            o.schema = o.env.resolveRef(null, o.schema);\n            if (o.schema) o.schema = o.schema[0];\n          }\n\n          if (!o.schema.type) o.schema.type = 'object';\n        }\n\n        if (o.schema && o.schema.type) {\n          if (allowsType(o.schema, 'object')) {\n            if (o.schema.properties && o.schema.properties[key]) {\n              s = o.schema.properties[key];\n            }\n\n            if (!s && o.schema.patternProperties) {\n              Object.keys(o.schema.patternProperties).some(function(pkey) {\n                if (key.match(new RegExp(pkey))) {\n                  s = o.schema.patternProperties[pkey];\n                  return true;\n                }\n              });\n            }\n\n            if (!s && o.schema.hasOwnProperty('additionalProperties')) {\n              if (typeof o.schema.additionalProperties === 'boolean') {\n                s = {};\n              } else {\n                s = o.schema.additionalProperties;\n              }\n            }\n          }\n\n          if (allowsType(o.schema, 'array')) {\n            s = o.schema.items;\n          }\n        }\n\n        var opts = {\n          env: o.env,\n          schema: s || {},\n          ns: o.ns.concat(key)\n        };\n\n        try {\n          opts.data = o.data[key];\n        } catch (err) {\n          // ignore errors\n        }\n\n        try {\n          opts.validation = o.validation[key].schema ?\n            o.validation[key].schema :\n            o.validation[key];\n        } catch (err) {\n          opts.validation = {};\n        }\n\n        try {\n          opts.definitions = s.definitions || o.definitions;\n        } catch (err) {\n          opts.definitions = o.definitions;\n        }\n\n        errors = errors.concat(make(opts));\n      });\n    }\n\n    return errors;\n  }\n\n  function allowsType(schema, type) {\n    if (typeof schema.type === 'string') {\n      return schema.type === type;\n    }\n    if (isArray(schema.type)) {\n      return schema.type.indexOf(type) !== -1;\n    }\n    return false;\n  }\n\n  function isArray(obj) {\n    if (typeof Array.isArray === 'function') {\n      return Array.isArray(obj);\n    }\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  }\n\n  function formatPath(options) {\n    var root = options.hasOwnProperty('root') ?\n      options.root : '$';\n\n    var sep = options.hasOwnProperty('sep') ?\n      options.sep : '.';\n\n    return function(error) {\n      var path = root;\n\n      error.path.forEach(function(key) {\n        path += key.match(/^\\d+$/) ?\n          '[' + key + ']' :\n          key.match(/^[A-Z_$][0-9A-Z_$]*$/i) ?\n            (sep + key) :\n            ('[' + JSON.stringify(key) + ']');\n      });\n\n      error.path = path;\n\n      return error;\n    };\n  }\n\n  function jjve(env) {\n    return function jjve(schema, data, result, options) {\n      if (!result || !result.validation) return [];\n\n      options = options || {};\n\n      if (typeof schema === 'string') { schema = env.schema[schema]; }\n\n      var errors = make({\n        env: env,\n        schema: schema,\n        data: data,\n        validation: result.validation,\n        ns: [],\n        definitions: schema.definitions || {}\n      });\n\n      if (errors.length && options.formatPath !== false) {\n        return errors.map(formatPath(options));\n      }\n\n      return errors;\n    };\n  }\n\n  // Export for use in server and client.\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = jjve;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function() { return jjve; });\n  } else {\n    this.jjve = jjve;\n  }\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jjve/jjve.js\n// module id = 57\n// module chunks = 0 1","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { create as createJsonValidator } from '../utilities/json_validator';\nimport * as object from '../utilities/object';\n\n// JSON schema formats:\nconst TOPIC_IDENTIFIER = '([a-z][+a-zA-Z0-9]*|[A-Z][+A-Z0-9]*)';\nconst SUB_TOPIC_FORMAT = new RegExp( `^${TOPIC_IDENTIFIER}$` );\nconst TOPIC_FORMAT = new RegExp( `^(${TOPIC_IDENTIFIER}(-${TOPIC_IDENTIFIER})*)$` );\nconst FLAG_TOPIC_FORMAT = new RegExp( `^[!]?(${TOPIC_IDENTIFIER}(-${TOPIC_IDENTIFIER})*)$` );\n// simplified RFC-5646 language-tag matcher with underscore/dash relaxation:\n// the parts are: language *(\"-\"|\"_\" script|region|constiant) *(\"-\"|\"_\" extension|privateuse)\nconst LANGUAGE_TAG_FORMAT = /^[a-z]{2,8}([-_][a-z0-9]{2,8})*([-_][a-z0-9][-_][a-z0-9]{2,8})*$/i;\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport function featuresForWidget( widgetSpecification, widgetConfiguration, throwError ) {\n   if( !widgetSpecification.features || Object.keys( widgetSpecification.features ).length === 0 ) {\n      return {};\n   }\n\n   const featureConfiguration = widgetConfiguration.features || {};\n   const featuresSpec = widgetSpecification.features;\n   const validator = createFeaturesValidator( featuresSpec );\n\n   object.forEach( featuresSpec.properties, ( feature, name ) => {\n      // ensure that simple object/array features are at least defined\n      if( name in featureConfiguration ) {\n         return;\n      }\n\n      if( feature.type === 'object' ) {\n         featureConfiguration[ name ] = {};\n      }\n      else if( feature.type === 'array' ) {\n         featureConfiguration[ name ] = [];\n      }\n   } );\n\n   const errors = validator.validate( featureConfiguration );\n\n   if( errors.length ) {\n      const message = errors.reduce(\n         ( message, error ) => `${message}\\n - ${error.message.replace( /\\[/g, '\\\\[' )}`,\n         'Validation of feature-configuration failed. Errors: '\n      );\n\n      throwError( message );\n   }\n\n   return featureConfiguration;\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction createFeaturesValidator( featuresSpec ) {\n   const validator = createJsonValidator( featuresSpec, {\n      prohibitAdditionalProperties: true,\n      useDefault: true\n   } );\n\n   // allows 'mySubTopic0815', 'MY_SUB_TOPIC+OK' and variations:\n   validator.addFormat( 'sub-topic', subTopic => {\n      return ( typeof subTopic !== 'string' ) || SUB_TOPIC_FORMAT.test( subTopic );\n   } );\n\n   // allows 'myTopic', 'myTopic-mySubTopic-SUB_0815+OK' and variations:\n   validator.addFormat( 'topic', topic => {\n      return ( typeof topic !== 'string' ) || TOPIC_FORMAT.test( topic );\n   } );\n\n   // allows 'myTopic', '!myTopic-mySubTopic-SUB_0815+OK' and variations:\n   validator.addFormat( 'flag-topic', flagTopic => {\n      return ( typeof flagTopic !== 'string' ) || FLAG_TOPIC_FORMAT.test( flagTopic );\n   } );\n\n   // allows 'de_DE', 'en-x-laxarJS' and such:\n   validator.addFormat( 'language-tag', languageTag => {\n      return ( typeof languageTag !== 'string' ) || LANGUAGE_TAG_FORMAT.test( languageTag );\n   } );\n\n   // checks that object keys have the 'topic' format\n   validator.addFormat( 'topic-map', topicMap => {\n      return ( typeof topicMap !== 'object' ) ||\n         Object.keys( topicMap ).every( topic => TOPIC_FORMAT.test( topic ) );\n   } );\n\n   // checks that object keys have the 'language-tag' format\n   validator.addFormat( 'localization', localization => {\n      return ( typeof localization !== 'object' ) ||\n         Object.keys( localization ).every( tag => LANGUAGE_TAG_FORMAT.test( tag ) );\n   } );\n\n   return validator;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/features_provider.js","module.exports = {\n\t\"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"layout\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"The layout to use. May be omitted if another page in the extension hierarchy defines one.\"\n\t\t},\n\t\t\"extends\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"The name of the page to extend.\"\n\t\t},\n\t\t\"areas\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"description\": \"A map from area name to a list of widgets to display within that area.\",\n\t\t\t\"patternProperties\": {\n\t\t\t\t\"^[a-z][\\\\.a-zA-Z0-9_]*$\": {\n\t\t\t\t\t\"type\": \"array\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\"widget\": {\n\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\"description\": \"Path to the widget that should be rendered.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"composition\": {\n\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\"description\": \"Path to the composition that should be included.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"layout\": {\n\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\"description\": \"Path to the layout that should be inserted.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"id\": {\n\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\"pattern\": \"^[a-z][a-zA-Z0-9_]*$\",\n\t\t\t\t\t\t\t\t\"description\": \"ID of the widget or composition. Will be generated if missing.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"insertBeforeId\": {\n\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\"description\": \"The ID of the widget this widget or composition should be inserted before.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"features\": {\n\t\t\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\t\t\"description\": \"Configuration of the features defined by the widget or composition.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"enabled\": {\n\t\t\t\t\t\t\t\t\"type\": \"boolean\",\n\t\t\t\t\t\t\t\t\"default\": true,\n\t\t\t\t\t\t\t\t\"description\": \"Set to false to omit widgets e.g. for debugging purposes.\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"additionalProperties\": false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"additionalProperties\": false\n\t\t}\n\t},\n\t\"additionalProperties\": false\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./vendor/laxar/static/schemas/page.json\n// module id = 59\n// module chunks = 0 1","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { deepClone } from '../utilities/object';\n\n/** Use to access the flattened page model, where compositions have been expanded. */\nexport const FLAT = 'FLAT';\n/** Use to access the compact page/composition model, where compositions have not been expanded. */\nexport const COMPACT = 'COMPACT';\n\n\nexport function createProvider( collector ) {\n\n   return {\n\n      /** Start collecting page/composition data. */\n      enable() {\n         collector.enable();\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /** Stop collecting page/composition data and clean up. */\n      disable() {\n         collector.disable();\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Access the current page information.\n       * Everything is returned as a copy, sothis object cannot be used to modify the host application.\n       *\n       * @return {Object}\n       *   the current page information, with the following properties:\n       *    - `pageDefinitions` {Object}\n       *       both the original as well as the expanded/flattened page model for each available page\n       *    - `compositionDefinitions` {Object}\n       *       both the original as well as the expanded/flattened composition model for each composition of\n       *       any available page\n       *    - `widgetDescriptors` {Object}\n       *       the widget descriptor for each widget that was referenced\n       *    - `pageReference` {String}\n       *       the reference for the current page, to lookup page/composition definitions\n       */\n      current() {\n         return collector.current();\n      },\n\n      /**\n       * Add a listener function to be notified whenever the page information changes.\n       * As a side-effect, this also automatically enables collecting page/composition data.\n       * Each listener will be delivered its own copy of the page information.\n       *\n       * @param {Function} _\n       *    The listener to add. Will be called with the current page information whenever that changes.\n       */\n      addListener( _ ) {\n         collector.addListener( _ );\n      },\n\n      /**\n       * Remove a page information listener function.\n       *\n       * @param {Function} _\n       *    The listener to remove\n       */\n      removeListener( _ ) {\n         collector.removeListener( _ );\n      }\n\n   };\n\n}\n\nexport function createCollector( configuration, log ) {\n\n   let enabled = configuration.get( 'tooling.enabled' );\n\n   let listeners = [];\n\n   const currentPageInfo = {\n      pageReference: null,\n      pageDefinitions: {},\n      compositionDefinitions: {},\n      widgetDescriptors: {}\n   };\n\n   return {\n\n      // eslint-disable-next-line valid-jsdoc\n      /** Collect a widget descriptor. */\n      collectWidgetDescriptor( ref, descriptor ) {\n         if( !enabled ) { return; }\n         currentPageInfo.widgetDescriptors[ ref ] = descriptor;\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      // eslint-disable-next-line valid-jsdoc\n      /**\n       * Collect a page definition.\n       * The page is deep-copied right away, and may safely be modified by the caller.\n       */\n      collectPageDefinition( ref, page, type ) {\n         if( !enabled ) { return; }\n         const definitions = currentPageInfo.pageDefinitions;\n         definitions[ ref ] = definitions[ ref ] || {\n            FLAT: null,\n            COMPACT: null\n         };\n         definitions[ ref ][ type ] = deepClone( page );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      // eslint-disable-next-line valid-jsdoc\n      /**\n       * Collect a composition definition.\n       * The composition is deep-copied right away, and may safely be modified by the caller.\n       */\n      collectCompositionDefinition( pageRef, compositionInstanceId, composition, type ) {\n         if( !enabled ) { return; }\n         const definitions = currentPageInfo.compositionDefinitions;\n         const definitionsByInstance = definitions[ pageRef ] = definitions[ pageRef ] || {};\n         definitionsByInstance[ compositionInstanceId ] = definitionsByInstance[ compositionInstanceId ] || {\n            FLAT: null,\n            COMPACT: null\n         };\n         definitionsByInstance[ compositionInstanceId ][ type ] = deepClone( composition );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      // eslint-disable-next-line valid-jsdoc\n      /**\n       * Collect information about the current page, and inform all listeners.\n       * Each listener will receive its own copy of the page information.\n       */\n      collectCurrentPage( ref ) {\n         if( !enabled ) { return; }\n         currentPageInfo.pageReference = ref;\n         listeners.forEach( listener => {\n            listener( deepClone( currentPageInfo ) );\n         } );\n         cleanup();\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      enable() {\n         enabled = true;\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      disable() {\n         enabled = false;\n         currentPageInfo.pageReference = null;\n         currentPageInfo.widgetDescriptors = {};\n         cleanup();\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      addListener( listener ) {\n         enabled = true;\n         listeners.push( listener );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      removeListener( listener ) {\n         listeners = listeners.filter( _ => _ !== listener );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      current() {\n         if( !enabled ) {\n            log.warn( 'laxar page tooling: trying to access data, but collecting it was never enabled' );\n         }\n         return deepClone( currentPageInfo );\n      }\n\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function cleanup() {\n      const currentRef = currentPageInfo.pageReference;\n      [ 'pageDefinitions', 'compositionDefinitions' ]\n         .forEach( collection => {\n            Object.keys( currentPageInfo[ collection ] )\n               .filter( ref => ref !== currentRef )\n               .forEach( ref => { delete currentPageInfo[ collection ][ ref ]; } );\n         } );\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/tooling/pages.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\nexport function create( artifactProvider, cssLoader ) {\n   return {\n      load() {\n         const themeProvider = artifactProvider.forTheme();\n         themeProvider.descriptor( descriptor =>\n            themeProvider.assetUrl( descriptor.styleSource || 'css/theme.css' ).then( cssLoader.load )\n         );\n      }\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/theme_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\nimport * as string from '../utilities/string';\nimport * as featuresProvider from './features_provider';\n\nconst TYPE_WIDGET = 'widget';\nconst TYPE_ACTIVITY = 'activity';\n\nconst ID_SEPARATOR = '-';\n\n/**\n * @name AdapterErrorFactory\n * @constructor\n */\nexport const adapterErrors = {\n\n   /**\n    * Creates (but does not throw) an error indicating that an activity tried accessing the DOM.\n    *\n    * @param {String} details.technology\n    *    the complaining adapter's technology\n    * @param {String} details.widgetName\n    *    the canonical name of the activity causing the problem\n    *\n    * @return {Error}\n    *    the error, ready to throw\n    */\n   activityAccessingDom( { technology, widgetName } ) {\n      return new Error( `${technology} adapter: Trying to access DOM in activity ${widgetName}` );\n   },\n\n   /**\n    * Creates (but does not throw) an error indicating that a widget requested an injection that cannot be\n    * provided by the adapter.\n    *\n    * @param {String} details.technology\n    *    the complaining adapter's technology\n    * @param {String} details.injection\n    *    the failing injection\n    * @param {String} details.widgetName\n    *    the canonical name of the widget causing the problem\n    *\n    * @return {Error}\n    *    the error, ready to throw\n    */\n   unknownInjection( { technology, injection, widgetName } ) {\n      return new Error(\n         `${technology} adapter: Trying to inject unknown service \"${injection} into widget \"${widgetName}\"`\n      );\n   },\n\n   /**\n    * Creates (but does not throw) an error indicating that a widget was not registered with the current\n    * adapter.\n    *\n    * @param {String} details.technology\n    *    the complaining adapter's technology\n    * @param {String} details.widgetName\n    *    the canonical name of the missing widget\n    *\n    * @return {Error}\n    *    the error, ready to throw\n    */\n   unknownWidget( { technology, widgetName } ) {\n      return new Error( `${technology} adapter: Unknown widget: ${widgetName}` );\n   }\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst noOp = () => {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Create a generic widget loader that can load widgets and activities implemented in various technologies\n * by using appropriate adapters.\n *\n * @param {Log} log\n *    log instance to use for technology compatibility warnings\n * @param {ArtifactProvider} artifactProvider\n *    an artifact provider for looking up widget descriptors and assets\n * @param {ControlLoader} controlLoader\n *    helps loading controls and their assets\n * @param {CssLoader} cssLoader\n *    helps loading widget- and control-stylesheets during development\n * @param {PagesCollector} pagesCollector\n *    used for inspection tools\n * @param {Function} servicesForWidget\n *    a factory method to create widget-specific services\n *\n * @return {WidgetLoader}\n *    a new widget loader\n */\nexport function create(\n   log,\n   artifactProvider,\n   controlLoader,\n   cssLoader,\n   pagesCollector,\n   servicesForWidget\n) {\n\n   const widgetAdapters = {};\n\n   /**\n    * @name WidgetLoader\n    * @constructor\n    */\n   return {\n      load,\n\n      /**\n       * Several factory methods for creating error objects that are useful for almost any adapter.\n       *\n       * @memberof WidgetLoader\n       * @type {AdapterErrorFactory}\n       */\n      adapterErrors,\n\n      /**\n       * Register support for integration technologies.\n       *\n       * @param {Object} adapters\n       *    a map of widget adapters by technology to be registered with this loader\n       *\n       * @memberof WidgetLoader\n       */\n      registerWidgetAdapters( adapters ) {\n         Object.assign(widgetAdapters, adapters);\n      }\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Load a widget using an appropriate adapter\n    *\n    * First, get the given widget's descriptor to validate and instantiate the widget features.\n    * Then, instantiate a widget adapter matching the widget's technology. Using the adapter, create the\n    * widget controller. The adapter is returned and can be used to attach the widget to the DOM, or to\n    * destroy it.\n    *\n    * @param {Object} widgetConfiguration\n    *    a widget instance configuration (as used in page definitions) to instantiate the widget from\n    * @param {Object} [optionalOptions]\n    *    map of additonal options\n    * @param {Function} [optionalOptions.onBeforeControllerCreation]\n    *    a function to call just before the controller is set up. It receives an object of named,\n    *    widget-specific injections as arguments\n    *\n    * @return {Promise} a promise for a widget adapter, with an already instantiated controller\n    *\n    * @memberof WidgetLoader\n    */\n   function load( widgetConfiguration, { onBeforeControllerCreation = noOp } = {} ) {\n\n      const widgetArtifactProvider = artifactProvider.forWidget( widgetConfiguration.widget );\n\n      return widgetArtifactProvider\n         .descriptor()\n         .then( descriptor => {\n            // The control-descriptors must be loaded prior to controller creation.\n            // This allows the widget controller to synchronously instantiate controls.\n            return Promise.all( ( descriptor.controls || [] ).map( controlLoader.load ) )\n               .then( controlDescriptors => {\n                  controlDescriptors.forEach( checkTechnologyCompatibility( descriptor ) );\n                  return descriptor;\n               } );\n         } )\n         .then( descriptor => {\n\n            pagesCollector.collectWidgetDescriptor( widgetConfiguration.widget, descriptor );\n\n            const { integration: { type, technology } } = descriptor;\n            const widgetName = descriptor.name;\n            if( type !== TYPE_WIDGET && type !== TYPE_ACTIVITY ) {\n               throwError( widgetConfiguration, `Unknown integration type \"${type}\"` );\n            }\n\n            const throwWidgetError = throwError.bind( null, widgetConfiguration );\n            const features =\n               featuresProvider.featuresForWidget( descriptor, widgetConfiguration, throwWidgetError );\n            const anchorElement = document.createElement( 'DIV' );\n            anchorElement.className = widgetName;\n            anchorElement.id = `ax${ID_SEPARATOR}${widgetConfiguration.id}`;\n\n            const adapterFactory = widgetAdapters[ technology ];\n            const { serviceDecorators = () => ({}) } = adapterFactory;\n            const { services, releaseServices } = servicesForWidget(\n               descriptor,\n               widgetConfiguration,\n               features,\n               serviceDecorators( descriptor, widgetConfiguration )\n            );\n\n            const environment = {\n               anchorElement,\n               services,\n               widgetName,\n               onBeforeControllerCreation\n            };\n\n            return Promise.resolve( adapterFactory.create( environment ) )\n               .then( adapter => ( { destroy: noOp, ...adapter } ) )\n               .then( adapter => ( {\n                  id: widgetConfiguration.id,\n                  adapter,\n                  destroy() {\n                     releaseServices();\n                     adapter.destroy();\n                  },\n                  templatePromise: loadAssets(\n                     descriptor,\n                     widgetArtifactProvider\n                  )\n               } ) );\n\n         }, err => {\n            const message = `Could not load widget \"${widgetConfiguration.widget}\": ${err.message}`;\n            log.error( message );\n            throw err;\n         } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Locates and loads the widget HTML template for this widget (if any) as well as any CSS stylesheets\n    * used by this widget or its controls.\n    *\n    * @param {Object} widgetDescriptor\n    *    a descriptor identifying the widget to load assets for\n    * @param {ArtifactProvider} artifactProviderForWidget\n    *    the provider with which to lookup or fetch artifact HTML and CSS\n    *\n    * @return {Promise}\n    *    A promise that will be resolved with the contents of any HTML template for this widget, or with\n    *    `null` if there is no template (for example, if this is an activity).\n    *\n    * @private\n    */\n   function loadAssets( widgetDescriptor, { assetForTheme, assetUrlForTheme } ) {\n      const { integration: { type }, name } = widgetDescriptor;\n      if( type === TYPE_ACTIVITY ) {\n         return Promise.resolve( null );\n      }\n\n      return Promise.all( [\n         assetForTheme( widgetDescriptor.templateSource || `${name}.html` ),\n         assetUrlForTheme( widgetDescriptor.styleSource || `css/${name}.css` )\n      ] )\n      .then( ([ html, cssUrl ]) => {\n         if( cssUrl ) {\n            cssLoader.load( cssUrl );\n         }\n         return html;\n      } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function checkTechnologyCompatibility( widgetDescriptor ) {\n      const { name, integration: { technology } } = widgetDescriptor;\n      return controlDescriptor => {\n         const controlTechnology = ( controlDescriptor.integration || {} ).technology;\n         if( controlTechnology === 'plain' ) {\n            // plain is always compatible\n            return;\n         }\n\n         if( technology !== controlTechnology ) {\n            log.warn(\n               'Incompatible integration technologies: widget [0] ([1]) cannot use control [2] ([3])',\n               name, technology, controlDescriptor.name, controlTechnology\n            );\n         }\n      };\n   }\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction throwError( widgetConfiguration, message ) {\n   throw new Error( string.format(\n      'Error loading widget \"[widget]\" (id: \"[id]\"): [0]', [ message ], widgetConfiguration\n   ) );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/loaders/widget_loader.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * Module providing the StorageApi factory.\n *\n * Widgets and activities can access their StorageApi instance by requesting the injection\n * {@link widget_services#axStorage axStorage}, or use\n * {@link widget_services#axGlobalStorage axGlobalStorage} for shared items.\n *\n * As such, in most cases only the {@link StorageApi} documentation is relevant.\n *\n * @module storage\n */\nimport assert from '../utilities/assert';\n\nconst SESSION = 'sessionStorage';\nconst LOCAL = 'localStorage';\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * @param {Object} backend\n *    the K/V store, probably only accepting string values\n * @param {String} namespace\n *    prefix for all keys for namespacing purposes\n *\n * @return {StorageApi}\n *    a storage wrapper to the given backend with `getItem`, `setItem` and `removeItem` methods\n *\n * @private\n */\nfunction createStorage( backend, namespace ) {\n\n   /**\n    * Provides a convenient API over the browser's `window.localStorage` and `window.sessionStorage` objects.\n    * If a browser doesn't support [web storage](http://www.w3.org/TR/webstorage/), a warning is logged to the\n    * `console` (if available) and a non-persistent in-memory store will be used instead. Note that this can\n    * for example also happen when using Mozilla Firefox with cookies disabled and as such isn't limited to\n    * older browsers.\n    *\n    * Additionally, in contrast to plain *web storage* access, non-string values will be automatically passed\n    * through JSON (de-) serialization on storage or retrieval. All keys will be prepended with a combination\n    * of a fixed (`ax.`) and an application-specific namespace (configured using `storagePrefix` with fallback\n    * to `name`) to avoid naming clashes with other (LaxarJS) web applications running on the same host and\n    * port. All {@link StorageApi} accessor methods should be called without any namespace as it is\n    * prepended automatically.\n    *\n    * @name StorageApi\n    * @constructor\n    */\n   return {\n      getItem,\n      setItem,\n      removeItem\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Retrieves a `value` by `key` from the store. JSON deserialization will automatically be applied.\n    *\n    * @param {String} key\n    *    the key of the item to retrieve (without namespace prefix)\n    *\n    * @return {*}\n    *    the value or `null` if it doesn't exist in the store\n    *\n    * @memberof StorageApi\n    */\n   function getItem( key ) {\n      const item = backend.getItem( `${namespace}.${key}` );\n      return item && JSON.parse( item );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Sets a `value` for a `key`. The value must be JSON serializable. An existing value will be overwritten.\n    *\n    * @param {String} key\n    *    the key of the item to set (without namespace prefix)\n    * @param {*} value\n    *    the new value to set\n    *\n    * @memberof StorageApi\n    */\n   function setItem( key, value ) {\n      const nsKey = `${namespace}.${key}`;\n      if( value === undefined ) {\n         backend.removeItem( nsKey );\n      }\n      else {\n         backend.setItem( nsKey, JSON.stringify( value ) );\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Removes the value associated with `key` from the store.\n    *\n    * @param {String} key\n    *    the key of the item to remove (without namespace prefix)\n    *\n    * @memberof StorageApi\n    */\n   function removeItem( key ) {\n      backend.removeItem( `${namespace}.${key}` );\n   }\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction getOrFakeBackend( browser, webStorageName ) {\n   const browserConsole = browser.console();\n   const store = window[ webStorageName ];\n   if( store.setItem && store.getItem && store.removeItem ) {\n      try {\n         const testKey = 'ax_.storage.test';\n         // In iOS Safari Private Browsing, this will fail:\n         store.setItem( testKey, 1 );\n         store.removeItem( testKey );\n         return store;\n      }\n      catch( e ) {\n         // setItem failed: must use fake storage\n      }\n   }\n\n   if( browserConsole ) {\n      const method = 'warn' in browserConsole ? 'warn' : 'log';\n      browserConsole[ method ](\n         `window.${webStorageName} not available: Using non-persistent polyfill. \\n` +\n         'Try disabling private browsing or enabling cookies.'\n      );\n   }\n\n   const backend = {};\n   return {\n      getItem( key ) {\n         return backend[ key ] || null;\n      },\n      setItem( key, val ) {\n         backend[ key ] = val;\n      },\n      removeItem( key ) {\n         if( key in backend ) {\n            delete backend[ key ];\n         }\n      }\n   };\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction applicationPrefix( configuration ) {\n   return configuration.get(\n      'storagePrefix',\n      configuration.ensure( 'name' )\n   );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a new storage factory. In most cases this module will be called without arguments,\n * but having the ability to provide them is useful e.g. for mocking purposes within tests.\n * If the arguments are omitted, an attempt is made to access the native browser WebStorage api.\n * If that fails, storage is only mocked by an in memory map (thus actually unavailable).\n *\n * Developers are free to use polyfills to support cases where local- or session-storage may not be\n * available. Just make sure to initialize the polyfills before this module.\n *\n * @param {Object} configuration\n *    a configuration service instance, to determine a storage prefix based on the configured name\n * @param {Object} browser\n *    the browser api adapter\n * @param {Object} [localStorageBackend]\n *    the backend for local storage. Default is `window.localStorage`\n * @param {Object} [sessionStorageBackend]\n *    the backend for session storage. Default is `window.sessionStorage`\n *\n * @return {StorageFactory}\n *    a new storage factory\n *\n * @private\n */\nexport function create( configuration, browser, localStorageBackend, sessionStorageBackend ) {\n\n   const localBackend = localStorageBackend || getOrFakeBackend( browser, LOCAL );\n   const sessionBackend = sessionStorageBackend || getOrFakeBackend( browser, SESSION );\n   const prefix = `ax.${applicationPrefix( configuration )}.`;\n\n   /**\n    * The API returned by the module's `create` function.\n    *\n    * @name StorageFactory\n    * @constructor\n    */\n   return {\n\n      /**\n       * Returns a local storage object for a specific local namespace.\n       *\n       * @param {String} namespace\n       *    the namespace to prepend to keys\n       *\n       * @return {StorageApi}\n       *    the local storage object\n       *\n       * @memberof StorageFactory\n       */\n      getLocalStorage( namespace ) {\n         assert( namespace ).hasType( String ).isNotNull();\n\n         return createStorage( localBackend, prefix + namespace );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Returns a session storage object for a specific local namespace.\n       *\n       * @param {String} namespace\n       *    the namespace to prepend to keys\n       *\n       * @return {StorageApi}\n       *    the session storage object\n       *\n       * @memberof StorageFactory\n       */\n      getSessionStorage( namespace ) {\n         assert( namespace ).hasType( String ).isNotNull();\n\n         return createStorage( sessionBackend, prefix + namespace );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Returns the local storage object for application scoped keys. This is equivalent to\n       * `storage.getLocalStorage( 'app' )`.\n       *\n       * @return {StorageApi}\n       *    the application local storage object\n       *\n       * @memberof StorageFactory\n       */\n      getApplicationLocalStorage() {\n         return createStorage( localBackend, `${prefix}app` );\n      },\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Returns the session storage object for application scoped keys. This is equivalent to\n       * `storage.getSessionStorage( 'app' )`.\n       *\n       * @return {StorageApi}\n       *    the application session storage object\n       *\n       * @memberof StorageFactory\n       */\n      getApplicationSessionStorage() {\n         return createStorage( sessionBackend, `${prefix}app` );\n      }\n\n   };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/storage.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { deepClone } from '../utilities/object';\n\nexport function create( log ) {\n\n   const api = {\n      started\n   };\n\n   let idCounter = 0;\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function started( optionalOptions ) {\n      const timer = new Timer( optionalOptions );\n      timer.start();\n      return timer;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function Timer( optionalOptions ) {\n      this.options_ = {\n         label: `timer${idCounter++}`,\n         ...optionalOptions\n      };\n      this.startTime_ = null;\n      this.stopTime_ = null;\n      this.splitTimes_ = [];\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   Timer.prototype.getData = function() {\n      return {\n         label: this.options_.label,\n         startTime: this.startTime_,\n         stopTime: this.stopTime_,\n         splitTimes: deepClone( this.splitTimes_ )\n      };\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   Timer.prototype.start = function() {\n      this.startTime_ = Date.now();\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   Timer.prototype.splitTime = function( optionalLabel ) {\n      this.splitTimes_.push( {\n         time: Date.now(),\n         label: optionalLabel || `split${this.splitTimes_.length}`\n      } );\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   Timer.prototype.stop = function() {\n      this.stopTime_ = Date.now();\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   Timer.prototype.stopAndLog = function( optionalLabel ) {\n      this.stop();\n\n      const startTime = this.startTime_;\n      const endTime = Date.now();\n      const label = optionalLabel || 'Timer Stopped';\n      this.splitTimes_.push( { label, time: endTime } );\n\n      const message = [];\n      message.push( 'Timer \"', this.options_.label, '\": ' );\n      message.push( 'start at ', new Date( startTime ).toISOString(), ' (client), ' );\n      message.push( label, ' after ', ( endTime - startTime ).toFixed( 0 ), 'ms ' );\n      message.push( '(checkpoints: ' );\n      const intervals = [];\n      this.splitTimes_.reduce( ( from, data ) => {\n         intervals.push( `\"${data.label}\"=${( data.time - from ).toFixed( 0 )}ms` );\n         return data.time;\n      }, startTime );\n      message.push( intervals.join( ', ' ), ')' );\n      log.info( message.join( '' ) );\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return api;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/timer.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the FlowController factory.\n *\n * This service is internal to LaxarJS and not available to widgets and activities.\n *\n * @module flow_controller\n * @private\n */\n\nimport assert from '../utilities/assert';\nimport { create as createJsonValidator } from '../utilities/json_validator';\nimport { forEach, setPath } from '../utilities/object';\nimport flowSchema from 'json!../../static/schemas/flow.json';\n\nconst SESSION_KEY_TIMER = 'navigationTimer';\nconst DEFAULT_PLACE = '';\n\nexport const TARGET_SELF = '_self';\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates and returns a new flow controller from its dependencies.\n *\n * @param {ArtifactProvider} artifactProvider\n *    an artifact provider, needed to fetch the flow definition\n * @param {Configuration} configuration\n *    a configuration instance, to determine the name of the flow to load\n * @param {EventBus} eventBus\n *    an event bus instance, used to subscribe to navigateRequest events, and to publish will/did-responses\n * @param {Logger} log\n *    a logger that is used for reporting flow validation and navigation problems\n * @param {PageService} pageService\n *    the page service to use for actual page transitions (setup, teardown) during navigation\n * @param {Router} router\n *    router to register places with, and to use for URL construction\n * @param {Timer} timer\n *    timer to use for measuring page transitions\n *\n * @return {FlowController}\n *    a flow controller instance\n */\nexport function create( artifactProvider, configuration, eventBus, log, pageService, router, timer ) {\n\n   const COLLABORATOR_ID = 'AxFlowController';\n   const availablePlaces = {};\n\n   let activeParameters = {};\n   let activePlace;\n   let navigationInProgress = false;\n   let requestedTarget = null;\n\n   eventBus.subscribe( 'navigateRequest', ( { target, data } ) => {\n      if( navigationInProgress ) { return; }\n      requestedTarget = target;\n      navigateToTarget( target, { ...activeParameters, ...data } );\n   }, { subscriber: COLLABORATOR_ID } );\n\n   /**\n    * A flow controller can load a flow definition, setup routes, and allows to navigate between places. The\n    * flow controller handles router-initiated navigation as well as `navigateRequest` events and triggers\n    * instantiation/destruction of the associated pages.\n    *\n    * @name FlowController\n    * @constructor\n    */\n   return {\n      constructAbsoluteUrl,\n      loadFlow\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Starts loading the configured flow definition and configures the router.\n    *\n    * @return {Promise}\n    *    a promise that is resolved when all routes have been registered\n    */\n   function loadFlow() {\n      const flowName = configuration.ensure( 'flow.name' );\n      return artifactProvider.forFlow( flowName ).definition()\n         .then( flow => {\n            validateFlowJson( flow );\n            router.registerRoutes(\n               assembleRoutes( flow ),\n               createFallbackHandler( flow )\n            );\n         } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Get the place definition for a given target or place. If the provided identifier is a target of the\n    * current place, the definition of the referenced place is returned. Otherwise, the current place is\n    * returned.\n    *\n    * @param {String} targetOrPlaceId\n    *    a string identifying the target or place to obtain a definition for\n    * @param {Object} place\n    *    the corresponding place definition\n    *\n    * @return {Object}\n    *    a place definition with `targets` and `patterns` as specified in the flow definition, plus `id`\n    */\n   function placeForTarget( targetOrPlaceId, place = activePlace ) {\n      let placeId = place ? place.targets[ targetOrPlaceId ] : null;\n      if( placeId == null ) {\n         placeId = targetOrPlaceId;\n      }\n      assert.state(\n         placeId in availablePlaces,\n         `Unknown target or place \"${targetOrPlaceId}\". Current place: \"${place.id}\"`\n      );\n      return availablePlaces[ placeId ];\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Constructs an absolute URL to the given target or place using the given parameters. If a target is\n    * given as first argument, it is resolved using the currently active place.\n    *\n    * @param {String} targetOrPlace\n    *    the target or place ID to construct a URL for\n    * @param {Object} [optionalParameters]\n    *    optional map of place parameters. Missing parameters are filled base on the parameters that were\n    *    passed to the currently active place\n    *\n    * @return {String}\n    *    the generated absolute URL\n    *\n    * @memberof FlowService\n    */\n   function constructAbsoluteUrl( targetOrPlace, optionalParameters ) {\n      const place = placeForTarget( targetOrPlace );\n      return router.constructAbsoluteUrl(\n         place.patterns,\n         withoutRedundantParameters( place, optionalParameters )\n      );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function navigateToTarget( targetOrPlaceId, parameters, redirectFrom ) {\n      const place = placeForTarget( targetOrPlaceId, redirectFrom );\n      router.navigateTo(\n         place.patterns,\n         withoutRedundantParameters( place, parameters ),\n         !!redirectFrom\n      );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function handleRouteChange( place, routerParameters ) {\n      const parameters = { ...place.defaultParameters, ...routerParameters };\n      if( activePlace && place.id === activePlace.id && equals( parameters, activeParameters ) ) {\n         navigationInProgress = false;\n         log.trace( `Canceling navigation to \"${place.id}\". Already there with same parameters.` );\n         return Promise.resolve();\n      }\n      if( navigationInProgress ) {\n         log.trace( `Canceling navigation to \"${place.id}\". Navigation already in progress.` );\n         return Promise.resolve();\n      }\n      navigationInProgress = true;\n\n      const fromPlace = activePlace ? activePlace.targets[ TARGET_SELF ] : '';\n      const navigationTimer = timer.started( {\n         label: `navigation (${fromPlace} -> ${place.targets[ TARGET_SELF ]})`,\n         persistenceKey: SESSION_KEY_TIMER\n      } );\n\n      const event = {\n         target: requestedTarget || place.id,\n         place: place.id,\n         data: parameters\n      };\n      requestedTarget = null;\n\n      const options = { sender: COLLABORATOR_ID };\n      return eventBus.publish( `willNavigate.${event.target}`, event, options )\n         .then( () => {\n            if( activePlace && place.id === activePlace.id ) {\n               activeParameters = parameters;\n               return Promise.resolve();\n            }\n\n            return pageService.controller().tearDownPage()\n               .then( () => {\n                  log.setTag( 'PLCE', place.id );\n                  activeParameters = parameters;\n                  activePlace = place;\n                  return pageService.controller().setupPage( place.page );\n               } );\n         } )\n         .then( () => {\n            navigationInProgress = false;\n            navigationTimer.stopAndLog( 'didNavigate' );\n            return eventBus.publish( `didNavigate.${event.target}`, event, options );\n         } )\n         .catch( err => {\n            log.error( `Failed to navigate to place \"${place.id}\". Error: [0]\\n`, err.stack );\n            return Promise.reject( err );\n         } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createFallbackHandler( flow ) {\n      const { redirectOn, places } = flow;\n      return path => {\n         log.warn( `Received request for unknown route \"${path}\".` );\n         if( redirectOn.unknownPlace in places ) {\n            log.trace( `- Redirecting to error place (\"${redirectOn.unknownPlace}\").` );\n            handleRouteChange( places[ redirectOn.unknownPlace ], {} );\n         }\n         else if( DEFAULT_PLACE in places ) {\n            log.trace( `- Redirecting to default place (\"${DEFAULT_PLACE}\").` );\n            handleRouteChange( places[ DEFAULT_PLACE ], {} );\n         }\n         else {\n            log.trace( '- Got no unknownPlace redirect and no default place. Doing nothing.' );\n         }\n      };\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function assembleRoutes( { places } ) {\n      const routeMap = {};\n      forEach( places, ( place, placeId ) => {\n         place.id = placeId;\n         place.patterns = place.patterns || [ `/${placeId}` ];\n         setPath( place, `targets.${TARGET_SELF}`, place.id );\n\n         const { id, patterns, page, redirectTo } = place;\n         availablePlaces[ id ] = place;\n\n         if( redirectTo ) {\n            patterns.forEach( pattern => {\n               routeMap[ pattern ] = parameters => {\n                  navigateToTarget( redirectTo, parameters, place );\n               };\n            } );\n            return;\n         }\n\n         if( !page ) {\n            log.error( `flow: invalid empty place: ${id}` );\n            return;\n         }\n\n         patterns.forEach( pattern => {\n            routeMap[ pattern ] = parameters => {\n               handleRouteChange( place, parameters );\n            };\n         } );\n      } );\n      return routeMap;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function validateFlowJson( flowJson ) {\n      const errors = createJsonValidator( flowSchema ).validate( flowJson );\n      if( errors.length ) {\n         log.error(\n            'LaxarJS flow controller: Failed validating flow definition:\\n[0]',\n            errors.map( ({ message }) => ` - ${message}` ).join( '\\n' )\n         );\n         throw new Error( 'Illegal flow.json format' );\n      }\n   }\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction withoutRedundantParameters( place, parameters ) {\n   const { defaultParameters = {} } = place;\n   const remainingParameters = {};\n   forEach( parameters, ( value, key ) => {\n      if( !( key in defaultParameters ) || defaultParameters[ key ] !== value ) {\n         remainingParameters[ key ] = value;\n      }\n   } );\n   return remainingParameters;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction equals( a, b ) {\n   const aKeys = Object.keys( a );\n   const bKeys = Object.keys( b );\n   return aKeys.length === bKeys.length && aKeys.every( key => key in b && a[ key ] === b[ key ] );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/flow_controller.js","module.exports = {\n\t\"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\t\"type\": \"object\",\n\t\"required\": [\n\t\t\"places\"\n\t],\n\t\"properties\": {\n\t\t\"redirectOn\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"description\": \"Globally defined redirects for certain edge cases\",\n\t\t\t\"properties\": {\n\t\t\t\t\"unknownPlace\": {\n\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\"description\": \"This place is loaded whenever the requested place doesn't exist.\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"default\": {},\n\t\t\t\"additionalProperties\": false\n\t\t},\n\t\t\"places\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"format\": \"topic-map\",\n\t\t\t\"description\": \"The places for this flow. Keys (that is, place names) must be valid event topics.\",\n\t\t\t\"additionalProperties\": {\n\t\t\t\t\"type\": \"object\",\n\t\t\t\t\"properties\": {\n\t\t\t\t\t\"patterns\": {\n\t\t\t\t\t\t\"type\": \"array\",\n\t\t\t\t\t\t\"description\": \"Non-empty list of URL patterns to route to this place. If omitted, the place name (prefixed with a slash) is used as the sole pattern.\",\n\t\t\t\t\t\t\"minItems\": 1,\n\t\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"page\": {\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"description\": \"The page to render for this place.\"\n\t\t\t\t\t},\n\t\t\t\t\t\"redirectTo\": {\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"description\": \"The place to redirect to when hitting this place.\"\n\t\t\t\t\t},\n\t\t\t\t\t\"defaultParameters\": {\n\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\"default\": {},\n\t\t\t\t\t\t\"additionalProperties\": {\n\t\t\t\t\t\t\t\"type\": [\n\t\t\t\t\t\t\t\t\"string\",\n\t\t\t\t\t\t\t\t\"boolean\",\n\t\t\t\t\t\t\t\t\"null\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"description\": \"Default values for optional (query) parameters.\"\n\t\t\t\t\t},\n\t\t\t\t\t\"targets\": {\n\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\"format\": \"topic-map\",\n\t\t\t\t\t\t\"additionalProperties\": {\n\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\"format\": \"topic\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"description\": \"A map of symbolic targets to place-names reachable from this place.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"additionalProperties\": false\n\t\t\t}\n\t\t}\n\t},\n\t\"additionalProperties\": false\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./vendor/laxar/static/schemas/flow.json\n// module id = 66\n// module chunks = 0 1","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the FlowService factory.\n *\n * To access the FlowService in a widget, request the {@link widget_services#axFlowService axFlowService}\n * injection.\n *\n * @module flow_service\n */\n\n/**\n * Creates a flow service  backed by the given flow controller.\n *\n * @param {FlowController} flowController\n *    a flow controller, needed to respect default parameter values when generating URLs\n *\n * @return {FlowService}\n *    a flow service instance\n *\n * @private\n */\nexport function create( flowController ) {\n\n   /**\n    * Allows widgets to create valid URLs without knowledge about the current place, its routing patterns, or\n    * about the actual routing implementation.\n    *\n    * @name FlowService\n    * @constructor\n    */\n   return {\n      constructAbsoluteUrl\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Constructs an absolute URL to the given target or place using the given parameters. If a target is\n    * given as first argument, it is resolved using the currently active place.\n    *\n    * @param {String} targetOrPlace\n    *    the target or place ID to construct a URL for\n    * @param {Object} [optionalParameters]\n    *    optional map of place parameters. Missing parameters are filled base on the parameters that were\n    *    passed to the currently active place\n    *\n    * @return {String}\n    *    the generated absolute URL\n    *\n    * @memberof FlowService\n    */\n   function constructAbsoluteUrl( targetOrPlace, optionalParameters = {} ) {\n      return flowController.constructAbsoluteUrl( targetOrPlace, optionalParameters );\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/flow_service.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module providing the Heartbeat factory.\n *\n * To use the Heartbeat service in a widget, request the {@link widget_services#axHeartbeat axHeartbeat}\n * injection.\n *\n * @module heartbeat\n */\n\n /**\n  * Creates a heartbeat backed by the given scheduler.\n  *\n  * @param {Function} [customNextTick]\n  *    a function that takes a callback, and will asynchronously execute that callback as soon as possible,\n  *    but asynchronously (that is, after the calling execution stack has finished running).\n  *    If omitted, the callback is scheduled using `Promise.resolve().then( ... )`.\n  * @param {Function} [customTimeout]\n  *    an optional replacement for `window.setTimeout`, used to run coalesced callbacks in a second stage\n  *    after the immediately scheduled operation\n  *\n  * @return {FlowService}\n  *    a flow service instance\n  *\n  * @private\n  */\nexport function create( customNextTick, customTimeout ) {\n\n   const nextTick = customNextTick || ( f => { Promise.resolve().then( f ); } );\n   const timeout = customTimeout || ( f => { setTimeout( f, 0 ); } );\n\n   const heartbeatListeners = [];\n   const nextQueue = [];\n   const beforeQueue = [];\n   const afterQueue = [];\n\n   let beatRequested = false;\n\n   /**\n    * Scheduler for tasks that possibly synchronously trigger creation of new tasks, that need some common\n    * work to be done before or after all of these tasks (and all tasks scheduled in the meantime) are\n    * finished.\n    *\n    * An example would be model-manipulating operations in an application using AngularJS, that need to run\n    * `$rootScope.$apply` after all operations are done, but only *once*.\n    *\n    * @name Heartbeat\n    * @constructor\n    */\n   return {\n      registerHeartbeatListener,\n      onBeforeNext,\n      onNext,\n      onAfterNext\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Registers a listener, that is called whenever a heartbeat occurs.\n    * It is called after the before and next queues were processed, but before working off the after queue has\n    * started.\n    * In contrast to the `on*` methods, listeners are not removed after a tick, but will be called again each\n    * time a heartbeat occurs.\n    * Instead this method returns a function to manually remove the listener again.\n    *\n    * @param  {Function} listener\n    *    the listener to register\n    *\n    * @return {Function}\n    *    a function to remove the listener again\n    *\n    * @memberof Heartbeat\n    */\n   function registerHeartbeatListener( listener ) {\n      heartbeatListeners.push( listener );\n\n      return () => {\n         let index;\n         while( ( index = heartbeatListeners.indexOf( listener ) ) !== -1 ) {\n            heartbeatListeners.splice( index, 1 );\n         }\n      };\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Schedules a function for the next heartbeat.\n    * If no heartbeat was triggered yet, it will be requested now.\n    *\n    * @param {Function} func\n    *    a function to schedule for the next tick\n    *\n    * @memberof Heartbeat\n    */\n   function onNext( func ) {\n      if( !beatRequested ) {\n         beatRequested = true;\n         nextTick( () => {\n            while( beforeQueue.length ) { beforeQueue.shift()(); }\n            while( nextQueue.length ) { nextQueue.shift()(); }\n            heartbeatListeners.forEach( listener => listener() );\n            if( afterQueue.length ) {\n               // run after-queue once all directly resolvable promises are through.\n               timeout( () => {\n                  // Ensure that no further event bus deliveries were scheduled\n                  if( !beatRequested ) {\n                     while( afterQueue.length ) { afterQueue.shift()(); }\n                  }\n               } );\n            }\n            beatRequested = false;\n         } );\n      }\n      nextQueue.push( func );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Schedules a function to be called before the next heartbeat occurs.\n    * Note that `func` may never be called, if there is no next heartbeat since calling this function won't\n    * trigger a new heartbeat.\n    *\n    * @param {Function} func\n    *    a function to call before the next heartbeat\n    *\n    * @memberof Heartbeat\n    */\n   function onBeforeNext( func ) {\n      beforeQueue.push( func );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Schedules a function to be called after the next heartbeat occured.\n    * Note that `func` may never be called, if there is no next heartbeat since calling this function won't\n    * trigger a new heartbeat.\n    *\n    * @param {Function} func\n    *    a function to call after the next heartbeat\n    *\n    * @memberof Heartbeat\n    */\n   function onAfterNext( func ) {\n      afterQueue.push( func );\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/heartbeat.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport assert from '../utilities/assert';\nimport { create as createAreaHelper, findWidgetAreas } from './area_helper';\nimport { create as createLayoutWidgetAdapter } from './layout_widget_adapter';\n\nexport function create(\n      eventBus,\n      pageLoader,\n      layoutLoader,\n      widgetLoader,\n      localeManager,\n      visibilityManager,\n      pagesCollector\n   ) {\n\n   assert( eventBus ).isNotNull();\n   assert( pageLoader ).isNotNull();\n   assert( layoutLoader ).isNotNull();\n   assert( widgetLoader ).isNotNull();\n   assert( localeManager ).isNotNull();\n   assert( visibilityManager ).isNotNull();\n   assert( pagesCollector ).isNotNull();\n\n   let pageController;\n\n   const pageServiceApi = {\n      createControllerFor: pageElement => {\n         assert.state( !pageController, 'Cannot create a page controller more than once.' );\n         assert.state(\n            pageElement instanceof HTMLElement,\n            'A page controller can only be created for a valid DOM element.'\n         );\n\n         pageController = createPageController( pageElement );\n         return pageController;\n      },\n      controller: () => pageController\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createPageController( pageElement ) {\n\n      let areaHelper = null;\n      const api = {\n         setupPage,\n         tearDownPage,\n         areaHelper() {\n            return areaHelper;\n         }\n      };\n\n      /** Delay between sending didLifeCycle and attaching widget templates. */\n      const WIDGET_ATTACH_DELAY_MS = 5;\n      const COLLABORATOR_ID = 'AxPageController';\n      const LIFECYCLE_EVENT = { lifecycleId: 'default' };\n      const EVENT_OPTIONS = { sender: COLLABORATOR_ID };\n      const DEFAULT_AREAS = [\n         { name: 'activities', hidden: true },\n         { name: 'popups' },\n         { name: 'popovers' }\n      ];\n\n      let activeWidgetAdapterWrappers = [];\n      let cleanUpLayout = () => {};\n\n      pageElement.innerHTML = '';\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function setupPage( pageName ) {\n         assert( pageName ).hasType( String ).isNotNull();\n\n         return pageLoader.load( pageName )\n            .then( page => {\n               areaHelper = createAreaHelper( page );\n               visibilityManager.setAreaHelper( areaHelper );\n\n               const layoutPromise = layoutLoader.load( page.layout )\n                  .then( layoutInfo => {\n                     cleanUpLayout = renderLayout( pageElement, areaHelper, layoutInfo );\n                  } );\n\n               localeManager.subscribe();\n               const layoutWidget = widget => layoutWidgetAdapterFor( areaHelper, widget );\n\n               // instantiate controllers wrapped by widget adapters\n               const widgetPromises = widgetsForPage( page )\n                  .map( widget => 'layout' in widget ? layoutWidget( widget ) : widgetLoader.load( widget ) );\n\n               return Promise.all( [ ...widgetPromises, layoutPromise ] )\n                  .then( results => results.slice( 0, -1 ) );\n            } )\n            .then( widgetAdapterWrappers => {\n               pagesCollector.collectCurrentPage( pageName );\n               activeWidgetAdapterWrappers = widgetAdapterWrappers;\n            } )\n            .then( localeManager.initialize )\n            .then( () => {\n               return eventBus.publishAndGatherReplies(\n                  'beginLifecycleRequest.default', LIFECYCLE_EVENT, EVENT_OPTIONS\n               );\n            } )\n            .then( visibilityManager.initialize )\n            // Give the widgets (a little) time to settle on the event bus before $digesting and painting:\n            .then( () => delay( WIDGET_ATTACH_DELAY_MS ) )\n            .then( () => areaHelper.attachWidgets( activeWidgetAdapterWrappers ) );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function tearDownPage() {\n         visibilityManager.unsubscribe();\n         localeManager.unsubscribe();\n\n         return eventBus\n            .publishAndGatherReplies( 'endLifecycleRequest.default', LIFECYCLE_EVENT, EVENT_OPTIONS )\n            .then( () => {\n               activeWidgetAdapterWrappers.forEach( wrapper => wrapper.destroy() );\n               activeWidgetAdapterWrappers = [];\n               cleanUpLayout();\n               cleanUpLayout = () => {};\n            } );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function widgetsForPage( page ) {\n         return Object.keys( page.areas ).reduce( ( widgets, areaName ) => {\n            const areaWidgets = page.areas[ areaName ];\n            return areaWidgets.reduce( ( widgets, widget ) => {\n               widget.area = areaName;\n               return [ ...widgets, widget ];\n            }, widgets );\n         }, [] );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function layoutWidgetAdapterFor( areaHelper, widget ) {\n         return layoutLoader.load( widget.layout )\n            .then( ({ className, html }) => {\n               const adapter = createLayoutWidgetAdapter( areaHelper, className, {\n                  area: widget.area,\n                  id: widget.id,\n                  path: widget.layout\n               } );\n\n               return {\n                  id: widget.id,\n                  adapter,\n                  destroy: adapter.destroy,\n                  templatePromise: Promise.resolve( html )\n               };\n            } );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function renderLayout( pageElement, areaHelper, layoutInfo ) {\n         addClass( pageElement, layoutInfo.className );\n         pageElement.innerHTML = layoutInfo.html;\n\n         const areas = findWidgetAreas( pageElement );\n         const deregisterFuncs = Object.keys( areas )\n            .map( areaName => areaHelper.register( areaName, areas[ areaName ] ) );\n\n         DEFAULT_AREAS.forEach( area => {\n            if( areaHelper.exists( area.name ) ) {\n               return;\n            }\n\n            const node = document.createElement( 'div' );\n            // We only set the attribute here for debugging purposes\n            node.setAttribute( 'ax-widget-area', area.name );\n            if( area.hidden ) {\n               node.style.display = 'none';\n            }\n            deregisterFuncs.push( areaHelper.register( area.name, node ) );\n            pageElement.appendChild( node );\n         } );\n\n         return () => {\n            deregisterFuncs.forEach( func => func() );\n            removeClass( pageElement, layoutInfo.className );\n         };\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return pageServiceApi;\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction addClass( element, cssClass ) {\n   if( element.classList ) {\n      element.classList.add( cssClass );\n      return;\n   }\n   element.className += ` ${cssClass}`;\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction removeClass( element, cssClass ) {\n   if( element.classList ) {\n      element.classList.remove( cssClass );\n      return;\n   }\n   element.className = element.className\n      .split( ' ' )\n      .map( c => c.trim() )\n      .filter( c => c !== cssClass )\n      .join( ' ' );\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction delay( ms ) {\n   return new Promise( resolve => setTimeout( resolve, ms ) );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/page_service.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { forEach } from '../utilities/object';\n\n/**\n * The area helper manages widget areas, their DOM representation and their nesting structure.\n *\n * It tracks widget area visibility in order to compile widgets and to attach them to their areas when\n * these become visible.\n * It does not interact with the event bus directly, but is consulted by the visibility event manager to\n * determine area nesting for visibility events.\n */\n\nexport function create( page ) {\n\n   const exports = {\n      setVisibility,\n      areasInArea,\n      areasInWidget,\n      register,\n      exists,\n      attachWidgets\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // all initially visible widgets should be attached together, to reduce jitter and unnecessary DOM ops\n   let freeToAttach = false;\n\n   // keep the dom element for each area, to attach widgets to\n   const areaToElement = {};\n\n   // track widget adapters waiting for their area to become available so that they may attach to its DOM\n   const areaToWaitingAdapters = {};\n\n   // track the visibility status of all areas\n   const knownVisibilityState = {};\n\n   // the containing area name for each widget\n   const widgetIdToArea = {};\n   forEach( page.areas, ( widgets, areaName ) => {\n      widgets.forEach( widget => {\n         widgetIdToArea[ widget.id ] = areaName;\n      } );\n   } );\n\n   // for each widget with children, and each widget area with nested areas, store a list of child names\n   const areasInAreaMap = {};\n   const areasInWidgetMap = {};\n   forEach( page.areas, ( widgetEntries, areaName ) => {\n      let containerName = '';\n      if( areaName.indexOf( '.' ) !== -1 ) {\n         const widgetId = areaName.split( '.' )[ 0 ];\n         areasInWidgetMap[ widgetId ] = areasInWidgetMap[ widgetId ] || [];\n         areasInWidgetMap[ widgetId ].push( areaName );\n         containerName = widgetIdToArea[ widgetId ];\n      }\n      areasInAreaMap[ containerName ] = areasInAreaMap[ containerName ] || [];\n      areasInAreaMap[ containerName ].push( areaName );\n   } );\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function isVisible( areaName ) {\n      return knownVisibilityState[ areaName ] || false;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function setVisibility( areaName, visible ) {\n      if( visible && freeToAttach ) {\n         attachWaitingAdapters( areaName );\n      }\n      knownVisibilityState[ areaName ] = visible;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function areasInArea( containerName ) {\n      return areasInAreaMap[ containerName ];\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function areasInWidget( widgetId ) {\n      return areasInWidgetMap[ widgetId ];\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Register a widget area\n    *\n    * @param {String} name\n    *    the area name as used in the page definition\n    * @param {HTMLElement} element\n    *    an HTML element representing the widget area\n    *\n    * @return {Function}\n    *    removes the according area from the registry again\n    */\n   function register( name, element ) {\n      if( name in areaToElement ) {\n         throw new Error( `The area \"${name}\" is defined twice in the current layout.` );\n      }\n\n      areaToElement[ name ] = element;\n      if( freeToAttach && isVisible( name ) ) {\n         attachWaitingAdapters( name );\n      }\n\n      return () => {\n         delete areaToElement[ name ];\n      };\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function exists( name ) {\n      return name in areaToElement;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function attachWidgets( widgetAdapters ) {\n      freeToAttach = true;\n      widgetAdapters.forEach( adapterRef => {\n         const areaName = widgetIdToArea[ adapterRef.id ];\n         areaToWaitingAdapters[ areaName ] = areaToWaitingAdapters[ areaName ] || [];\n         areaToWaitingAdapters[ areaName ].push( adapterRef );\n      } );\n      forEach( page.areas, ( widgets, areaName ) => {\n         if( isVisible( areaName ) ) {\n            attachWaitingAdapters( areaName );\n         }\n      } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // eslint-disable-next-line valid-jsdoc\n   /** @private */\n   function attachWaitingAdapters( areaName ) {\n      const waitingAdapters = areaToWaitingAdapters[ areaName ];\n      if( !waitingAdapters || !waitingAdapters.length ) { return; }\n\n      const element = areaToElement[ areaName ];\n      if( !element ) { return; }\n\n      // Make sure that all assets are available before proceeding, so that DOM update happens en bloc.\n      Promise.all( waitingAdapters.map( adapterRef => adapterRef.templatePromise ) )\n         .then( htmlTemplates => {\n            // prepare first/last bootstrap classes for appending widgets\n            waitingAdapters.forEach( ( adapterRef, i ) => {\n               adapterRef.adapter.domAttachTo( element, htmlTemplates[ i ] );\n            } );\n         } );\n\n      delete areaToWaitingAdapters[ areaName ];\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return exports;\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport function findWidgetAreas( rootElement ) {\n   const areas = {};\n   Array.from( rootElement.querySelectorAll( '[ax-widget-area],[data-ax-widget-area]' ) )\n      .forEach( elem => {\n         const name = elem.getAttribute( 'ax-widget-area' ) || elem.getAttribute( 'data-ax-widget-area' );\n\n         areas[ name ] = elem;\n      } );\n   return areas;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/area_helper.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { findWidgetAreas } from './area_helper';\n\nexport function create( areaHelper, className, widget ) {\n\n   const exports = {\n      createController,\n      domAttachTo,\n      domDetach,\n      destroy\n   };\n   let layoutNode;\n   let deregister = () => {};\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createController() {\n      // noop\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function domAttachTo( areaElement, htmlTemplate ) {\n      if( layoutNode ) {\n         areaElement.appendChild( layoutNode );\n         return;\n      }\n\n      layoutNode = document.createElement( 'div' );\n      layoutNode.id = widget.id;\n      layoutNode.className = className;\n      layoutNode.innerHTML = htmlTemplate;\n\n      const areas = findWidgetAreas( layoutNode );\n      const deregisterFuncs = Object.keys( areas )\n         .map( areaName => areaHelper.register( `${widget.id}.${areaName}`, areas[ areaName ] ) );\n      deregister = () => deregisterFuncs.forEach( func => func() );\n\n      areaElement.appendChild( layoutNode );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function domDetach() {\n      if( layoutNode.parentNode ) {\n         layoutNode.parentNode.removeChild( layoutNode );\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function destroy() {\n      deregister();\n      layoutNode = null;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return exports;\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/layout_widget_adapter.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { forEach } from '../utilities/object';\n\n/**\n * Module providing the page.js router factory.\n *\n * @module pagejs_router\n */\n\nconst ROUTE_PARAM_MATCHER = /\\/:([^\\/\\?\\(]+)(\\(\\.\\*\\)|\\?)?/g;\nconst TRAILING_SEGMENTS_MATCHER = /\\/(_\\/)*_?$/;\n\n/**\n * Creates and returns a new page.js router instance from its dependencies.\n *\n * @param {Object} pagejs\n *    the pagejs router module (or a compatible mock)\n * @param {Browser} browser\n *    the browser, used to determine the document base href\n * @param {Configuration} configuration\n *    the configuration instance, used to lookup router configuration as described above\n *\n * @return {PagejsRouter}\n *    a router instance that will route as soon as `registerRoutes` is invoked\n *\n * @private\n */\nexport function create( pagejs, browser, configuration ) {\n\n   const hashbang = configuration.get( 'router.pagejs.hashbang', false );\n   const queryEnabled = configuration.ensure( 'router.query.enabled' );\n\n   const base = configuration.get( 'router.base' ) || fallbackBase( hashbang );\n   const origin = originFromLocation( browser.location() );\n   const absoluteBase = browser.resolve( base, origin );\n\n   /**\n    * Router implementation based on [page.js](https://visionmedia.github.io/page.js/).\n    *\n    * This router allows to register flow patterns in page.js syntax so that their handler is activated when\n    * the corresponding URL is entered in the browser. While that alone does not add much to the\n    * functionality built into page.js, this router also allows to construct URLs based on a pattern and\n    * corresponding substitution parameters. Finally, users can trigger navigation directly.\n    *\n    * Note that the router supports various configuration options:\n    *\n    *  - `router.pagejs`: configuration object that is directly passed to page.js (such as `click`,\n    *    `popstate`, `dispatch`, `hashbang`). The application is responsible for specifying the required\n    *    options, as LaxarJS does not touch the page.js defaults otherwise. Consult the page.js documentation\n    *    for more information\n    *  - `router.query.enabled`: if `true`, query parameters are automatically transformed into additional\n    *    place parameters and vice versa. The default is `false`\n    *  - `router.base`: The base path under which to perform routing. If omitted, the document base href is\n    *    used\n    *\n    * Note that this router encodes/decodes certain parameters in a way that is different from page.js:\n    *\n    *  - when the value `null` is encoded into a URL path segment, it is encoded as `_`\n    *  - the value `/` is double-encoded\n    *\n    * @name PagejsRouter\n    * @constructor\n    */\n   return {\n      registerRoutes,\n      navigateTo,\n      constructAbsoluteUrl\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Register all routes defined in the given route map, as well as a fallback route that should be used\n    * when none of the other routes match. Also causes the initial route to be triggered.\n    *\n    * @param {Object.<String, Function>} routeMap\n    *    a map of routing patterns in page.js syntax to the corresponding handler functions. When invoked,\n    *    the handler functions will receive the decoded parameter values for their pattern and (if configured)\n    *    from the query string, as a map from string parameter name to string value\n    * @param {Function} fallbackHandler\n    *    a handler that is invoked when none of the configured routes match. It receives the failed path as\n    *    a string argument\n    *\n    * @memberof PagejsRouter\n    */\n   function registerRoutes( routeMap, fallbackHandler ) {\n      pagejs.base( base );\n      forEach( routeMap, ( handler, pattern ) => {\n         pagejs( pattern, context => {\n            handler( collectParameters( pattern, context ) );\n         } );\n      } );\n      pagejs( '*', context => {\n         fallbackHandler( context.path );\n      } );\n      pagejs.start( configuration.get( 'router.pagejs', {} ) );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Change the browser location to a different routable URL, from pattern and parameters. This is also\n    * called reverse-routing.\n    *\n    * @param {String[]} patterns\n    *    a list of patterns to choose from. This allows the router to pick the \"best\" pattern, such as the\n    *    pattern containing the largest number of given parameters. This router always picks the first pattern\n    *    for now.\n    * @param {Object} parameters\n    *    parameter values to substitute into the pattern to generate a URL\n    * @param {Boolean} [replaceHistory=true]\n    *    if `true`, the current history entry is replaced with the new one, otherwise a new entry is pushed.\n    *    Useful to express redirects\n    *\n    * @memberof PagejsRouter\n    */\n   function navigateTo( patterns, parameters, replaceHistory = false ) {\n      const path = constructPath( patterns, parameters );\n      ( replaceHistory ? pagejs.redirect : pagejs.show )( path );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Create a routable URL, from pattern and parameters. This allows to create link-hrefs without repeating\n    * URL patterns throughout the code base.\n    *\n    * @param {Array<String>} patterns\n    *    a list of patterns to choose from. This allows the router to pick the \"best\" pattern, such as the\n    *    pattern containing the largest number of given parameters. This router always picks the first pattern\n    *    for now.\n    * @param {Object} parameters\n    *    parameter values to substitute into the pattern to generate a URL\n    * @param {Object} parameterDefaults\n    *    only applicable if query strings are enabled by configuration: before a parameter is encoded into the\n    *    query string, it is checked against the default. Only values that are different from their default\n    *    are kept\n    *\n    * @return {String} the resulting URL, including schema and host\n    *\n    * @memberof PagejsRouter\n    */\n   function constructAbsoluteUrl( patterns, parameters, parameterDefaults ) {\n      const routingPath = constructPath( patterns, parameters, parameterDefaults );\n      return hashbang ? `${absoluteBase}#!${routingPath}` : `${absoluteBase}${routingPath}`;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function constructPath( patterns, parameters ) {\n      const bestPattern = patterns[ 0 ];\n      const path = bestPattern\n         .replace( ROUTE_PARAM_MATCHER, ( $0, $param, $modifier ) => {\n            const replacement = encodeSegment( parameters[ $param ], $modifier === '(.*)' );\n            delete parameters[ $param ];\n            return `/${replacement}`;\n         } )\n         .replace( TRAILING_SEGMENTS_MATCHER, '/' );\n\n      if( queryEnabled ) {\n         const query = [];\n         forEach( parameters, (value, parameterName) => {\n            const encodedKey = encodeURIComponent( parameterName );\n            if( value === true ) {\n               query.push( encodedKey );\n               return;\n            }\n            if( value === false || value == null ) {\n               return;\n            }\n            query.push( `${encodedKey}=${encodeURIComponent( value )}` );\n         } );\n\n         if( query.length ) {\n            return `${path}?${query.join( '&' )}`;\n         }\n      }\n\n      return path;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function collectParameters( pattern, context ) {\n      const { querystring = '', params = {} } = context;\n      const parameters = {};\n      if( queryEnabled && querystring.length ) {\n         querystring.split( '&' )\n            .map( _ => _.split( '=' ).map( decodeURIComponent ) )\n            .forEach( ([ key, value ]) => {\n               parameters[ key ] = value !== undefined ? value : true;\n            } );\n      }\n      forEach( params, ( value, key ) => {\n         const isMultiSegment = pattern.indexOf( `/:${key}(.*)` ) !== -1;\n         parameters[ key ] = decodeSegment( value, isMultiSegment );\n      } );\n      return parameters;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Encode a parameter value for use as path segment(s) in routing.\n    *\n    * Usually, values are simply URL-encoded, but there are special cases:\n    *\n    *  - `null` and `undefined` are encoded as '_',\n    *  - other non-string values are converted to strings before URL encoding,\n    *  - slashes ('/') are double-encoded to '%252F', so that page.js ignores them during route matching,\n    *  - underscore ('_') is double-encoded to '%255F', to avoid confusion with '_' (null).\n    *\n    * When decoded, for use in didNavigate events, the original values will be restored, except for:\n    *  - non-string input values, which will always be decoded into strings,\n    *  - `undefined` values which will be decoded to `null`.\n    *\n    * @param {*} value\n    *   the parameter to encode\n    * @param {Boolean} [isMultiSegment=false]\n    *   determines if encoded value may contain slashes (true) or if slashes are double-encoded so that the\n    *   parameter can always be matched by a single path segment (false)\n    * @return {String}\n    *   the encoded value, for use as a path segment in URLs\n    *\n    * @private\n    */\n   function encodeSegment( value, isMultiSegment ) {\n      if( value == null ) { return '_'; }\n      const urlSegments = encodeURIComponent( value ).replace( /_/g, '%255F' );\n      return isMultiSegment ? urlSegments : urlSegments.replace( /%2F/g, '%252F' );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Decodes a place parameter value from a path segment, to restore it for use in will/didNavigate events.\n    *\n    * Usually, this reverses the application of {#encodeSegment} after the browser has decoded a URL, except:\n    *  - path-segments based on non-string input values, which will always be decoded into strings,\n    *  - path-segments based on `undefined` values which will be decoded to `null`.\n    *\n    * Note that while the browser has already performed URL-decoding, this function replaces `%2F` into `/`\n    * and `%5F` to `_`, to be compatible with the double-encoding performaed by {#encodeSegment}.\n    *\n    * @param {String} value\n    *   the encoded parameter segment to decode\n    * @param {Boolean} [isMultiSegment=false]\n    *   determines if url-encoded slashes in the value were part of the original input (true) or if slashes\n    *   in the given value were double-encoded by {#encodeSegment} and need additional decoding (false)\n    * @return {String}\n    *   the decoded value, for use as a path segment in URLs\n    *\n    * @private\n    */\n   function decodeSegment( value, isMultiSegment ) {\n      if( value === '_' || value == null ) { return null; }\n      const segments = value.replace( /%5F/g, '_' );\n      return isMultiSegment ? segments : segments.replace( /%2F/g, '/' );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function fallbackBase( hashbang ) {\n      if( hashbang ) {\n         return browser.location().pathname;\n      }\n      // relies on the HTML `base` element being present\n      const documentBase = browser.resolve( '.' ).replace( /\\/$/, '' );\n      return documentBase;\n   }\n}\n\nfunction originFromLocation({ protocol, hostname, port }) {\n   return `${protocol}://${hostname}${port ? `:${port}` : ''}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/pagejs_router.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nimport { deepClone } from '../utilities/object';\n\nconst senderOptions = { sender: 'AxPageController' };\nconst subscriberOptions = { subscriber: 'AxPageController' };\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * The LocaleManager initializes the locale(s) and implements changes to them.\n *\n * Before publishing the state of all configured locales, it listens to change requests, allowing\n * widgets and activities (such as a LocaleSwitcherWidget) to influence the state of locales before\n * the navigation is complete.\n */\n\nexport function create( eventBus, configuration ) {\n\n   const exports = {\n      initialize,\n      subscribe,\n      unsubscribe\n   };\n\n   const configLocales = configuration.ensure( 'i18n.locales' );\n   let i18n;\n   let initialized;\n   let unsubscribeFromEventBus = () => {};\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function publish( locale ) {\n      const event = { locale, languageTag: i18n[ locale ] };\n      return eventBus.publish( `didChangeLocale.${locale}`, event, senderOptions );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function initialize() {\n      initialized = true;\n      return Promise.all( Object.keys( configLocales ).map( publish ) );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function unsubscribe() {\n      unsubscribeFromEventBus();\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function subscribe() {\n      i18n = deepClone( configLocales );\n      initialized = false;\n\n      unsubscribeFromEventBus = eventBus.subscribe( 'changeLocaleRequest', event => {\n         i18n[ event.locale ] = event.languageTag;\n         if( initialized ) {\n            publish( event.locale );\n         }\n      }, subscriberOptions );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return exports;\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/locale_event_manager.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\nconst senderOptions = { sender: 'AxPageController', deliverToSender: false };\nconst subscriberOptions = { subscriber: 'AxPageController' };\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * The visibility event manager initializes and coordinates events for widget area visibility.\n *\n * It subscribes to all visibility changes and propagates them to nested widget areas\n * (if applicable). It is not concerned with the resulting DOM-visibility of individual controls:\n * the `axVisibilityService` takes care of that.\n *\n * @param {EventBus} eventBus\n *    an event bus instance\n * @return {Object}\n *    a function to trigger initialization of the manager and initial widget visibility\n */\nexport function create( eventBus ) {\n\n   const exports = {\n      initialize,\n      setAreaHelper,\n      unsubscribe\n   };\n\n   let areaHelper;\n   let unsubscribeFromAreaVisibilityRequest = () => {};\n   let unsubscribeFromWidgetVisibilityRequest = () => {};\n   const ROOT = '';\n\n   function setAreaHelper( _ ) {\n      areaHelper = _;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function initialize() {\n      // broadcast visibility changes in individual widgets to their nested areas\n      unsubscribeFromWidgetVisibilityRequest = eventBus.subscribe( 'changeWidgetVisibilityRequest', event => {\n         const affectedAreas = areaHelper.areasInWidget( event.widget );\n         const will = [ 'willChangeWidgetVisibility', event.widget, event.visible ].join( '.' );\n         const did = [ 'didChangeWidgetVisibility', event.widget, event.visible ].join( '.' );\n\n         eventBus.publish( will, event, senderOptions );\n\n         Promise.all( ( affectedAreas || [] ).map( event.visible ? show : hide ) )\n            .then( () => eventBus.publish( did, event, senderOptions ) );\n      }, subscriberOptions );\n\n      // broadcast visibility changes in widget areas to their nested areas\n      unsubscribeFromAreaVisibilityRequest = eventBus.subscribe( 'changeAreaVisibilityRequest', event => {\n         return initiateAreaChange( event.area, event.visible );\n      }, subscriberOptions );\n\n      return implementAreaChange( ROOT, true );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function show( area ) {\n      return requestAreaChange( area, true );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function hide( area ) {\n      return requestAreaChange( area, false );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * First, publish a `changeAreaVisibilityRequest` to ask if some widget would like to manage the\n    * given area's visibility.\n    * If no widget responds, self-issue a will/did-response to notify interested widgets in the area\n    * of their new visibility status.\n    * In either case, manage the propagation to nested areas and inform the area helper so that it\n    * may compile and attach the templates of any newly visible widgets.\n    *\n    * @param {String} area\n    *    the area whose visibility to update\n    * @param {Boolean} visible\n    *    the new visibility state of the given area, to the best knowledge of the client\n    * @return {Promise}\n    *    promise that is resolved after the change request is completed\n    */\n   function requestAreaChange( area, visible ) {\n      const request = [ 'changeAreaVisibilityRequest', area ].join( '.' );\n      const event = { area, visible };\n      return eventBus.publishAndGatherReplies( request, event, senderOptions )\n         .then( responses => {\n            if( responses.length === 0 ) {\n               // no one took responsibility, so the event manager determines visibility by area nesting\n               return initiateAreaChange( area, visible );\n            }\n            // assume the first 'did'-response to be authoritative:\n            const response = responses[ 0 ];\n            return implementAreaChange( area, response.event.visible );\n         } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   // eslint-disable-next-line valid-jsdoc\n   /**\n    * Set the new visibility state for the given area, then issue requests for the child areas.\n    * Inform the area helper so that it may compile and attach the templates of any newly visible\n    * widgets.\n    */\n   function initiateAreaChange( area, visible ) {\n      const will = [ 'willChangeAreaVisibility', area, visible ].join( '.' );\n      const event = { area, visible };\n      return eventBus.publish( will, event, senderOptions )\n         .then( () => implementAreaChange( area, visible ) )\n         .then( () => {\n            const did = [ 'didChangeAreaVisibility', area, visible ].join( '.' );\n            return eventBus.publish( did, event, senderOptions );\n         } );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function implementAreaChange( ofArea, areaVisible ) {\n      areaHelper.setVisibility( ofArea, areaVisible );\n      const children = areaHelper.areasInArea( ofArea );\n      if( !children ) {\n         return Promise.resolve();\n      }\n\n      return Promise.all( children.map( areaVisible ? show : hide ) );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function unsubscribe() {\n      unsubscribeFromWidgetVisibilityRequest();\n      unsubscribeFromAreaVisibilityRequest();\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   return exports;\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/visibility_event_manager.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * Factory for the services that are available to the controller of a widget, regardless of the underlying\n * view framework.\n *\n * @module widget_services\n */\n\nimport assert from '../utilities/assert';\nimport { BLACKBOX } from '../runtime/log';\nimport { create as createI18n } from './widget_services_i18n';\nimport { create as createVisibility } from './widget_services_visibility';\n\nconst INVALID_ID_MATCHER = /[^A-Za-z0-9_\\.-]/g;\nconst ID_SEPARATOR = '-';\n\nexport function create(\n   artifactProvider,\n   configuration,\n   controlLoader,\n   globalEventBus,\n   flowService,\n   log,\n   heartbeat,\n   pageService,\n   storage,\n   toolingProviders\n) {\n\n   const i18nOptions = configuration.ensure( 'i18n' );\n\n   return {\n      forWidget( specification, widgetConfiguration, features, decorators = {} ) {\n         const { id: widgetId } = widgetConfiguration;\n         const { name: widgetName } = specification;\n\n         const instances = {\n            /**\n             * Area helper service instance.\n             *\n             * @type {AxAreaHelper}\n             */\n            axAreaHelper: null,\n\n            /**\n             * widget asset accessor instance.\n             *\n             * @type {AxAssets}\n             */\n            axAssets: null,\n\n            /**\n             * Interface to the configuration the application was bootstrapped with.\n             *\n             * @type {Configuration}\n             */\n            axConfiguration: null,\n\n            /**\n             * Context information and tiny service collection.\n             *\n             * @type {AxContext}\n             */\n            axContext: null,\n\n            /**\n             * The control loader api to provide access to control modules used by a widget.\n             *\n             * @type {ControlLoader}\n             */\n            axControls: null,\n\n            /**\n             * Event bus instance specifically enriched for a widget instance.\n             *\n             * @type {AxEventBus}\n             */\n            axEventBus: null,\n\n            /**\n             * The features the widget was configured with.\n             * Its structure depends solely on the schema defined in the widget's descriptor file\n             * (`widget.json`)\n             *\n             * @type {Object}\n             */\n            axFeatures: null,\n\n            /**\n             * Injection for the flow service.\n             *\n             * @type {FlowService}\n             */\n            axFlowService: null,\n\n            /**\n             * The global event bus instance of the application.\n             * {@link axEventBus} should always be prefered over this, since for example unsubscribing from\n             * event subscriptions on widget destruction needs be done manually and can lead to severe memory\n             * leaks if omitted.\n             * One valid use case could be an activity, that has permanent knowledge about the application's\n             * state and lifetime, and for example adds an inspector to the event bus.\n             *\n             * @type {EventBus}\n             */\n            axGlobalEventBus: null,\n\n            /**\n             * The global logger instance.\n             *\n             * @type {Logger}\n             */\n            axGlobalLog: null,\n\n            /**\n             * The global storage factory.\n             *\n             * @type {StorageFactory}\n             */\n            axGlobalStorage: null,\n\n            /**\n             * The heartbeat instance.\n             *\n             * @type {Heartbeat}\n             */\n            axHeartbeat: null,\n\n            /**\n             * I18n api specifically for the widget instance.\n             *\n             * @type {AxI18n}\n             */\n            axI18n: null,\n\n            /**\n             * A function that generates page wide unique ids based on ids that are unique within the scope\n             * of a widget.\n             *\n             * A common use case is the connection of a `label` HTML element and an `input` element via `for`\n             * and `id` attributes.\n             * For such cases ids should **always** be generated using this service.\n             *\n             * Example:\n             * ```js\n             * widgetDom.querySelector( 'label' ).setAttribute( 'for', axId( 'myField' ) );\n             * widgetDom.querySelector( 'input' ).setAttribute( 'id', axId( 'myField' ) );\n             * ```\n             *\n             * @param {String} localUniqueId\n             *    an identifier that is unique within a widget\n             *\n             * @return {String}\n             *    an identifier that is unique for the current page\n             *\n             * @type {Function}\n             */\n            axId: null,\n\n            /**\n             * The widget logger instance.\n             * This is basically the same as the {@link #axGlobalLog}, but adds the name of the widget as\n             * prefix and its id as suffix to every log message.\n             *\n             * @type {Logger}\n             */\n            axLog: null,\n\n            /**\n             * Ready to use storage apis for a widget.\n             * All keys are namespaced by the widget id to limit visibility to this specific instance.\n             *\n             * @type {AxStorage}\n             */\n            axStorage: null,\n\n            /**\n             * Access to the tooling provider API.\n             * TODO Fix the type (and document toolingProviders)\n             *\n             * @type {*}\n             */\n            axTooling: null,\n\n            /**\n             * Visibility services for a widget instance.\n             * @type {AxVisibility}\n             */\n            axVisibility: null\n         };\n\n         const services = { ...instances };\n         const releaseHandlers = [];\n\n         registerServiceFactory(\n            'axAreaHelper',\n            () => createAreaHelperForWidget( widgetId ),\n            () => { instances.axAreaHelper.release(); }\n         );\n         registerServiceFactory(\n            'axAssets',\n            () => createAssetsServiceForWidget( widgetName )\n         );\n         registerService( 'axConfiguration', configuration );\n         registerServiceFactory(\n            'axContext',\n            () => createContextForWidget( widgetConfiguration, widgetId, services )\n         );\n         registerService( 'axControls', controlLoader );\n         registerServiceFactory(\n            'axEventBus',\n            () => createEventBusForWidget( services.axGlobalEventBus, widgetName, widgetId ),\n            () => { instances.axEventBus.release(); }\n         );\n         registerService( 'axFeatures', features );\n         registerService( 'axFlowService', flowService );\n         registerService( 'axGlobalEventBus', globalEventBus );\n         registerService( 'axGlobalLog', log );\n         registerService( 'axGlobalStorage', storage );\n         registerService( 'axHeartbeat', heartbeat );\n\n         registerServiceFactory(\n            'axI18n',\n            () => createI18n( services.axContext, i18nOptions )\n         );\n         registerServiceFactory(\n            'axId',\n            () => createIdGeneratorForWidget( widgetId )\n         );\n         registerServiceFactory(\n            'axLog',\n            () => createLoggerForWidget( log, widgetName, widgetId )\n         );\n         registerServiceFactory(\n            'axStorage',\n            () => createStorageForWidget( storage, widgetId )\n         );\n         registerServiceFactory(\n            'axVisibility',\n            () => createVisibility( services.axContext, services.axAreaHelper )\n         );\n         registerService( 'axTooling', toolingProviders );\n\n         return {\n            services,\n            releaseServices() {\n               releaseHandlers.forEach( f => { f(); } );\n            }\n         };\n\n         /////////////////////////////////////////////////////////////////////////////////////////////////////\n\n         function registerService( name, instance ) {\n            const decorate = decorators[ name ];\n            instances[ name ] = services[ name ] = decorate ? decorate( instance ) : instance;\n         }\n\n         /////////////////////////////////////////////////////////////////////////////////////////////////////\n\n         function registerServiceFactory( name, factory, optionalRelease ) {\n            Object.defineProperty(\n               services,\n               name, {\n                  get: () => {\n                     if( !instances[ name ] ) {\n                        const decorate = decorators[ name ];\n                        const instance = factory();\n                        instances[ name ] = decorate ? decorate( instance ) : instance;\n                        if( optionalRelease ) {\n                           releaseHandlers.push( optionalRelease );\n                        }\n                     }\n                     return instances[ name ];\n                  }\n               }\n            );\n\n         }\n      }\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createContextForWidget( widgetConfiguration, widgetId, services ) {\n\n      /**\n       * This object encapsulates widget context information and provides access to the most important widget\n       * specific service instances.\n       * Most commonly this is used when working with\n       * [LaxarJS Patterns](https://github.com/LaxarJS/laxar-patterns).\n       *\n       * @name AxContext\n       * @constructor\n       */\n      return {\n\n         /**\n          * The event bus instance of the widget. This is the same as {@link #axEventBus}.\n          *\n          * @type {AxEventBus}\n          * @memberof AxContext\n          */\n         eventBus: services.axEventBus,\n\n         /**\n          * The configured features of the widget. This is the same as {@link #axFeatures}.\n          *\n          * @type {Object}\n          * @memberof AxContext\n          */\n         features: services.axFeatures,\n\n         /**\n          * The unique id generator function. This is the same as {@link #axId}.\n          *\n          * @type {Function}\n          * @memberof AxContext\n          */\n         id: services.axId,\n\n         /**\n          * The widget local log instance. This is the same as {@link #axLog}.\n          *\n          * @type {AxLog}\n          * @memberof AxContext\n          */\n         log: services.axLog,\n\n         /**\n          * Some information regarding the widget instance.\n          *\n          * The following fields are available:\n          * - `area`: full name of the area the widget is located in\n          * - `id`: the unique id of the widget on the page\n          * - `path`: path of the widget that was used to reference it in the according page or composition.\n          *    This is not the actual path on the file system, but most probably an alias known by the used\n          *    module loader.\n          *\n          * @type {Object}\n          * @memberof AxContext\n          */\n         widget: {\n            area: widgetConfiguration.area,\n            id: widgetId,\n            path: widgetConfiguration.widget\n         }\n      };\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createAreaHelperForWidget( widgetId ) {\n      const deregisterFuncs = [];\n\n      /**\n       * @name AxAreaHelper\n       * @constructor\n       */\n      return {\n         /**\n          * Looks up the global name of a widget area within a widget, as generated by LaxarJS.\n          * This is the reverse of {@link #AxAreaHelper.localName()}.\n          *\n          * @param {String} localAreaName\n          *    the widget-local name of the area\n          *\n          * @return {String}\n          *    the globally valid name of the area\n          *\n          * @memberof AxAreaHelper\n          */\n         fullName( localAreaName ) {\n            assert( localAreaName || null ).hasType( String ).isNotNull();\n            return qualify( localAreaName );\n         },\n\n         /**\n          * Returns the local part of a global area name.\n          * This is the reverse of {@link #AxAreaHelper.fullName()}.\n          *\n          * @param {String} fullAreaName\n          *    the global name of the area\n          *\n          * @return {String}\n          *    the name of the area as it is known to the widget\n          *\n          * @memberof AxAreaHelper\n          */\n         localName( fullAreaName ) {\n            assert( fullAreaName ).hasType( String ).isNotNull();\n            return unqualify( fullAreaName );\n         },\n\n         /**\n          * Registers a DOM element as area of a widget with the area helper.\n          *\n          * @param {String} localAreaName\n          *    the widget-local name of the area\n          * @param {HTMLElement} element\n          *    the element to register as widget area\n          *\n          * @memberof AxAreaHelper\n          */\n         register( localAreaName, element ) {\n            assert( localAreaName ).hasType( String ).isNotNull();\n            assert( element ).hasType( Object ).isNotNull();\n            const areaHelper = pageService.controller().areaHelper();\n            deregisterFuncs.push( areaHelper.register( qualify( localAreaName ), element ) );\n         },\n         release() {\n            deregisterFuncs.forEach( _ => { _(); } );\n         }\n      };\n\n      function qualify( localAreaName ) {\n         return `${widgetId}.${localAreaName}`;\n      }\n\n      function unqualify( fullAreaName ) {\n         return fullAreaName.slice( widgetId.length + 1 );\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createAssetsServiceForWidget( widgetName ) {\n      const widgetArtifacts = artifactProvider.forWidget( widgetName );\n\n      /**\n       * _Note:_ This service is a function with the {@link #AxAssets.url()}, {@link #AxAssets.forTheme()} and\n       * {@link #AxAssets.urlForTheme()} functions as properties.\n       *\n       * Resolves an asset located directly in the widget folder or a subfolder of it.\n       * Valid assets are all non-binary files like JSON or text files.\n       * For binary files there exists the {@link #AxAssets.url} function.\n       *\n       * Example:\n       * ```\n       * function Controller( axAssets ) {\n       *    axAssets( 'data.json' ).then( fileContent => { ... } );\n       * }\n       * ```\n       *\n       * @param {String} name\n       *    name of the asset to resolve\n       *\n       * @return {Promise}\n       *    promise for the asset\n       *\n       * @name AxAssets\n       */\n      const assetService = name => widgetArtifacts.asset( name );\n\n      /**\n       * Resolves the absolute url to the given asset located directly in the widget folder or a subfolder of\n       * it.\n       * This can then be safely used in e.g. `video` or `img` tags.\n       *\n       * Example:\n       * ```\n       * function Controller( axAssets ) {\n       *    axAssets.url( 'tux.jpg' ).then( url => { img.src = url; } );\n       * }\n       * ```\n       *\n       * @param  {String} name\n       *    name of the asset the url should be returned of\n       *\n       * @return {Promise}\n       *    promise for the url\n       *\n       * @memberof AxAssets\n       */\n      assetService.url = name => widgetArtifacts.assetUrl( name );\n\n      /**\n       * Resolves an asset from one of the `*.theme` subfolders of the widget.\n       * The folder from which the asset is taken, depends on the selected theme and the availability of the\n       * file within that theme (See\n       * [here](http://laxarjs.org/docs/laxar-latest/manuals/creating_themes/#how-the-runtime-finds-css) for\n       * further information on theme asset lookup).\n       * Valid assets are all non-binary files like JSON or text files.\n       * For binary files there exists the {@link #AxAssets.urlForTheme} function.\n       *\n       * Example:\n       * ```\n       * function Controller( axAssets ) {\n       *    axAssets.forTheme( 'some-template.html' ).then( template => { ... } );\n       * }\n       * ```\n       *\n       * @param {String} name\n       *    name of the asset to resolve\n       *\n       * @return {Promise}\n       *    promise for the asset\n       *\n       * @memberof AxAssets\n       */\n      assetService.forTheme = name => widgetArtifacts.assetForTheme( name );\n\n      /**\n       * Resolves the absolute url to the given asset from one of the `*.theme` subfolders of the widget.\n       * This can then be safely used in e.g. `video` or `img` tags.\n       * The folder from which the asset is taken, depends on the selected theme and the availability of the\n       * file within that theme (See\n       * [here](http://laxarjs.org/docs/laxar-latest/manuals/creating_themes/#how-the-runtime-finds-css) for\n       * further information on theme asset lookup).\n       *\n       * Example:\n       * ```\n       * function Controller( axAssets ) {\n       *    axAssets.urlForTheme( 'icon.jpg' ).then( url => { img.src = url; } );\n       * }\n       * ```\n       *\n       * @param  {String} name\n       *    name of the asset the url should be returned of\n       *\n       * @return {Promise}\n       *    promise for the url\n       *\n       * @memberof AxAssets\n       */\n      assetService.urlForTheme = name => widgetArtifacts.assetUrlForTheme( name );\n      return assetService;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createLoggerForWidget( logger, widgetName, widgetId ) {\n      const newLogger = Object.create( logger );\n      newLogger.log = ( level, message, ...rest ) =>\n         logger.log( level, enrich( message ), ...rest, BLACKBOX );\n      Object.keys( logger.levels )\n         .map( _ => _.toLowerCase() )\n         .forEach( method => {\n            newLogger[ method ] = ( message, ...rest ) =>\n               logger[ method ]( enrich( message ), ...rest, BLACKBOX );\n         } );\n      return newLogger;\n\n      function enrich( message ) {\n         return `${widgetName}: ${message} (widget-id: ${widgetId})`;\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createStorageForWidget( storage, widgetId ) {\n      const namespace = `widget-${widgetId}`;\n\n      /**\n       * Ready to use storage API for a single widget instance.\n       * All keys are namespaced by the widget id to limit visibility to this specific instance.\n       *\n       * @name AxStorage\n       * @constructor\n       */\n      return {\n         /**\n          * An instance of the storage api using the persistent `window.localStorage`.\n          *\n          * @type {StorageApi}\n          * @memberof AxStorage\n          */\n         local: storage.getLocalStorage( namespace ),\n\n         /**\n          * An instance of the storage api using the non-persistent `window.sessionStorage`.\n          *\n          * @type {StorageApi}\n          * @memberof AxStorage\n          */\n         session: storage.getSessionStorage( namespace )\n      };\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createIdGeneratorForWidget( widgetId ) {\n      const charCodeOfA = 'a'.charCodeAt( 0 );\n      function fixLetter( l ) {\n         // We map invalid characters deterministically to valid lower case letters. Thereby a collision of\n         // two IDs with different invalid characters at the same positions is less likely to occur.\n         return String.fromCharCode( charCodeOfA + ( l.charCodeAt( 0 ) % 26 ) );\n      }\n\n      const prefix = `ax${ID_SEPARATOR}${widgetId.replace( INVALID_ID_MATCHER, fixLetter )}${ID_SEPARATOR}`;\n      return localId => prefix + `${localId}`.replace( INVALID_ID_MATCHER, fixLetter );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function createEventBusForWidget( eventBus, widgetName, widgetId ) {\n\n      const collaboratorId = `widget.${widgetName}#${widgetId}`;\n      const inspectorRemoveFunctions = [];\n      const unsubscribeFunctions = [];\n\n      /**\n       * This is an extension of the global {@link event_bus#EventBus EventBus} by widget specific information\n       * and tasks.\n       * For example a combination of the widget's name and its id is always used as subscriber and sender\n       * id.\n       * Hence for example {@link event_bus#EventBus.publishAndGatherReplies EventBus.publishAndGatherReplies}\n       * works without passing in any options.\n       *\n       * Additionally all subscriptions of a widget are removed as soon as the widget itself is destroyed.\n       * So in practice a widget will receive no further events after the `endLifecycleRequest` event\n       * processing has finished.\n       *\n       * The documentation for the events bus api can be found {@linkplain event_bus here}.\n       *\n       * @name AxEventBus\n       * @constructor\n       */\n      return {\n         addInspector( inspector ) {\n            return makeAutoRemovable( inspectorRemoveFunctions, eventBus.addInspector( inspector ) );\n         },\n         unsubscribe( subscriber ) {\n            return eventBus.unsubscribe( subscriber );\n         },\n         subscribe( eventName, subscriber, optionalOptions ) {\n            const options = { ...optionalOptions, subscriber: collaboratorId };\n            const unsubscribe = eventBus.subscribe( eventName, subscriber, options );\n\n            return makeAutoRemovable( unsubscribeFunctions, unsubscribe );\n         },\n         publish( eventName, optionalEvent, optionalOptions ) {\n            const options = { ...optionalOptions, sender: collaboratorId };\n            return eventBus.publish( eventName, optionalEvent, options );\n         },\n         publishAndGatherReplies( eventName, optionalEvent, optionalOptions ) {\n            const options = { ...optionalOptions, sender: collaboratorId };\n            return eventBus.publishAndGatherReplies( eventName, optionalEvent, options );\n         },\n         release() {\n            purgeAutoRemoveRegistries( inspectorRemoveFunctions, unsubscribeFunctions );\n         }\n      };\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function makeAutoRemovable( registry, removeFunction ) {\n         registry.push( removeFunction );\n         return () => {\n            removeFunction();\n            const index = registry.indexOf( removeFunction );\n            if( index !== -1 ) {\n               registry.splice( index, 1 );\n            }\n         };\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function purgeAutoRemoveRegistries( ...registries ) {\n         registries.forEach( registry => {\n            registry.forEach( _ => { _(); } );\n            registry.length = 0;\n         } );\n      }\n\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/widget_services.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * Factory for i18n widget service instances.\n *\n * @module widget_services_i18n\n */\nimport assert from '../utilities/assert';\nimport { path, setPath } from '../utilities/object';\nimport { format as stringFormat } from '../utilities/string';\n\nconst noDeliveryToSender = { deliverToSender: false };\n\nconst primitives = {\n   string: true,\n   number: true,\n   boolean: true\n};\n\nconst normalize = memoize( languageTag => languageTag.toLowerCase().replace( /[_]/g, '-' ) );\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a widget-specific helper for `didChangeLocale` events.\n *\n * @param {AxContext} context\n *    the widget context/scope that the handler should work with. It uses the `eventBus` property there\n *    with which it can do the event handling. The i18n service may be asked to `track` more context\n *    properties `i18n`, an object that maps each locale to its current language tag.\n * @param {Object} [optionalOptions]\n *    the fallback language tag to use when no localization is available for a locale's current language tag\n * @param {String} [optionalOptions.fallback]\n *    the fallback language tag to use when no localization is available for a locale's current language tag\n * @param {Boolean} [optionalOptions.strict]\n *    if `true`, localizations are only used if the language tags exactly match the current locale's tag\n *    (after normalizing case and dash/underscore). If `false` (default), specific requests can be satisfied\n *    by general localizations (e.g. a translation for 'en' may be used when missing 'en_GB' was requested).\n *\n * @return {AxI18n}\n *    an i18n instance\n */\nexport function create( context, optionalOptions = {} ) {\n\n   const { features, eventBus } = context;\n   const { fallback = 'en', strict = false } = optionalOptions;\n   const handlers = {};\n   const tags = {};\n   const callbacks = {};\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   const release = eventBus.subscribe( 'didChangeLocale', handleLocaleChange );\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * An i18n instance allows to create {@link #AxI18nHandler} instances for any feature, but is itself also\n    * an i18n handler for the feature `i18n`.\n    * So if the widget using the {@link widget_services#axI18n axI18n} injection does use the recommended\n    * name `i18n` for the localization feature, use this directly with the i18n handler API.\n    *\n    * @constructor\n    * @name AxI18n\n    */\n   return {\n      forFeature,\n      release,\n      ...forFeature( 'i18n' )\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Creates and returns an i18n handler for the loclization configuration under the given\n    * [feature path](../glossary#feature-path).\n    * The value is expected to be an object with the key `locale` that is configured with the locale to use\n    * in the widget instance.\n    *\n    * @param {String} featurePath\n    *    the feature path localization configuration can be found at\n    *\n    * @return {AxI18nHandler}\n    *    the i18n handler for the given feature path\n    *\n    * @memberof AxI18n\n    */\n   function forFeature( featurePath ) {\n      assert( featurePath ).hasType( String ).isNotNull();\n      if( handlers[ featurePath ] ) {\n         return handlers[ featurePath ];\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * @constructor\n       * @name AxI18nHandler\n       */\n      const api = {\n         format,\n         languageTag,\n\n         /**\n          * Localize the given internationalized object using the given languageTag.\n          *\n          * If i18n is configured to be _strict_, the currently active language tag is used to lookup a\n          * translation.\n          * If nothing is found, the `languageTag` argument is tried.\n          * If still nothing is found, `undefined` is returned.\n          *\n          * In the case _strict_ is set to `false`, the behavior is the same as in _strict_ mode if an exact\n          * localization is available.\n          * If not, the language tag is successively generalized by stripping off the rightmost sub-tags\n          * until a localization is found.\n          * Eventually, a fallback (default: 'en') is used.\n          * This behavior is especially useful for controls (such as a datepicker), where we cannot\n          * anticipate all required language tags, as they may be app-specific.\n          *\n          * @param {*} i18nValue\n          *    a possibly internationalized value:\n          *    - when passing a primitive value, it is returned as-is\n          *    - when passing an object, the languageTag is used as a key within that object\n          * @param {*} [optionalFallbackValue]\n          *    a value to use if no localization is available for the given language tag\n          * @param {String} [languageTag]\n          *    a language tag to override the current locale tag. Only available in _strict_ mode\n          *\n          * @return {*}\n          *    the localized value if found, the fallback (or `undefined`) otherwise\n          *\n          * @memberof AxI18nHandler\n          * @name localize\n          */\n         localize: strict ? localizeStrict : localizeRelaxed,\n         track,\n         update,\n         whenLocaleChanged\n      };\n      handlers[ featurePath ] = api;\n      const locale = path( features, `${featurePath}.locale` );\n      assert( locale ).hasType( String ).isNotNull(\n         `axI18n: missing feature-configuration '${featurePath}.locale' (widget: ${context.widget.id})`\n      );\n      return api;\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Updates the language tag for the configured locale by emitting the according `changeLocaleRequest`\n       * event.\n       *\n       * @param {String} languageTag\n       *    the language tag to propagate\n       *\n       * @return {Promise}\n       *    the promise of the event cycle\n       *\n       * @memberof AxI18nHandler\n       */\n      function update( languageTag ) {\n         return eventBus.publishAndGatherReplies( `changeLocaleRequest.${locale}`, {\n            locale,\n            languageTag\n         }, noDeliveryToSender ).then( () => {\n            tags[ locale ] = languageTag;\n         } );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Returns the language tag set for the configured locale.\n       * If no tag is available, `undefined` is returned.\n       *\n       * @return {String}\n       *    the active language tag or `undefined`\n       *\n       * @memberof AxI18nHandler\n       */\n      function languageTag() {\n         return tags[ locale ];\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Tracks the current i18n state under the given property.\n       * This includes the current locale and the currently valid tag for this locale.\n       *\n       * @param {Boolean} [enabled=true]\n       *    if `true`, tracking is enabled\n       * @param {*} [property=featurePath]\n       *    name of the context property to store the state at\n       *\n       * @memberof AxI18nHandler\n       */\n      function track( enabled = true, property = featurePath ) {\n         if( enabled && property ) {\n            setPath( context, property, { locale, tags } );\n         }\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Format an i18n value, by first localizing it and then applying substitutions.\n       *\n       * These are equivalent:\n       * - `string.format( axI18n.localize( i18nValue ), numericArgs, namedArgs )`\n       * - `axI18n.format( i18nValue, numericArgs, namedArgs )`.\n       *\n       * @param {String} i18nValue\n       *    the value to localize and then format\n       * @param {Array} [optionalIndexedReplacements]\n       *    replacements for any numeric placeholders in the localized value\n       * @param {Object} [optionalNamedReplacements]\n       *    replacements for any named placeholders in the localized value\n       *\n       * @return {String}\n       *    the formatted string after localization\n       *\n       * @memberof AxI18nHandler\n       */\n      function format( i18nValue, optionalIndexedReplacements, optionalNamedReplacements ) {\n         const formatString = api.localize( i18nValue );\n         return formatString && stringFormat(\n            formatString, optionalIndexedReplacements, optionalNamedReplacements\n         );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      /**\n       * Registers a callback that is called whenever the new valid locale was received via event.\n       *\n       * @param {Function} callback\n       *    the function to call on locale change\n       *\n       * @memberof AxI18nHandler\n       */\n      function whenLocaleChanged( callback ) {\n         callbacks[ locale ] = callbacks[ locale ] || [];\n         callbacks[ locale ].push( callback );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function localizeRelaxed( i18nValue, optionalFallbackValue ) {\n         if( !i18nValue || primitives[ typeof i18nValue ] ) {\n            // value is not internationalized\n            return i18nValue;\n         }\n\n         const tag = tags[ locale ];\n         const tagParts = tag ? tag.replace( /-/g, '_' ).split( '_' ) : [];\n         while( tagParts.length > 0 ) {\n            const currentLocaleTag = tagParts.join( '-' );\n            const value = localizeStrict( i18nValue, undefined, currentLocaleTag );\n            if( value !== undefined ) {\n               return value;\n            }\n            tagParts.pop();\n         }\n\n         return fallback ?\n            localizeStrict( i18nValue, optionalFallbackValue, fallback ) :\n            optionalFallbackValue;\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function localizeStrict( i18nValue, optionalFallbackValue, languageTag = tags[ locale ] ) {\n         if( !i18nValue || primitives[ typeof i18nValue ] ) {\n            // Value is not i18n\n            return i18nValue;\n         }\n         if( !languageTag ) {\n            return optionalFallbackValue;\n         }\n\n         // Try one direct lookup before scanning the input keys,\n         // assuming that language-tags are written in consistent style.\n         const value = i18nValue[ languageTag ];\n         if( value !== undefined ) {\n            return value;\n         }\n\n         const lookupKey = normalize( languageTag );\n         const availableTags = Object.keys( i18nValue );\n         const n = availableTags.length;\n         for( let i = 0; i < n; ++i ) {\n            const t = availableTags[ i ];\n            if( normalize( t ) === lookupKey ) {\n               return i18nValue[ t ];\n            }\n         }\n\n         return optionalFallbackValue;\n      }\n\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function handleLocaleChange({ locale, languageTag }) {\n      const newTag = normalize( languageTag );\n      if( newTag === tags[ locale ] ) {\n         return;\n      }\n      tags[ locale ] = newTag;\n      callbacks[ locale ] = callbacks[ locale ] || [];\n      callbacks[ locale ].forEach( f => { f( languageTag ); } );\n   }\n\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfunction memoize( f ) {\n   const cache = {};\n   return key => {\n      let value = cache[ key ];\n      if( value === undefined ) {\n         value = f( key );\n         cache[ key ] = value;\n      }\n      return value;\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/widget_services_i18n.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n\n/**\n * Factory for i18n widget service instances.\n *\n * @module widget_services_visibility\n */\n\n// <-- temporary guard until https://github.com/LaxarJS/laxar-dox/issues/21 is fixed\nconst noDeliveryToSender = { deliverToSender: false };\nconst noOp = () => {};\n\n/**\n * Creates a widget-specific helper for `didChangeAreaVisibility` events.\n *\n * @param {AxContext} context\n *    the widget context/scope that the handler should work with. It uses the `eventBus` property there\n *    with which it can do the event handling. The visibility handler will set the boolean context property\n *    `isVisible` which can be used to determine the visibility state of the entire widget, e.g. for use in\n *    templates.\n *\n * @param {AxAreaHelper} areaHelper\n *    an area helper to qualify/unqualify names for this widget's areas\n *\n * @return {AxVisibility}\n *    a visibility handler instance\n */\nexport function create( context, areaHelper ) {\n\n   /**\n    *\n    *\n    * @constructor\n    * @name AxVisibility\n    */\n   const api = {\n      onChange,\n      onHide,\n      onShow,\n      release,\n      track,\n      unsubscribe,\n      updateAreaVisibility,\n      updateWidgetVisibility\n   };\n\n   const { eventBus } = context;\n\n   // reading the widget visibility\n   let isVisible = false;\n   let trackingProperty;\n   const showListeners = [];\n   const hideListeners = [];\n   let unsubscribeToChanges = noOp;\n\n   // controlling the visibility of the widget and its areas\n   const visibilityByArea = {};\n   const overrideByArea = {};\n   let unsubscribeToAreaRequests = noOp;\n\n   return api;\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Registers a callback to be run when this widget becomes hidden.\n    *\n    * @param {Function} callback\n    *    a callback to be invoked whenever the widget becomes visible, with a boolean argument indicating\n    *    the new visibility state (`false`). The callback will *not* be invoked for the start value (`false`).\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function onHide( callback ) {\n      hideListeners.push( callback );\n      updateChangeSubscription();\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Registers a callback to be run when this widget becomes visbile.\n    *\n    * @param {Function} callback\n    *    a callback to be invoked whenever the widget becomes visible, with a boolean argument indicating\n    *    the new visibility state (`true`).\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function onShow( callback ) {\n      showListeners.push( callback );\n      updateChangeSubscription();\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Registers a callback for changes to this widget's visibility.\n    *\n    * @param {Function} callback\n    *    a callback to be invoked whenever the widget visibility changes, with a boolean argument indicating\n    *    the new visibility state. The callback will *not* be invoked for the start value (`false`).\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function onChange( callback ) {\n      showListeners.push( callback );\n      hideListeners.push( callback );\n      updateChangeSubscription();\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Starts tracking visibility as a property on the context.\n    *\n    * @param {Boolean} enabled\n    *    If `true` (default) an event bus subscription will be maintained to track visibility changes of the\n    *    current widget by updating a managed property on the context. If `false`, any existing subscription\n    *    will be cancelled. If set, the context property will *not* be removed.\n    * @param {String} property\n    *    The name of the context property to maintain. Changing the property name after tracking has started\n    *    once will not remove previously created properties.\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function track( enabled = true, property = 'isVisible' ) {\n      trackingProperty = enabled ? property : null;\n      if( enabled ) {\n         context[ trackingProperty ] = isVisible;\n      }\n      updateChangeSubscription();\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Triggers a visibility change to the given area. The visibility of the area and its nested areas is\n    * re-evaluated over the event bus. Use this to implement e.g. tabbing/accordion/expander widgets.\n    *\n    * @param {Object} visibilityByLocalArea\n    *   A mapping of local area names (without the widget ID) to their new visibility state (Boolean).\n    *   Areas that are omitted here are left as is. Areas that have not been set at all just assume the\n    *   visibility state of the containing area.\n    * @param {Object} [optionalOptions]\n    *   Additional options\n    * @param {Object} [optionalOptions.overrideContainer]\n    *   Allows the specified areas to become visible even if the widget's container area is not visible.\n    *\n    * @return {Promise}\n    *    a promise that is resolved (without a value) when the visibility change was applied\n    *\n    * @memberof AxVisibility\n    */\n   function updateAreaVisibility( visibilityByLocalArea, optionalOptions = {} ) {\n      const { overrideContainer = false } = optionalOptions;\n\n      if( unsubscribeToAreaRequests === noOp ) {\n         const requestEvent = `changeAreaVisibilityRequest.${context.widget.id}`;\n         unsubscribeToAreaRequests = eventBus.subscribe( requestEvent, responder( isAreaVisible ) );\n      }\n\n      const promises = Object.keys( visibilityByLocalArea ).map( name => {\n         const oldVisible = visibilityByArea[ name ];\n         const oldOverride = overrideByArea[ name ];\n         const visible = visibilityByArea[ name ] = visibilityByLocalArea[ name ];\n         if( overrideContainer ) {\n            overrideByArea[ name ] = overrideContainer;\n         }\n         else if( oldOverride ) {\n            delete overrideByArea[ name ];\n         }\n         if( oldVisible !== visible || oldOverride !== overrideByArea[ name ] ) {\n            const area = areaHelper.fullName( name );\n            const eventName = `changeAreaVisibilityRequest.${area}.${visible}`;\n            return eventBus.publishAndGatherReplies( eventName, { area, visible }, noDeliveryToSender );\n         }\n         return Promise.resolve();\n      } );\n\n      return Promise.all( promises ).then( noOp );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /* @private helper for updateAreaVisibility */\n   function isAreaVisible( localAreaName, containerVisible ) {\n      const areaVisible = visibilityByArea[ localAreaName ];\n      if( areaVisible === undefined ) {\n         return containerVisible;\n      }\n      return areaVisible && ( containerVisible || overrideByArea[ localAreaName ] );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Triggers a visibility change the widget itself and all its areas, always overriding its container\n    * visibility with the given value.\n    * This simplifies implementing popup/popover/layer widgets, which always live in an invisible container\n    * area, but need to show/hide all their owned areas.\n    *\n    * To control the visibility of individual areas, use #updateAreaVisibility\n    *\n    * @param {Boolean} visible\n    *   The new visibility state of the widget.\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function updateWidgetVisibility( visible ) {\n      const widget = context.widget.id;\n      const eventName = `changeWidgetVisibilityRequest.${widget}.${visible}`;\n      return eventBus.publishAndGatherReplies( eventName, { widget, visible }, noDeliveryToSender );\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Remove the given callback (registered through one or more of the on... methods) from any subscriptions.\n    *\n    * @param {Function} callback\n    *    a callback that was previously registered using any of the `on...` methods.\n    *    It will be removed from all registrations. Passing an unknown callback has no effect.\n    *\n    * @return {AxVisibility}\n    *    this instance for chaining\n    *\n    * @memberof AxVisibility\n    */\n   function unsubscribe( callback ) {\n      [ showListeners, hideListeners ].forEach( remove );\n\n      function remove( array ) {\n         const index = array.indexOf( callback );\n         if( index === -1 ) { return; }\n         array.splice( index, 1 );\n         remove( array );\n      }\n      return api;\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function release() {\n      unsubscribeToAreaRequests();\n      unsubscribeToChanges();\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function updateChangeSubscription() {\n      const needsSubscription = trackingProperty || ( showListeners.length + hideListeners.length );\n      if( needsSubscription && unsubscribeToChanges === noOp ) {\n         unsubscribeToChanges = eventBus.subscribe(\n            `didChangeAreaVisibility.${context.widget.area}`,\n            ({ visible } ) => {\n               if( visible === isVisible ) { return; }\n               isVisible = visible;\n               if( trackingProperty ) {\n                  context[ trackingProperty ] = visible;\n               }\n               ( visible ? showListeners : hideListeners ).forEach( f => f( visible ) );\n            }\n         );\n      }\n      else if( unsubscribeToChanges && !needsSubscription ) {\n         unsubscribeToChanges();\n         unsubscribeToChanges = noOp;\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   function responder( callback ) {\n      return ({ area, visible: containerVisible }) => {\n         const visible = callback( areaHelper.localName( area ), containerVisible );\n         if( visible === true || visible === false ) {\n            const didEvent = `didChangeAreaVisibility.${area}.${visible}`;\n            eventBus.publish( didEvent, { area, visible }, noDeliveryToSender );\n         }\n      };\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/widget_services_visibility.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Accepts and keeps laxarjs application data from various laxarjs services, and makes it available to\n * development tools.\n *\n * This module has an internal API (the `collectors`-service), and an external API (the `providers` service).\n * The collectors service is fed data by the other laxarjs services, while the provider allows external\n * listeners to subscribe to that data's changes, or to retrieve snapshots of it.\n */\n\nimport { createProvider as createPagesProvider, createCollector as createPagesCollector } from './pages';\n\n\n// eslint-disable-next-line valid-jsdoc\n/** Collects inspection data from laxarjs services */\nexport function createCollectors( configuration, log ) {\n   return {\n      pages: createPagesCollector( configuration, log )\n   };\n}\n\n// eslint-disable-next-line valid-jsdoc\n/** Exposes inspection data from laxarjs services to development tools */\nexport function createProviders( collectors ) {\n   return {\n      pages: createPagesProvider( collectors.pages )\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/tooling/tooling.js","/**\n * Copyright 2016 aixigo AG\n * Released under the MIT license.\n * http://laxarjs.org/license\n */\n/**\n * Module for the plain widget adapter factory.\n * In LaxarJS _plain_ widgets are defined as widgets without dependency to a specific view library or\n * framwork, and instead would be implemented using simple DOM access and manipulation.\n *\n * A developer will never call any of the API of this module.\n * The documentation solely exists as a blueprint for custom widget adapters and to explain certain concepts.\n *\n * @module plain_adapter\n */\n\nexport const technology = 'plain';\n\nconst noOp = () => {};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Initializes the adapter module and returns a factory for plain widgets.\n * Note that the plain adapter doesn't need all the provided arguments, but they are listed here for\n * documentation purposes.\n *\n * @param {Object} artifacts\n *    the artifacts available to this adapter factory\n * @param {Object} artifacts.widgets\n *    all widgets, that are implemented in the adapter's technology\n * @param {Object} artifacts.controls\n *    all controls, that are implemented in the adapter's technology\n * @param {Object} services\n *    a selection of services adapter implementations may need to fulfill their task\n * @param {AdapterUtilities} services.adapterUtilities\n *    common utilities, that may be useful to a widget adapter\n * @param {ArtifactProvider} services.artifactProvider\n *    the artifact provider instance\n * @param {Configuration} services.configuration\n *    access to the application configuration\n * @param {EventBus} services.globalEventBus\n *    the global event bus.\n *    Note that an adapter should not sent any events by itself.\n *    It may instead be necessary that the adapter makes the event bus globally available to its widgets (for\n *    example like the AngularJS 1.x adapter), or that it registers an inspector\n * @param {Heartbeat} services.heartbeat\n *    the heartbeat instance.\n *    Depending on the underlying view technology (like AngularJS 1.x) it may be important to get notified\n *    when to re-render the user interface.\n *    For that reason an adapter can register a callback at the heartbeat, that gets called after all events\n *    of the current cycle were processed\n * @param {Log} services.log\n *    the global log instance\n * @param {StorageFactory} services.storage\n *    the global storage factory api\n * @param {Tooling} services.tooling\n *    access to the tooling api\n * @param {HTMLElement} anchorElement\n *    the DOM node the laxar application is bootstrapped on.\n *    An adapter should never try to access DOM nodes that are not the `anchorElement` or any of its children,\n *    since they are not under control of this LaxarJS application.\n *\n * @return {PlainAdapterFactory}\n *    the factory for plain widget adapters\n */\nexport function bootstrap( artifacts, { widgetLoader, artifactProvider } ) {\n\n   const { adapterErrors } = widgetLoader;\n\n   /**\n    * A factory for plain widget adapters.\n    *\n    * @constructor\n    * @name PlainAdapterFactory\n    */\n   return {\n      create\n   };\n\n   ///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n   /**\n    * Creates a new adapter instance for the given widget environment.\n    *\n    * @param {Object} environment\n    *    the environment for the widget to create and manage\n    * @param {HTMLElement} environment.anchorElement\n    *    the DOM node that the widget's DOM fragment should be inserted into\n    * @param {String} environment.name\n    *    the name of the widget to load, exactly as specified by the widget descriptor\n    * @param {widget_services} environment.services\n    *    the services for this widget instance\n    * @param {Function} environment.onBeforeControllerCreation\n    *    a function that the adapter must call with a map of all to-be-injected services, just before\n    *    creating the controller\n    *\n    * @return {Object}\n    *    the adapter instance\n    *\n    * @memberof PlainAdapterFactory\n    */\n   function create( { widgetName, anchorElement, services, onBeforeControllerCreation } ) {\n\n      let onDomAvailable = null;\n      let domAttached = false;\n\n      const provider = artifactProvider.forWidget( widgetName );\n\n      return Promise.all( [ provider.descriptor(), provider.module() ] )\n         .then( createController, () => adapterErrors.unknownWidget( { technology, widgetName } ) )\n         .then( () => ( {\n            domAttachTo,\n            domDetach\n         } ) );\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function createController( [ descriptor, module ] ) {\n         services.axWithDom = callback => {\n            if( domAttached ) {\n               callback( anchorElement );\n            }\n         };\n         const injections = ( module.injections || [] ).map( injection => {\n            if( !( injection in services ) ) {\n               throw adapterErrors.unknownInjection( { technology, injection, widgetName } );\n            }\n            if( injection === 'axWithDom' && descriptor.integration.type === 'activity' ) {\n               throw adapterErrors.activityAccessingDom( { technology, injection, widgetName } );\n            }\n            return services[ injection ];\n         } );\n\n         onBeforeControllerCreation( services );\n         ( { onDomAvailable = noOp } = module.create( ...injections ) || {} );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function domAttachTo( areaElement, htmlTemplate ) {\n         if( htmlTemplate === null ) { return; }\n         anchorElement.innerHTML = htmlTemplate;\n         areaElement.appendChild( anchorElement );\n         domAttached = true;\n         onDomAvailable( anchorElement );\n      }\n\n      ////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n      function domDetach() {\n         const parent = anchorElement.parentNode;\n         if( parent ) {\n            parent.removeChild( anchorElement );\n         }\n         domAttached = false;\n      }\n\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/laxar/lib/runtime/plain_adapter.js"],"sourceRoot":""}